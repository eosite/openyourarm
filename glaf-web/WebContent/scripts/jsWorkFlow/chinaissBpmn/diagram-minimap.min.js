/*! diagram-js-minimap - diagram-minimap v0.5.2 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.diagramMiniMap=t()}}(function(){return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n||t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){function i(t){this.createElement=function(e){var n=t.getGraphics(e);if(n){var i=r(n);if(i){var a=s(i);return o(a,{id:e.id}),a}console.log("djsVisual not found")}else console.log("gfx not found")}}function r(t){return[].slice.call(t.childNodes).filter(function(t){return"djs-visual"===t.getAttribute("class")})[0]}var o=t(8),s=t(9);e.exports=i},{8:8,9:9}],2:[function(t,e,n){"use strict";function i(t,e,n,i,o){var s=this;this._canvas=t,this._elementRegistry=e,this._eventBus=n,this._injector=i,this._graphicsUtil=new R(e),this._state={isOpen:void 0,isDragging:!1,initialDragPosition:null,offsetViewport:null,cachedViewbox:null,dragger:null,svgClientRect:null},this._init(),this.toggle(o&&o.open||!1),m.bind(this._viewport,"mouseenter",function(){r(s._parent,$)},this),m.bind(this._viewport,"mouseleave",function(){s._state.isDragging||r(s._parent,P)},this),m.bind(this._map,"mouseenter",function(){s._state.isDragging?r(s._parent,$):r(s._parent,P)},this),m.bind(this._map,"mouseleave",function(){s._state.isDragging||r(s._parent,L)},this),m.bind(this._parent,"mouseleave",function(t){s._state.isDragging&&r(s._parent.parentNode,$)},this),m.bind(this._svg,"click",function(t){s._svgClientRect||(s._svgClientRect=s._svg.getBoundingClientRect()),f(l({x:t.clientX-s._svgClientRect.left,y:t.clientY-s._svgClientRect.top},s._canvas,s._svg),s._canvas),s._update()},this),m.bind(this._viewport,"mousedown",function(e){var n=b(s._viewport);x(s._svg,n),s._svgClientRect||(s._svgClientRect=s._svg.getBoundingClientRect());var i=l({x:e.clientX-s._svgClientRect.left,y:e.clientY-s._svgClientRect.top},s._canvas,s._svg),r=t.viewbox(),o=u(i,r);j(s._state,{isDragging:!0,initialDragPosition:{x:e.clientX,y:e.clientY},offsetViewport:o,cachedViewbox:r,dragger:n}),w(s._viewport,"visibility","hidden")},this),m.bind(document,"mousemove",function(t){if(s._svgClientRect||(s._svgClientRect=s._svg.getBoundingClientRect()),s._state.isDragging){var e=l({x:t.clientX-s._svgClientRect.left,y:t.clientY-s._svgClientRect.top},s._canvas,s._svg),n=s._state.cachedViewbox;f({x:e.x-s._state.offsetViewport.x,y:e.y-s._state.offsetViewport.y},s._canvas),w(s._state.dragger,{x:Math.round(e.x-n.width/2)-s._state.offsetViewport.x,y:Math.round(e.y-n.height/2)-s._state.offsetViewport.y})}},this),m.bind(document,"mouseup",function(t){s._state.isDragging&&(C(s._state.dragger),w(s._viewport,{visibility:"visible"}),s._update(),j(s._state,{isDragging:!1,initialDragPosition:null,offsetViewport:null,cachedViewbox:null,dragger:null}),r(s._parent.parentNode,L))},this),m.bind(this._svg,"wheel",function(e){e.stopPropagation(),s._svgClientRect||(s._svgClientRect=s._svg.getBoundingClientRect()),f(l({x:e.clientX-s._svgClientRect.left,y:e.clientY-s._svgClientRect.top},s._canvas,s._svg),s._canvas);var n=t.zoom(),i=e.deltaY>0?100:-100;t.zoom(Math.min(Math.max(n-i/q,I),G)),s._update()}),m.bind(this._toggle,"mouseenter",function(){s._state.isDragging||j(s._toggle.style,V)}),m.bind(this._toggle,"mouseleave",function(){s._state.isDragging||j(s._toggle.style,N)}),m.bind(this._toggle,"click",function(){s.toggle()}),n.on(["shape.added","connection.added"],function(t){var e=t.element;s._addElement(e),s._update()}),n.on(["shape.removed","connection.removed"],function(t){var e=t.element;s._removeElement(e),s._update()}),n.on("elements.changed",function(t){t.elements.forEach(function(t){s._updateElement(t)}),s._update()}),n.on("element.updateId",function(t){var e=t.element,n=t.newId;s._updateElementId(e,n)}),n.on("canvas.viewbox.changed",function(){s._state.isDragging||s._update()});var a=!1;n.on("attach",function(){a=!0}),n.on("canvas.resized",function(){a&&(s._state.isDragging||s._update(),s._svgClientRect=s._svg.getBoundingClientRect())})}function r(t,e){t.style.cursor=e}function o(t){return t.waypoints}function s(t){return c(t).horizontal}function a(t){return c(t).vertical}function c(t){var e=t.split("-");return{horizontal:e[0]||"right",vertical:e[1]||"top"}}function u(t,e){var n={x:e.x+e.width/2,y:e.y+e.height/2};return{x:t.x-n.x,y:t.y-n.y}}function l(t,e,n){var i=n.getBoundingClientRect(),r=p(e.getDefaultLayer().getBBox(),i.width/i.height);return{x:h(t.x,0,i.width,r.x,r.x+r.width),y:h(t.y,0,i.height,r.y,r.y+r.height)}}function f(t,e){var n=e.viewbox(),i=n.width,r=n.height;e.viewbox({x:t.x-i/2,y:t.y-r/2,width:i,height:r})}function p(t,e){var n=t.width/t.height,i=j({},{x:t.x,y:t.y,width:t.width,height:t.height});if(n>e){var r=i.width*(1/e),o=i.y-(r-i.height)/2;j(i,{y:o,height:r})}else if(n<e){var s=i.height*e,a=i.x-(s-i.width)/2;j(i,{x:a,width:s})}return i}function h(t,e,n,i,r){return(t-e)*(r-i)/(n-e)+i}function d(t,e){var n=_(".djs-children",e.parentNode);if(n){var i=[].slice.call(n.childNodes),r=-1;return i.forEach(function(e,n){_(".djs-element",e)===t&&(r=n)}),r}}function g(t,e,n){var i=[].slice.call(e.childNodes),r=i[n];e.insertBefore(t,r.nextSibling)}var v=t(16),y=t(17),m=t(18),_=t(19),x=t(6),w=t(8),b=t(9),E=t(10),C=t(11),j=t(41),R=t(1),O={width:"320px",height:"180px"},k={position:"absolute",overflow:"hidden","background-color":"#fff",border:"solid 1px #CCC",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0,0,0,0.3)",boxSizing:"border-box",userSelect:"none","-moz-user-select":"none"},D={display:"block"},B={display:"none"},A={width:O.width,height:O.height},N={"background-color":"rgb(250, 250, 250)"},S={width:"100%",height:"10px"},M={width:"46px",height:"46px"},V={"background-color":"#666"},z={fill:"rgba(255, 116, 0, 0.25)"},P="crosshair",L="inherit",$="move",q=300,G=4,I=.2;i.$inject=["canvas","elementRegistry","eventBus","injector","config.minimap"],e.exports=i,i.prototype._init=function(){var t=this._canvas,e=t.getContainer(),n=this._parent=document.createElement("div");switch(y(n).add("djs-minimap"),s("right-top")){case"left":j(k,{left:"20px"});break;default:j(k,{right:"20px"})}switch(a("right-top")){case"bottom":j(k,{bottom:"20px"});break;default:j(k,{top:"20px"})}j(n.style,k),e.appendChild(n);var i=this._map=document.createElement("div");y(i).add("djs-minimap-map"),j(i.style,A),n.appendChild(i);var r=this._svg=E("svg");w(r,{width:"100%",height:"100%"}),x(i,r);var o=this._elementsGroup=E("g");x(r,o);var c=this._viewportGroup=E("g");x(r,c);var u=this._viewport=E("rect");y(u).add("djs-minimap-viewport"),w(u,z),x(c,u);var l=this._toggle=document.createElement("div");y(l).add("djs-minimap-toggle");var f=this._injector.get("translate",!1)||function(t){return t};v(l,"title",f("Toggle minimap")),j(l.style,N),n.appendChild(l),m.bind(n,"mousedown",function(t){t.stopPropagation()})},i.prototype._update=function(){var t=this._canvas.getDefaultLayer().getBBox(),e=this._canvas.viewbox();t.width<e.width&&t.height<e.height?w(this._svg,{viewBox:e.x+", "+e.y+", "+e.width+", "+e.height}):w(this._svg,{viewBox:t.x+", "+t.y+", "+t.width+", "+t.height}),w(this._viewport,{x:e.x,y:e.y,width:e.width,height:e.height})},i.prototype.open=function(){j(this._map.style,D),j(this._toggle.style,S),j(this._state,{isOpen:!0}),y(this._parent).add("open"),this._eventBus.fire("minimap.toggle",{open:!0})},i.prototype.close=function(){j(this._map.style,B),j(this._toggle.style,M),j(this._state,{isOpen:!1}),y(this._parent).remove("open"),this._eventBus.fire("minimap.toggle",{open:!1})},i.prototype.toggle=function(t){var e=this.isOpen();void 0===t&&(t=!e),t!=e&&(t?this.open():this.close())},i.prototype.isOpen=function(){return this._state.isOpen},i.prototype._updateElement=function(t){void 0!==t.parent&&null!==t.parent&&(this._removeElement(t),this._addElement(t))},i.prototype._updateElementId=function(t,e){var n=_("#"+t.id,this._elementsGroup);n&&(n.id=e)},i.prototype._addElement=function(t){var e=this;this._removeElement(t);var n=this._graphicsUtil.createElement(t),i=_("#"+t.parent.id,this._elementsGroup);if(n){var r=this._elementRegistry.getGraphics(t),s=this._elementRegistry.getGraphics(t.parent),a=d(r,s);if("undefined"!==a&&i?g(n,i,a):this._elementsGroup.appendChild(n),o(t)){var c=t.parent,u=0,l=0;void 0!==c.x&&void 0!==c.y&&(u=-c.x,l=-c.y),w(n,{transform:"translate("+u+" "+l+")"})}else{var u=t.x,l=t.y;if(i){var c=t.parent;u-=c.x,l-=c.y}w(n,{transform:"translate("+u+" "+l+")"})}return t.children&&t.children.length&&t.children.forEach(function(t){e._addElement(t)}),n}},i.prototype._removeElement=function(t){var e=this._svg.getElementById(t.id);e&&C(e)}},{1:1,10:10,11:11,16:16,17:17,18:18,19:19,41:41,6:6,8:8,9:9}],3:[function(t,e,n){e.exports={__init__:["minimap"],minimap:["type",t(2)]}},{2:2}],4:[function(t,e,n){e.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],5:[function(t,e,n){function i(t,e){return e.querySelector(t)}n=e.exports=function(t,e){return e=e||document,i(t,e)},n.all=function(t,e){return e=e||document,e.querySelectorAll(t)},n.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return i=t.one,n.all=t.all,n}},{}],6:[function(t,e,n){function i(t,e){return r(e,t),t}e.exports=i;var r=t(7)},{7:7}],7:[function(t,e,n){function i(t,e){return e.appendChild(r(t,e)),t}e.exports=i;var r=t(12)},{12:12}],8:[function(t,e,n){function i(t,e){return c[e]?t.style[e]:t.getAttributeNS(null,e)}function r(t,e,n){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=c[i];r?(r===a&&"number"==typeof n&&(n=String(n)+"px"),t.style[i]=n):t.setAttributeNS(null,e,n)}function o(t,e){var n,i,o=Object.keys(e);for(n=0,i;i=o[n];n++)r(t,i,e[i])}function s(t,e,n){if("string"==typeof e){if(void 0===n)return i(t,e);r(t,e,n)}else o(t,e);return t}e.exports=s;var a=2,c={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":a,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":a,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1}},{}],9:[function(t,e,n){function i(t){return t.cloneNode(!0)}e.exports=i},{}],10:[function(t,e,n){function i(t,e){var n;return"<"===t.charAt(0)?(n=o(t).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(s.svg,t),e&&r(n,e),n}e.exports=i;var r=t(8),o=t(14),s=t(13)},{13:13,14:14,8:8}],11:[function(t,e,n){function i(t){return t.parentNode.removeChild(t),t}e.exports=i},{}],12:[function(t,e,n){function i(t,e){if(t.ownerDocument!==e.ownerDocument)try{return e.ownerDocument.importNode(t,!0)}catch(t){}return t}e.exports=i},{}],13:[function(t,e,n){var i={svg:"http://www.w3.org/2000/svg"};e.exports=i},{}],14:[function(t,e,n){function i(t){return"<svg"===t.substring(0,4)?-1===t.indexOf(o.svg)&&(t=s+t.substring(4)):t=s+">"+t+"</svg>",r(t)}function r(t){var e;return e=new DOMParser,e.async=!1,e.parseFromString(t,"text/xml")}e.exports=i;var o=t(13),s='<svg xmlns="'+o.svg+'"'},{13:13}],15:[function(t,e,n){var i=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==i?"on":"";n.bind=function(t,e,n,r){return t[i](o+e,n,r||!1),n},n.unbind=function(t,e,n,i){return t[r](o+e,n,i||!1),n}},{}],16:[function(t,e,n){e.exports=function(t,e,n){return 2==arguments.length?t.getAttribute(e):null===n?t.removeAttribute(e):(t.setAttribute(e,n),t)}},{}],17:[function(t,e,n){e.exports=t(20)},{20:20}],18:[function(t,e,n){e.exports=t(15)},{15:15}],19:[function(t,e,n){e.exports=t(5)},{5:5}],20:[function(t,e,n){function i(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}try{var r=t(4)}catch(e){var r=t(4)}var o=/\s+/,s=Object.prototype.toString;e.exports=function(t){return new i(t)},i.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~r(e,t)||e.push(t),this.el.className=e.join(" "),this},i.prototype.remove=function(t){if("[object RegExp]"==s.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=r(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},i.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},i.prototype.toggle=function(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},i.prototype.array=function(){var t=this.el.getAttribute("class")||"",e=t.replace(/^\s+|\s+$/g,""),n=e.split(o);return""===n[0]&&n.shift(),n},i.prototype.has=i.prototype.contains=function(t){return this.list?this.list.contains(t):!!~r(this.array(),t)}},{4:4}],21:[function(t,e,n){function i(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,r=o(n.length-e,0),s=Array(r);++i<r;)s[i]=n[e+i];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(i=-1;++i<e;)a[i]=n[i];return a[e]=s,t.apply(this,a)}}var r="Expected a function",o=Math.max;e.exports=i},{}],22:[function(t,e,n){function i(t,e,n){for(var i=-1,o=r(e),s=o.length;++i<s;){var a=o[i],c=t[a],u=n(c,e[a],a,t,e);(u===u?u===c:c!==c)&&(void 0!==c||a in t)||(t[a]=u)}return t}var r=t(42);e.exports=i},{42:42}],23:[function(t,e,n){function i(t,e){return null==e?t:r(e,o(e),t)}var r=t(24),o=t(42);e.exports=i},{24:24,42:42}],24:[function(t,e,n){function i(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}e.exports=i},{}],25:[function(t,e,n){function i(t){return function(e){return null==e?void 0:e[t]}}e.exports=i},{}],26:[function(t,e,n){function i(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,s){return t.call(e,n,i,r,o,s)}}return function(){return t.apply(e,arguments)}}var r=t(44);e.exports=i},{44:44}],27:[function(t,e,n){function i(t){return s(function(e,n){var i=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,c=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),c&&o(n[0],n[1],c)&&(a=s<3?void 0:a,s=1);++i<s;){var l=n[i];l&&t(e,l,a)}return e})}var r=t(26),o=t(32),s=t(21);e.exports=i},{21:21,26:26,32:32}],28:[function(t,e,n){var i=t(25),r=i("length");e.exports=r},{25:25}],29:[function(t,e,n){function i(t,e){var n=null==t?void 0:t[e];return r(n)?n:void 0}var r=t(39);e.exports=i},{39:39}],30:[function(t,e,n){function i(t){return null!=t&&o(r(t))}var r=t(28),o=t(33);e.exports=i},{28:28,33:33}],31:[function(t,e,n){function i(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&t<e}var r=/^\d+$/,o=9007199254740991;e.exports=i},{}],32:[function(t,e,n){function i(t,e,n){if(!s(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}var r=t(30),o=t(31),s=t(40);e.exports=i},{30:30,31:31,40:40}],33:[function(t,e,n){function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;e.exports=i},{}],34:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}e.exports=i},{}],35:[function(t,e,n){function i(t){for(var e=c(t),n=e.length,i=n&&t.length,u=!!i&&a(i)&&(o(t)||r(t)),f=-1,p=[];++f<n;){var h=e[f];(u&&s(h,i)||l.call(t,h))&&p.push(h)}return p}var r=t(36),o=t(37),s=t(31),a=t(33),c=t(43),u=Object.prototype,l=u.hasOwnProperty;e.exports=i},{31:31,33:33,36:36,37:37,43:43}],36:[function(t,e,n){function i(t){return o(t)&&r(t)&&a.call(t,"callee")&&!c.call(t,"callee")}var r=t(30),o=t(34),s=Object.prototype,a=s.hasOwnProperty,c=s.propertyIsEnumerable;e.exports=i},{30:30,34:34}],37:[function(t,e,n){var i=t(29),r=t(33),o=t(34),s=Object.prototype,a=s.toString,c=i(Array,"isArray"),u=c||function(t){return o(t)&&r(t.length)&&"[object Array]"==a.call(t)};e.exports=u},{29:29,33:33,34:34}],38:[function(t,e,n){function i(t){return r(t)&&a.call(t)==o}var r=t(40),o="[object Function]",s=Object.prototype,a=s.toString;e.exports=i},{40:40}],39:[function(t,e,n){function i(t){return null!=t&&(r(t)?l.test(c.call(t)):o(t)&&s.test(t))}var r=t(38),o=t(34),s=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,u=a.hasOwnProperty,l=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},{34:34,38:38}],40:[function(t,e,n){function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=i},{}],41:[function(t,e,n){var i=t(22),r=t(23),o=t(27),s=o(function(t,e,n){return n?i(t,e,n):r(t,e)});e.exports=s},{22:22,23:23,27:27}],42:[function(t,e,n){var i=t(29),r=t(30),o=t(40),s=t(35),a=i(Object,"keys"),c=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r(t)?s(t):o(t)?a(t):[]}:s;e.exports=c},{29:29,30:30,35:35,40:40}],43:[function(t,e,n){function i(t){if(null==t)return[];c(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(o(t)||r(t))&&e||0;for(var n=t.constructor,i=-1,u="function"==typeof n&&n.prototype===t,f=Array(e),p=e>0;++i<e;)f[i]=i+"";for(var h in t)p&&s(h,e)||"constructor"==h&&(u||!l.call(t,h))||f.push(h);return f}var r=t(36),o=t(37),s=t(31),a=t(33),c=t(40),u=Object.prototype,l=u.hasOwnProperty;e.exports=i},{31:31,33:33,36:36,37:37,40:40}],44:[function(t,e,n){function i(t){return t}e.exports=i},{}]},{},[3])(3)});