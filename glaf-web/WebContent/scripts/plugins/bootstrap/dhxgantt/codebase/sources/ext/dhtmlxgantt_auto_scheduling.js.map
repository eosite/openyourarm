{"version":3,"file":"dhtmlxgantt_auto_scheduling.js","sources":["dhtmlxgantt_auto_scheduling.js"],"names":["Gantt","plugin","gantt","_formatLink","link","relations","target","this","_get_link_target","source","_get_link_source","isChildOf","id","_isProject","from","_getImplicitLinks","c","respectTargetOffset","config","auto_scheduling_move_projects","targetDates","getSubtaskDates","start_date","end_date","to","$target","length","getState","drag_id","calculateDuration","task","i","fromTask","j","toTask","lag","subtaskLink","type","push","_convertToFinishToStartLink","parent","selectOffset","eachTask","_getDirectDependencies","selectSuccessors","links","successors","linksIds","$source","getLink","isTaskExists","concat","_getInheritedDependencies","inheritedRelations","_eachParent","apply","relProperty","_getDirectSuccessors","_getInheritedSuccessors","_getDirectPredecessors","_getInheritedPredecessors","_getSuccessors","_getPredecessors","sourceTask","targetTask","res","finish_to_start","preferredStart","additionalLag","start_to_start","duration","finish_to_finish","start_to_finish","auto_scheduling","auto_scheduling_descendant_links","auto_scheduling_initial","auto_scheduling_strict","_forEach","arr","callback","workArray","slice","_arrayMap","resArray","_autoSchedulingGraph","getVertices","ids","rel","vertices","sort","a","b","getGlobalTaskIndex","topologicalSort","edges","hash","$incoming","successor","S","filter","v","L","n","pop","node","m","tarjanStronglyConnectedComponents","strongConnect","vertexId","previousLink","getVertex","index","lowLink","connectedEdges","onStack","edge","w","undefined","Math","min","connectedComponent","tasks","connectedComponents","verticesHash","vertex","_autoSchedulingPath","getKey","join","getVirtualRoot","mixin","root_id","types","project","$virtual","filterDuplicates","keys","key","splice","getLinkedTasks","includePredecessors","startIds","visited","_getLinkedTasks","rootTask","visitedTasks","rootObj","getTask","chainRelations","children","getChildren","findLoops","cycles","graph","component","_autoSchedulingDateResolver","isFirstSmaller","small","big","valueOf","_hasDuration","isSmallerOrDefault","smallDate","bigDate","resolveRelationDate","taskId","getEndDate","minStart","linkId","defaultStart","relation","constraintDate","getConstraintDate","getClosestWorkTime","date","dir","new_start","calculateEndDate","_autoSchedulingPlanner","generatePlan","getPredecessorEndDate","plan","plansHash","orderedIds","predecessorRelations","dateResolver","result","currentId","isLinkExists","predecessor","callEvent","applyProjectPlan","projectPlan","updateTasks","newDate","_autoSchedulingPreferredDates","startTask","Date","_autoSchedule","updateCallback","_autoscheduling_in_progress","path","updatedTasks","planner","autoSchedule","inclusive","_finalizeAutoSchedulingChanges","resetTime","batchUpdate","start","end","resetProjectDates","payload","updateTask","isCircularLink","_getConnectedGroup","manager","allRelations","found","findCycles","_attachAutoSchedulingHandlers","resetToStartLinksLags","skipped","originalLink","presentLinks","updatedLinks","_autoScheduleAfterLinkChange","attachEvent","_preventCircularLink","_preventDescendantLink","_datesNotEqual","dateA","dateB","taskA","taskB","_notEqualTaskDates","task1","task2","milestone","movedTask","mode","_autoScheduleAfterDND","newTask","_lightBoxChangesHandler","oldTask","_autoschedule_lightbox_id","_lightBoxSaveHandler"],"mappings":"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"}