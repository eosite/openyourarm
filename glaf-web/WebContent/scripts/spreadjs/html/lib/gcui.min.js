function __gcuiReadOptionEvents(n,t){for(var u,r,i=0;i<n.length;i++)t.options[n[i]]!==null&&t.element.bind(n[i],t.options[n[i]]);for(i in t.options)if(i.indexOf(" ")!==-1)for(u=i.split(" "),r=0;r<u.length;r++)u[r].length>0&&t.element.bind(u[r],t.options[i])}function gcuiASPNetParseOptionsReviewer(n,t){var r,i=n[t],u;if(i)switch(typeof i){case"string":r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?):(\d{3})Z$/.exec(i),r&&(u=new Date(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],+r[7]),u.setFullYear(+r[1]),n[t]=u);break;case"object":if(i.needQuotes!==undefined&&i.valueString!==undefined)n[t]=i.needQuotes?i.valueString:eval(i.valueString);else for(t in i)gcuiASPNetParseOptionsReviewer(i,t);break}}function gcuiASPNetParseOptions(n){var t;if(!n)return n;for(t in n)gcuiASPNetParseOptionsReviewer(n,t);return n}function applyTouchUtilEvents(n){return n}(function(n,t){var i,ut,it,g,tt,u,c,d,a,nt,w,e,r,k,s,l,v,y,rt,p,o,h,b,f;i=function(n){return new i.prototype.init(n)},typeof require!="undefined"&&typeof exports!="undefined"&&typeof module!="undefined"?module.exports=i:n.Globalize=i,i.cultures={},i.prototype={constructor:i,init:function(n){return this.cultures=i.cultures,this.cultureSelector=n,this}},i.prototype.init.prototype=i.prototype,i.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},i.cultures["default"].calendar=i.cultures["default"].calendars.standard,i.cultures.en=i.cultures["default"],i.cultureSelector="en",ut=/^0x[a-f0-9]+$/i,it=/^[+-]?infinity$/i,g=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,tt=/^\s+|\s+$/g,u=function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},c=function(n,t){return n.substr(n.length-t.length)===t},d=function(n){var o,f,u,r,s,h,i=arguments[0]||{},e=1,c=arguments.length,n=!1;for(typeof i=="boolean"&&(n=i,i=arguments[1]||{},e=2),typeof i=="object"||nt(i)||(i={});e<c;e++)if((o=arguments[e])!=null)for(f in o){u=i[f],r=o[f];if(i===r)continue;n&&r&&(w(r)||(s=a(r)))?(s?(s=!1,h=u&&a(u)?u:[]):h=u&&w(u)?u:{},i[f]=d(n,h,r)):r!==t&&(i[f]=r)}return i},a=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},nt=function(n){return Object.prototype.toString.call(n)==="[object Function]"},w=function(n){return Object.prototype.toString.call(n)==="[object Object]"},e=function(n,t){return n.indexOf(t)===0},r=function(n){return(n+"").replace(tt,"")},k=function(n){return isNaN(n)?NaN:n|0},s=function(n,t,i){for(var r=n.length;r<t;r+=1)n=i?"0"+n:n+"0";return n},l=function(n,t){for(var r,f=0,i=!1,u=0,e=n.length;u<e;u++){r=n.charAt(u);switch(r){case"'":i?t.push("'"):f++,i=!1;break;case"\\":i&&t.push("\\"),i=!i;break;default:t.push(r),i=!1}}return f},v=function(n,t){t=t||"F";var i,u=n.patterns,r=t.length;if(r===1){i=u[t];if(!i)throw"Invalid date format string '"+t+"'.";t=i}else r===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t},y=function(n,t,i){function e(n,t){var i,r=n+"";if(t>1&&r.length<t)return i=lt[t-2]+r,i.substr(i.length-t,t);else i=r;return i}function ct(){return b||rt?b:(b=ht.test(t),rt=!0,b)}function nt(n,t){if(w)return w[t];switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate()}}var u=i.calendar,d=u.convert,r,g,ft,tt,it,k,f,ut,c;if(!t||!t.length||t==="i")return i&&i.name.length?d?r=y(n,u.patterns.F,i):(g=new Date(n.getTime()),ft=o(n,u.eras),g.setFullYear(h(n,u,ft)),r=g.toLocaleString()):r=n.toString(),r;tt=u.eras,it=t==="s",t=v(u,t),r=[];var s,lt=["0","00","000"],b,rt,ht=/([^d]|^)(d|dd)([^d]|$)/g,et=0,ot=p(),w;for(!it&&d&&(w=d.fromGregorian(n));;){var st=ot.lastIndex,a=ot.exec(t),at=t.slice(st,a?a.index:t.length);et+=l(at,r);if(!a)break;if(et%2){r.push(a[0]);continue}k=a[0],f=k.length;switch(k){case"ddd":case"dddd":ut=f===3?u.days.namesAbbr:u.days.names,r.push(ut[n.getDay()]);break;case"d":case"dd":b=!0,r.push(e(nt(n,2),f));break;case"MMM":case"MMMM":c=nt(n,1),r.push(u.monthsGenitive&&ct()?u.monthsGenitive[f===3?"namesAbbr":"names"][c]:u.months[f===3?"namesAbbr":"names"][c]);break;case"M":case"MM":r.push(e(nt(n,1)+1,f));break;case"y":case"yy":case"yyyy":c=w?w[0]:h(n,u,o(n,tt),it),f<4&&(c=c%100),r.push(e(c,f));break;case"h":case"hh":s=n.getHours()%12,s===0&&(s=12),r.push(e(s,f));break;case"H":case"HH":r.push(e(n.getHours(),f));break;case"m":case"mm":r.push(e(n.getMinutes(),f));break;case"s":case"ss":r.push(e(n.getSeconds(),f));break;case"t":case"tt":c=n.getHours()<12?u.AM?u.AM[0]:" ":u.PM?u.PM[0]:" ",r.push(f===1?c.charAt(0):c);break;case"f":case"ff":case"fff":r.push(e(n.getMilliseconds(),3).substr(0,f));break;case"z":case"zz":s=n.getTimezoneOffset()/60,r.push((s<=0?"+":"-")+e(Math.floor(Math.abs(s)),f));break;case"zzz":s=n.getTimezoneOffset()/60,r.push((s<=0?"+":"-")+e(Math.floor(Math.abs(s)),2)+":"+e(Math.abs(n.getTimezoneOffset()%60),2));break;case"g":case"gg":u.eras&&r.push(u.eras[o(n,tt)].name);break;case"/":r.push(u["/"]);break;default:throw"Invalid date format pattern '"+k+"'.";}}return r.join("")},function(){var n;n=function(n,t,i){var l=i.groupSizes,c=l[0],y=1,p=Math.pow(10,t),v=Math.round(n*p)/p,w;isFinite(v)||(v=n),n=v;var u=n+"",r="",o=u.split(/e/i),f=o.length>1?parseInt(o[1],10):0;u=o[0],o=u.split("."),u=o[0],r=o.length>1?o[1]:"",f>0?(r=s(r,f,!1),u+=r.slice(0,f),r=r.substr(f)):f<0&&(f=-f,u=s(u,f+1),r=u.slice(-f,u.length)+r,u=u.slice(0,-f)),r=t>0?i["."]+(r.length>t?r.slice(0,t):s(r,t)):"";var e=u.length-1,a=i[","],h="";while(e>=0){if(c===0||c>e)return u.slice(0,e+1)+(h.length?a+h+r:r);h=u.slice(e-c+1,e+1)+(h.length?a+h:""),e-=c,y<l.length&&(c=l[y],y++)}return u.slice(0,e+1)+a+h+r},rt=function(t,i,r){var a,f,v,e,y,c;if(!isFinite(t))return t===Infinity?r.numberFormat.positiveInfinity:t===-Infinity?r.numberFormat.negativeInfinity:r.numberFormat.NaN;if(!i||i==="i")return r.name.length?t.toLocaleString():t.toString();i=i||"D";var o=r.numberFormat,u=Math.abs(t),h=-1,l;i.length>1&&(h=parseInt(i.slice(1),10)),a=i.charAt(0).toUpperCase();switch(a){case"D":l="n",u=k(u),h!==-1&&(u=s(""+u,h,!0)),t<0&&(u="-"+u);break;case"N":f=o;case"C":f=f||o.currency;case"P":f=f||o.percent,l=t<0?f.pattern[0]:f.pattern[1]||"n",h===-1&&(h=f.decimals),u=n(u*(a==="P"?100:1),h,f);break;default:throw"Bad number format specifier: "+a;}for(v=/n|\$|-|%/g,e="";;){y=v.lastIndex,c=v.exec(l),e+=l.slice(y,c?c.index:l.length);if(!c)break;switch(c[0]){case"n":e+=u;break;case"$":e+=o.currency.symbol;break;case"-":/[1-9]/.test(u)&&(e+=o["-"]);break;case"%":e+=o.percent.symbol}}return e}}(),p=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},o=function(n,t){if(!t)return 0;for(var r,f=n.getTime(),i=0,u=t.length;i<u;i++){r=t[i].start;if(r===null||f>=r)return i}return 0},h=function(n,t,i,r){var u=n.getFullYear();return!r&&t.eras&&(u-=t.eras[i].offset),u},function(){var f,s,c,a,n,i,t;f=function(n,t){if(t<100){var r=new Date,f=o(r),u=h(r,n,f),i=n.twoDigitYearMax;i=typeof i=="string"?(new Date).getFullYear()%100+parseInt(i,10):i,t+=u-u%100,t>i&&(t-=100)}return t},s=function(n,r,f){var o,s=n.days,e=n._upperDays;return e||(n._upperDays=e=[t(s.names),t(s.namesAbbr),t(s.namesShort)]),r=i(r),f?(o=u(e[1],r),o===-1&&(o=u(e[2],r))):o=u(e[0],r),o},c=function(n,r,f){var h=n.months,c=n.monthsGenitive||n.months,e=n._upperMonths,s=n._upperMonthsGen,o;return e||(n._upperMonths=e=[t(h.names),t(h.namesAbbr)],n._upperMonthsGen=s=[t(c.names),t(c.namesAbbr)]),r=i(r),o=u(f?e[1]:e[0],r),o<0&&(o=u(f?s[1]:s[0],r)),o},a=function(n,t){var e=n._parseRegExp,o,k,f,a,i,y,c;if(e){o=e[t];if(o)return o}else n._parseRegExp=e={};var h=v(n,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],b=[],s=0,w=0,d=p(),u;while((u=d.exec(h))!==null){k=h.slice(s,u.index),s=d.lastIndex,w+=l(k,r);if(w%2){r.push(u[0]);continue}f=u[0],a=f.length;switch(f){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":i="(\\D+)";break;case"tt":case"t":i="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":i="(\\d{"+a+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i="(\\d\\d?)";break;case"zzz":i="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":i="([+-]?\\d\\d?)";break;case"/":i="(\\"+n["/"]+")";break;default:throw"Invalid date format pattern '"+f+"'.";}i&&r.push(i),b.push(u[0])}return l(h.slice(s),r),r.push("$"),y=r.join("").replace(/\s+/g,"\\s+"),c={regExp:y,groups:b},e[t]=c},n=function(n,t,i){return n<t||n>i},i=function(n){return n.split("\u00a0").join(" ").toUpperCase()},t=function(n){for(var r=[],t=0,u=n.length;t<u;t++)r[t]=i(n[t]);return r},b=function(t,i,u){var l,ft,ut,d,g,kt,h,vt,nt,ot;t=r(t);var o=u.calendar,yt=a(o,i),pt=new RegExp(yt.regExp).exec(t);if(pt===null)return null;for(var wt=yt.groups,ct=null,b=null,p=null,w=null,tt=null,y=0,k,lt=0,ht=0,st=0,et=null,at=!1,it=0,dt=wt.length;it<dt;it++){l=pt[it+1];if(l){var bt=wt[it],rt=bt.length,v=parseInt(l,10);switch(bt){case"dd":case"d":w=v;if(n(w,1,31))return null;break;case"MMM":case"MMMM":p=c(o,l,rt===3);if(n(p,0,11))return null;break;case"M":case"MM":p=v-1;if(n(p,0,11))return null;break;case"y":case"yy":case"yyyy":b=rt<4?f(o,v):v;if(n(b,0,9999))return null;break;case"h":case"hh":y=v,y===12&&(y=0);if(n(y,0,11))return null;break;case"H":case"HH":y=v;if(n(y,0,23))return null;break;case"m":case"mm":lt=v;if(n(lt,0,59))return null;break;case"s":case"ss":ht=v;if(n(ht,0,59))return null;break;case"tt":case"t":at=o.PM&&(l===o.PM[0]||l===o.PM[1]||l===o.PM[2]);if(!at&&(!o.AM||l!==o.AM[0]&&l!==o.AM[1]&&l!==o.AM[2]))return null;break;case"f":case"ff":case"fff":st=v*Math.pow(10,3-rt);if(n(st,0,999))return null;break;case"ddd":case"dddd":tt=s(o,l,rt===3);if(n(tt,0,6))return null;break;case"zzz":ft=l.split(/:/);if(ft.length!==2)return null;k=parseInt(ft[0],10);if(n(k,-12,13))return null;ut=parseInt(ft[1],10);if(n(ut,0,59))return null;et=k*60+(e(l,"-")?-ut:ut);break;case"z":case"zz":k=v;if(n(k,-12,13))return null;et=k*60;break;case"g":case"gg":d=l;if(!d||!o.eras)return null;for(d=r(d.toLowerCase()),g=0,kt=o.eras.length;g<kt;g++)if(d===o.eras[g].name.toLowerCase()){ct=g;break}if(ct===null)return null}}}h=new Date,nt=o.convert,vt=nt?nt.fromGregorian(h)[0]:h.getFullYear(),b===null?b=vt:o.eras&&(b+=o.eras[ct||0].offset),p===null&&(p=0),w===null&&(w=1);if(nt){h=nt.toGregorian(b,p,w);if(h===null)return null}else{h.setFullYear(b,p,w);if(h.getDate()!==w)return null;if(tt!==null&&h.getDay()!==tt)return null}return at&&y<12&&(y+=12),h.setHours(y,lt,ht,st),et!==null&&(ot=h.getMinutes()-(et+h.getTimezoneOffset()),h.setHours(h.getHours()+parseInt(ot/60,10),ot%60)),h}}(),f=function(n,t,i){var u=t["-"],r=t["+"],f;switch(i){case"n -":u=" "+u,r=" "+r;case"n-":c(n,u)?f=["-",n.substr(0,n.length-u.length)]:c(n,r)&&(f=["+",n.substr(0,n.length-r.length)]);break;case"- n":u+=" ",r+=" ";case"-n":e(n,u)?f=["-",n.substr(u.length)]:e(n,r)&&(f=["+",n.substr(r.length)]);break;case"(n)":e(n,"(")&&c(n,")")&&(f=["-",n.substr(1,n.length-2)])}return f||["",n]},i.prototype.findClosestCulture=function(n){return i.findClosestCulture.call(this,n)},i.prototype.format=function(n,t,r){return i.format.call(this,n,t,r)},i.prototype.localize=function(n,t){return i.localize.call(this,n,t)},i.prototype.parseInt=function(n,t,r){return i.parseInt.call(this,n,t,r)},i.prototype.parseFloat=function(n,t,r){return i.parseFloat.call(this,n,t,r)},i.prototype.culture=function(n){return i.culture.call(this,n)},i.addCultureInfo=function(n,t,i){var r={},u=!1;typeof n!="string"?(i=n,n=this.culture().name,r=this.cultures[n]):typeof t!="string"?(i=t,u=this.cultures[n]==null,r=this.cultures[n]||this.cultures["default"]):(u=!0,r=this.cultures[t]),this.cultures[n]=d(!0,{},r,i),u&&(this.cultures[n].calendar=this.cultures[n].calendars.standard)},i.findClosestCulture=function(n){var u,f,s,l,y,c;if(!n)return this.cultures[this.cultureSelector]||this.cultures["default"];typeof n=="string"&&(n=n.split(","));if(a(n)){for(var i,o=this.cultures,v=n,h=v.length,e=[],t=0;t<h;t++)n=r(v[t]),s=n.split(";"),i=r(s[0]),s.length===1?f=1:(n=r(s[1]),n.indexOf("q=")===0?(n=n.substr(2),f=parseFloat(n),f=isNaN(f)?0:f):f=1),e.push({lang:i,pri:f});for(e.sort(function(n,t){return n.pri<t.pri?1:-1}),t=0;t<h;t++){i=e[t].lang,u=o[i];if(u)return u}for(t=0;t<h;t++){i=e[t].lang;do{l=i.lastIndexOf("-");if(l===-1)break;i=i.substr(0,l),u=o[i];if(u)return u}while(1)}for(t=0;t<h;t++){i=e[t].lang;for(y in o){c=o[y];if(c.language==i)return c}}}else if(typeof n=="object")return n;return u||null},i.format=function(n,t,i){return culture=this.findClosestCulture(i),n instanceof Date?n=y(n,t,culture):typeof n=="number"&&(n=rt(n,t,culture)),n},i.localize=function(n,t){return this.findClosestCulture(t).messages[n]||this.cultures["default"].messages[n]},i.parseDate=function(n,t,i){var r,o,f,u,s,e;i=this.findClosestCulture(i);if(t){typeof t=="string"&&(t=[t]);if(t.length)for(u=0,s=t.length;u<s;u++){e=t[u];if(e){r=b(n,e,i);if(r)break}}}else{f=i.calendar.patterns;for(o in f){r=b(n,f[o],i);if(r)break}}return r||null},i.parseInt=function(n,t,r){return k(i.parseFloat(n,t,r))},i.parseFloat=function(n,t,i){var k,c,l,s,b,nt,y,p,tt,v,d;typeof t!="number"&&(i=t,t=10);var a=this.findClosestCulture(i),w=NaN,u=a.numberFormat;n.indexOf(a.numberFormat.currency.symbol)>-1&&(n=n.replace(a.numberFormat.currency.symbol,""),n=n.replace(a.numberFormat.currency["."],a.numberFormat["."])),n=r(n);if(it.test(n))w=parseFloat(n);else if(!t&&ut.test(n))w=parseInt(n,16);else{var e=f(n,u,u.pattern[0]),o=e[0],h=e[1];o===""&&u.pattern[0]!=="(n)"&&(e=f(n,u,"(n)"),o=e[0],h=e[1]),o===""&&u.pattern[0]!=="-n"&&(e=f(n,u,"-n"),o=e[0],h=e[1]),o=o||"+",l=h.indexOf("e"),l<0&&(l=h.indexOf("E")),l<0?(c=h,k=null):(c=h.substr(0,l),k=h.substr(l+1)),nt=u["."],y=c.indexOf(nt),y<0?(s=c,b=null):(s=c.substr(0,y),b=c.substr(y+nt.length)),p=u[","],s=s.split(p).join(""),tt=p.replace(/\u00A0/g," "),p!==tt&&(s=s.split(tt).join("")),v=o+s,b!==null&&(v+="."+b),k!==null&&(d=f(k,u,"-n"),v+="e"+(d[0]||"+")+d[1]),g.test(v)&&(w=parseFloat(v))}return w},i.culture=function(n){return typeof n!="undefined"&&(this.cultureSelector=n),this.findClosestCulture(n)||this.culture["default"]}})(this);var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},gcui;(function(n){var t=jQuery,f={autoMobilize:!0,uiCSS:{widget:"ui-widget",overlay:"ui-widget-overlay",content:"ui-widget-content",header:"ui-widget-header",stateDisabled:"ui-state-disabled",stateFocus:"ui-state-focus",stateActive:"ui-state-active",stateDefault:"ui-state-default",stateHightlight:"ui-state-highlight",stateHover:"ui-state-hover",stateChecked:"ui-state-checked",stateError:"ui-state-error",getState:function(n){return n=n.charAt(0).toUpperCase()+n.substr(1),t.gcui.uiCSS["state"+n]},icon:"ui-icon",iconCheck:"ui-icon-check",iconRadioOn:"ui-icon-radio-on",iconRadioOff:"ui-icon-radio-off",iconClose:"ui-icon-close",iconArrow4Diag:"ui-icon-arrow-4-diag",iconNewWin:"ui-icon-newwin",iconVGripSolid:"ui-icon-grip-solid-vertical",iconHGripSolid:"ui-icon-grip-solid-horizontal",iconPlay:"ui-icon-play",iconPause:"ui-icon-pause",iconStop:"ui-icon-stop",iconArrowUp:"ui-icon-triangle-1-n",iconArrowRight:"ui-icon-triangle-1-e",iconArrowDown:"ui-icon-triangle-1-s",iconArrowLeft:"ui-icon-triangle-1-w",iconArrowRightDown:"ui-icon-triangle-1-se",iconCaratUp:"ui-icon-carat-1-n",iconCaratRight:"ui-icon-carat-1-e",iconCaratDown:"ui-icon-carat-1-s",iconCaratLeft:"ui-icon-carat-1-w",iconSeekFirst:"ui-icon-seek-first",iconSeekEnd:"ui-icon-seek-end",iconSeekNext:"ui-icon-seek-next",iconSeekPrev:"ui-icon-seek-prev",inputSpinnerLeft:"ui-input-spinner-left",inputSpinnerRight:"ui-input-spinner-right",inputTriggerLeft:"ui-input-trigger-left",inputTriggerRight:"ui-input-trigger-right",inputSpinnerTriggerLeft:"ui-input-spinner-trigger-left",inputSpinnerTriggerRight:"ui-input-spinner-trigger-right",cornerAll:"ui-corner-all",cornerLeft:"ui-corner-left",cornerRight:"ui-corner-right",cornerBottom:"ui-corner-bottom",cornerBL:"ui-corner-bl",cornerBR:"ui-corner-br",cornerTop:"ui-corner-top",cornerTL:"ui-corner-tl",cornerTR:"ui-corner-tr",helperClearFix:"ui-helper-clearfix",helperReset:"ui-helper-reset",helperHidden:"ui-helper-hidden",priorityPrimary:"ui-priority-primary",prioritySecondary:"ui-priority-secondary",button:"ui-button",buttonText:"ui-button-text",buttonTextOnly:"ui-button-text-only",tabs:"ui-tabs",tabsTop:"ui-tabs-top",tabsBottom:"ui-tabs-bottom",tabsLeft:"ui-tabs-left",tabsRight:"ui-tabs-right",tabsLoading:"ui-tabs-loading",tabsActive:"ui-tabs-active",tabsPanel:"ui-tabs-panel",tabsNav:"ui-tabs-nav",tabsHide:"ui-tabs-hide",tabsCollapsible:"ui-tabs-collapsible",activeMenuitem:"ui-active-menuitem"},mobileCSS:{content:"ui-content",header:"ui-header",overlay:"ui-overlay",stateDisabled:"ui-disabled",stateFocus:"ui-focus",stateActive:"ui-btn-active",stateDefault:"ui-btn-up-a",iconArrowUp:"ui-icon-arrow-u",iconArrowRight:"ui-icon-arrow-r",iconArrowDown:"ui-icon-arrow-d",iconArrowLeft:"ui-icon-arrow-l",iconArrowRightDown:"ui-icon-arrow-d",iconSeekFirst:"ui-icon-arrow-l",iconSeekEnd:"ui-icon-arrow-r",iconSeekNext:"ui-icon-arrow-r",iconSeekPrev:"ui-icon-arrow-l",iconClose:"ui-icon-delete",iconStop:"ui-icon-grid",iconCheck:"ui-icon-checkbox-on"},mobileThemePrefix:["ui-bar","ui-body","ui-overlay","ui-btn-up","ui-btn-hover","ui-btn-down"],autoInit:function(n,i){if(t.mobile&&t.mobile.page&&i){var r=t.mobile.page.prototype.options.keepNative;r=r&&r.length&&r.indexOf(i)===-1?[r,i].join(", "):i,t.mobile.page.prototype.options.keepNative=r}t.mobile&&t.gcui[n]&&t.gcui[n].prototype&&t.gcui[n].prototype.enhanceWithin&&t(document).bind("pagecreate create",function(i){t.gcui[n].prototype.enhanceWithin(i.target)})},registerWidget:function(n,i,r,u){var e="gcui."+n,f;typeof r=="function"&&(f=r,r=null),(r===null||r===undefined)&&(r=t.extend(!0,{},i),i=t.gcui.widget),r.options=r.options||{},r.options.initSelector=r.options.initSelector||":jqmData(role='"+n+"')",t.mobile&&r.options&&r.options.mobileCSS&&(r.options.uiCSS=r.options.uiCSS||{},t.extend(r.options.uiCSS,r.options.mobileCSS)),t.widget(e,i,r),f?f.call():this.autoInit&&this.autoInit(n,r.options.initSelector)},addThemeToMobileCSS:function(n,i){t.each(i,function(r,u){typeof u=="string"?t.each(jQueryGCUI.mobileThemePrefix,function(t,f){var e=new RegExp("\\b"+f);e.test(u)&&(i[r]=u+" "+f+"-"+n)}):jQueryGCUI.addThemeToMobileCSS(n,u)})}},u,r,i;t.gcui=f,u=function(){function n(){}return n.prototype.options={uiCSS:t.gcui.uiCSS},n.prototype.widget=function(){return this.element},["destory","_setOption","_create","_init"].forEach(function(i){n.prototype[i]=function(){t.Widget.prototype[i].apply(this,arguments)}}),n}(),n.GCUIWidget=u,r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(u),n.GCUIMobileWidget=r,t(window.document).trigger("gcuiinit"),i=function(n){function i(){n.apply(this,arguments),this._widgetCreated=!1}return __extends(i,n),i.prototype._baseWidget=function(){return this._isMobile?t.mobile.widget:t.Widget},i.prototype._createWidget=function(n,i){this._widgetCreated=!0,this._syncEventPrefix&&(this.widgetEventPrefix=this.widgetName),window.applyTouchUtilEvents&&(t=window.applyTouchUtilEvents(t)),this._baseWidget().prototype._createWidget.apply(this,arguments)},i.prototype._create=function(){this._baseWidget().prototype._create.apply(this,arguments)},i.prototype._init=function(){this._baseWidget().prototype._init.apply(this,arguments)},i.prototype.destroy=function(){this._baseWidget().prototype.destroy.apply(this,arguments)},i.prototype._setOption=function(n,t){this._baseWidget().prototype._setOption.apply(this,arguments),n==="disabled"&&t&&this._isMobile&&this.element.removeClass("ui-state-disabled").addClass(this.options.uiCSS.stateDisabled)},i}(r),n.gcuiWidget=i,i.prototype._syncEventPrefix=!0,i.prototype._isMobile=!1;if(t.mobile!=null&&t.gcui.autoMobilize===!0){t.extend(!0,i.prototype.options.uiCSS,t.gcui.mobileCSS),i.prototype._isMobile=!0,i.prototype.options=t.extend(!0,{},i.prototype.options,i.prototype._baseWidget().prototype.options),i.prototype.enhanceWithin=function(n,i){this._widgetCreated||t.mobile.widget.prototype.enhanceWithin.apply(this,arguments)},i.prototype._getCreateOptions=function(){var r=this.element,i,f=function(n){if(typeof n=="undefined")return{};else if(n===null)return{};var u=/(?:(?:\{[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*)|(?:,[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*))('(.*?[^\\])')?/gi,r=/\[.*?(?=[\]\[])|[\]\[].*?(?=[\]])/gi,i=n.replace(u,function(n,t,i,r){var u,e=/[\n\r\t\s]*['"]?([^\{,\s]+?)['"]?\s*:[\n\r\t\s]*/i,f=/\:[\n\r\t\s]*(?:'(.*)')?/i;return u=n.replace(e,'"$1":'),r?u.replace(f,':"$1"'):u}).replace(r,function(n){var t=/'(.*?[^\\])'/g;return n.replace(t,'"$1"')});return t.parseJSON(i)},u=f(r.attr("data-"+t.mobile.nsNormalize("options"))),n;return i=t.mobile.widget.prototype._getCreateOptions.apply(this,arguments),n=t.extend(!0,{},this.options.uiCSS),this.theme=this.options.theme!==undefined?this.options.theme:this.element.jqmData("theme"),this.theme&&t.gcui.addThemeToMobileCSS(this.theme,n),t.extend(i,{uiCSS:n},u)},t.widget("gcui.widget",t.mobile.widget,i.prototype);t(document).on("pageshow",function(n,i){if(n.target==null)return;var r=t(n.target);r.gcuiTriggerVisibility&&r.gcuiTriggerVisibility()})}else i.prototype.options=t.extend(!0,{},i.prototype.options,i.prototype._baseWidget().prototype.options),t.widget("gcui.widget",i.prototype)})(gcui||(gcui={})),function(n){function t(n){return isNaN(n)?0:n}function s(){if($.ui&&$.ui.keyCode)return $.ui.keyCode;if($.mobile&&$.mobile.keyCode)return $.mobile.keyCode;throw"keyCode object is not found";}var f,r,i,e;$.fn.extend({getTextSelection:function(){var i,f,u=this[0],t=this.val(),l=GcSpread.Sheets.util.browser,n,h,r,e,c,a,s,o;if(arguments.length===0){if(l.msie&&parseInt(l.version)<9)try{c=document.selection,u.tagName.toLowerCase()!="textarea"?(n=c.createRange().duplicate(),n.moveEnd("character",t.length),r=n.text===""?t.length:t.lastIndexOf(n.text),n=c.createRange().duplicate(),n.moveStart("character",-t.length),e=n.text.length):(n=c.createRange(),h=n.duplicate(),h.moveToElementText(u),h.setEndPoint("EndToEnd",n),r=h.text.length-n.text.length,e=r+n.text.length)}catch(e){}else r=u.selectionStart,e=u.selectionEnd;return a=t.substring(r,e),{start:r,end:e,text:a,replace:function(n){return t.substring(0,r)+n+t.substring(e,t.length)}}}else arguments.length===1?typeof arguments[0]=="object"&&typeof arguments[0].start=="number"&&typeof arguments[0].end=="number"?(i=arguments[0].start,f=arguments[0].end):typeof arguments[0]=="string"?(i=t.indexOf(arguments[0]))>-1&&(f=i+arguments[0].length):Object.prototype.toString.call(arguments[0])==="[object RegExp]"&&(s=arguments[0].exec(t),s!=null&&(i=s.index,f=i+s[0].length)):arguments.length===2&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"&&(i=arguments[0],f=arguments[1]);typeof i=="undefined"&&(i=0,f=t.length),l.msie?(o=u.createTextRange(),o.collapse(!0),o.moveStart("character",i),o.moveEnd("character",f-i),o.select()):(u.selectionStart=i,u.selectionEnd=f)},getContent:function(n){return this.each(function(){this.innerHTML='<iframe frameborder="0" style="width: 100%; height: 100%;" src="'+n+'">"'})},addVisibilityObserver:function(n,t){return this.each(function(){var i=this;$(this).addClass("gcui-observer-visibility"),$(this).bind("gcuimovisibilitychanged"+(t?"."+t:""),function(t){n.apply(i,arguments),t.stopPropagation()})})},removeVisibilityObserver:function(n){return this.each(function(){$(this).removeClass("gcui-observer-visibility"),n?jQuery.isFunction(n)?$(this).unbind("gcuimovisibilitychanged",n):$(this).unbind("gcuimovisibilitychanged."+n):$(this).unbind("gcuimovisibilitychanged")})},triggerVisibility:function(){return this.each(function(){var n=$(this);n.hasClass("gcui-observer-visibility")&&n.trigger("gcuimovisibilitychanged"),n.find(".gcui-observer-visibility").trigger("gcuimovisibilitychanged")})},leftBorderWidth:function(){var i=parseFloat($(this).css("borderLeftWidth")),r=parseFloat($(this).css("padding-left")),n=0;return $(this).css("margin-left")!=="auto"&&(n=parseFloat($(this).css("margin-left"))),t(i)+t(r)+t(n)},rightBorderWidth:function(){var i=parseFloat($(this).css("borderRightWidth")),r=parseFloat($(this).css("padding-right")),n=0;return $(this).css("margin-right")!=="auto"&&(n=parseFloat($(this).css("margin-right"))),t(i)+t(r)+t(n)},topBorderWidth:function(){var i=parseFloat($(this).css("borderTopWidth")),r=parseFloat($(this).css("padding-top")),n=0;return $(this).css("margin-top")!=="auto"&&(n=parseFloat($(this).css("margin-top"))),t(i)+t(r)+t(n)},bottomBorderWidth:function(){var i=parseFloat($(this).css("borderBottomWidth")),r=parseFloat($(this).css("padding-bottom")),n=0;return $(this).css("margin-bottom")!=="auto"&&(n=parseFloat($(this).css("margin-bottom"))),t(i)+t(r)+t(n)},borderSize:function(){var i=$(this).leftBorderWidth()+$(this).rightBorderWidth(),t=$(this).topBorderWidth()+$(this).bottomBorderWidth();return{width:i,height:t}},setOutWidth:function(n){var t=$(this).leftBorderWidth()+$(this).rightBorderWidth();return $(this).width(n-t),this},setOutHeight:function(n){var t=$(this).topBorderWidth()+$(this).bottomBorderWidth();return $(this).height(n-t),this},getWidget:function(){var n=this.data("widgetName");return n&&n!==""?this.data(n):null},gcuishow:function(n,t,i,r,u){var f=n.animated||!1,s=n.duration||400,o=n.easing,e=n.option||{};r&&$.isFunction(r)&&r.call(this);if(f){if(t&&t[f]){t[f](n,$.extend(i,{complete:u}));return}if($.effects)if($.effects[f]||$.effects.effect&&$.effects.effect[f]){this.show(f,$.extend(e,{easing:o}),s,u);return}}this.show(),u&&$.isFunction(u)&&u.call(this)},gcuihide:function(n,t,i,r,u){var f=n.animated||!1,s=n.duration||400,o=n.easing,e=n.option||{};r&&$.isFunction(r)&&r.call(this);if(f){if(t&&t[f]){t[f](n,$.extend(i,{complete:u}));return}if($.effects)if($.effects[f]||$.effects.effect&&$.effects.effect[f]){this.stop().hide(f,$.extend(e,{easing:o}),s,u);return}}this.hide(),u&&$.isFunction(u)&&u.call(this)}}),$.save=function(n,t){if($.effects)return $.effects.save(n,t);for(var i=0;i<t.length;i++)t[i]!==null&&n.data("ec.storage."+t[i],n[0].style[t[i]])},$.restore=function(n,t){if($.effects)return $.effects.restore(n,t);for(var i=0;i<t.length;i++)t[i]!==null&&n.css(t[i],n.data("ec.storage."+t[i]))},$.createWrapper=function(n){if($.effects)return $.effects.createWrapper(n);if(n.parent().is(".ui-effects-wrapper"))return n.parent();var t={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},i=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r=document.activeElement;return n.wrap(i),(n[0]===r||$.contains(n[0],r))&&$(r).focus(),i=n.parent(),n.css("position")=="static"?(i.css({position:"relative"}),n.css({position:"relative"})):($.extend(t,{position:n.css("position"),zIndex:n.css("z-index")}),$.each(["top","left","bottom","right"],function(i,r){t[r]=n.css(r),isNaN(parseInt(t[r],10))&&(t[r]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(t).show()},$.removeWrapper=function(n){if($.effects)return $.effects.removeWrapper(n);var i,t=document.activeElement;return n.parent().is(".ui-effects-wrapper")?(i=n.parent().replaceWith(n),(n[0]===t||$.contains(n[0],t))&&$(t).focus(),i):n},$.setMode=function(n,t){return $.effects?$.effects.setMode(n,t):(t==="toggle"&&(t=n.is(":hidden")?"show":"hide"),t)},f=function(){},$.extend(f.prototype,{_UTFPunctuationsString:" ! \" # % & ' ( ) * , - . / : ; ? @ [ \\ ] { } \u00a1 \u00ab \u00ad \u00b7 \u00bb \u00bf \u037e \u0387 \u055a \u055b \u055c \u055d \u055e \u055f \u0589 \u058a \u05be \u05c0 \u05c3 \u05f3 \u05f4 \u060c \u061b \u061f \u066a \u066b \u066c \u066d \u06d4 \u0700 \u0701 \u0702 \u0703 \u0704 \u0705 \u0706 \u0707 \u0708 \u0709 \u070a \u070b \u070c \u070d \u0964 \u0965 \u0970 \u0df4 \u0e4f \u0e5a \u0e5b \u0f04 \u0f05 \u0f06 \u0f07 \u0f08 \u0f09 \u0f0a \u0f0b \u0f0c \u0f0d \u0f0e \u0f0f \u0f10 \u0f11 \u0f12 \u0f3a \u0f3b \u0f3c \u0f3d \u0f85 \u104a \u104b \u104c \u104d \u104e \u104f \u10fb \u1361 \u1362 \u1363 \u1364 \u1365 \u1366 \u1367 \u1368 \u166d \u166e \u169b \u169c \u16eb \u16ec \u16ed \u17d4 \u17d5 \u17d6 \u17d7 \u17d8 \u17d9 \u17da \u17dc \u1800 \u1801 \u1802 \u1803 \u1804 \u1805 \u1806 \u1807 \u1808 \u1809 \u180a \u2010 \u2011 \u2012 \u2013 \u2014 \u2015 \u2016 \u2017 \u2018 \u2019 \u201a \u201b \u201c \u201d \u201e \u201f \u2020 \u2021 \u2022 \u2023 \u2024 \u2025 \u2026 \u2027 \u2030 \u2031 \u2032 \u2033 \u2034 \u2035 \u2036 \u2037 \u2038 \u2039 \u203a \u203b \u203c \u203d \u203e \u2041 \u2042 \u2043 \u2045 \u2046 \u2048 \u2049 \u204a \u204b \u204c \u204d \u207d \u207e \u208d \u208e \u2329 \u232a \u3001 \u3002 \u3003 \u3008 \u3009 \u300a \u300b \u300c \u300d \u300e \u300f \u3010 \u3011 \u3014 \u3015 \u3016 \u3017 \u3018 \u3019 \u301a \u301b \u301c \u301d \u301e \u301f \u3030 \ufd3e \ufd3f \ufe30 \ufe31 \ufe32 \ufe35 \ufe36 \ufe37 \ufe38 \ufe39 \ufe3a \ufe3b \ufe3c \ufe3d \ufe3e \ufe3f \ufe40 \ufe41 \ufe42 \ufe43 \ufe44 \ufe49 \ufe4a \ufe4b \ufe4c \ufe50 \ufe51 \ufe52 \ufe54 \ufe55 \ufe56 \ufe57 \ufe58 \ufe59 \ufe5a \ufe5b \ufe5c \ufe5d \ufe5e \ufe5f \ufe60 \ufe61 \ufe63 \ufe68 \ufe6a \ufe6b \uff01 \uff02 \uff03 \uff05 \uff06 \uff07 \uff08 \uff09 \uff0a \uff0c \uff0d \uff0e \uff0f \uff1a \uff1b \uff1f \uff20 \uff3b \uff3c \uff3d \uff5b \uff5d \uff61 \uff62 \uff63 \uff64';this.UTFWhitespacesString_='\t \x0b \f \x1f   \u00a0 \u1680 \u2000 \u2001 \u2002 \u2003 \u2004 \u2005 \u2006 \u2007 \u2008 \u2009 \u200a \u200b \u2028 \u202f \u3000",isDigit:function(n){var t=n.charCodeAt(0);return t>=48&&t<58},isLetter:function(n){return!!(n+"").match(new RegExp("[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u021f\u0222-\u0233\u0250-\u02ad\u02b0-\u02b8\u02bb-\u02c1\u02d0\u02d1\u02e0-\u02e4\u02ee\u037a\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d7\u03da-\u03f3\u0400-\u0481\u048c-\u04c4\u04c7\u04c8\u04cb\u04cc\u04d0-\u04f5\u04f8\u04f9\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0640-\u064a\u0671-\u06d3\u06d5\u06e5\u06e6\u06fa-\u06fc\u0710\u0712-\u072c\u0780-\u07a5\u0905-\u0939\u093d\u0950\u0958-\u0961\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b36-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60\u0d61\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6a\u0f88-\u0f8b\u1000-\u1021\u1023-\u1027\u1029\u102a\u1050-\u1055\u10a0-\u10c5\u10d0-\u10f6\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1206\u1208-\u1246\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1286\u1288\u128a-\u128d\u1290-\u12ae\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12ce\u12d0-\u12d6\u12d8-\u12ee\u12f0-\u130e\u1310\u1312-\u1315\u1318-\u131e\u1320-\u1346\u1348-\u135a\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1780-\u17b3\u1820-\u1877\u1880-\u18a8\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u207f\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u3005\u3006\u3031-\u3035\u3041-\u3094\u309d\u309e\u30a1-\u30fa\u30fc-\u30fe\u3105-\u312c\u3131-\u318e\u31a0-\u31b7\u3400-\u4db5\u4e00-\u9fa5\ua000-\ua48c\uac00-\ud7a3\uf900-\ufa2d\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"))},isLetterOrDigit:function(n){return this.isLetter(n)||this.isDigit(n)},isDoubleByteNumber:function(n){var t=n.charCodeAt(0);return t>=65296&&t<65306},isSymbol:function(n){var t=new RegExp("[$+<->^`|~\u00a2-\u00a9\u00ac\u00ae-\u00b1\u00b4\u00b6\u00b8\u00d7\u00f7\u02b9\u02ba\u02c2-\u02cf\u02d2-\u02df\u02e5-\u02ed\u0374\u0375\u0384\u0385\u0482\u06e9\u06fd\u06fe\u09f2\u09f3\u09fa\u0b70\u0e3f\u0f01-\u0f03\u0f13-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fcf\u17db\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u2044\u207a-\u207c\u208a-\u208c\u20a0-\u20af\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u2132\u213a\u2190-\u21f3\u2200-\u22f1\u2300-\u2328\u232b-\u237b\u237d-\u239a\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u2595\u25a0-\u25f7\u2600-\u2613\u2619-\u2671\u2701-\u2704\u2706-\u2709\u270c-\u2727\u2729-\u274b\u274d\u274f-\u2752\u2756\u2758-\u275e\u2761-\u2767\u2794\u2798-\u27af\u27b1-\u27be\u2800-\u28ff\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u309b\u309c\u3190\u3191\u3196-\u319f\u3200-\u321c\u322a-\u3243\u3260-\u327b\u327f\u328a-\u32b0\u32c0-\u32cb\u32d0-\u32fe\u3300-\u3376\u337b-\u33dd\u33e0-\u33fe\ua490-\ua4a1\ua4a4-\ua4b3\ua4b5-\ua4c0\ua4c2-\ua4c4\ua4c6\ufb29\ufe62\ufe64-\ufe66\ufe69\uff04\uff0b\uff1c-\uff1e\uff3e\uff40\uff5c\uff5e\uffe0-\uffe6\uffe8-\uffee\ufffc\ufffd]");return t.test(n+"")},isPunctuation:function(n){return this._UTFPunctuationsString.indexOf(n)>=0},isPrintableChar:function(n){return!this.isLetterOrDigit(n)&&!this.isPunctuation(n)&&!this.isSymbol(n)&&!this.isDoubleByteNumber(n)?n===" ":!0},isAscii:function(n){return n>="!"&&n<="~"},isAsciiLetter:function(n){return n>="A"&&n<="Z"||n>="a"&&n<="z"},isUpper:function(n){return n.toUpperCase()===n},isLower:function(n){return n.toLowerCase()===n},isAlphanumeric:function(n){return this.isLetter(n)?!0:this.isDigit(n)},isAciiAlphanumeric:function(n){return(n<"0"||n>"9")&&(n<"A"||n>"Z")?n>="a"?n<="z":!1:!0},setChar:function(n,t,i){return i>=n.length||i<0?n:""||n.substr(0,i)+t+n.substr(i+1)}}),$.fn.zIndex||($.fn.zIndex=function(n){if(n!==undefined)return this.css("zIndex",n);if(this.length){var t=$(this[0]),r,i;while(t.length&&t[0]!==document){r=t.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(t.css("zIndex"),10);if(!isNaN(i)&&i!==0)return i}t=t.parent()}}return 0});var o=["\n","\r",'"',"@","+","'","<",">","%","{","}"],u=["!ESC!NN!","!ESC!RR!","!ESC!01!","!ESC!02!","!ESC!03!","!ESC!04!","!ESC!05!","!ESC!06!","!ESC!07!","!ESC!08!","!ESC!09!"],h=["(\n)","(\r)",'(")',"(@)","(\\+)","(')","(\\<)","(\\>)","(%)","(\\{)","(\\})"];$.gcuiutil||$.extend({gcuiutil:{charValidator:new f,encodeString:function(n){for(var i,t=0;t<o.length;t++)i=new RegExp(h[t],"g"),n=n.replace(i,u[t]);return n},decodeString:function(n){var t,i;if(n==="")return;for(t=0;t<u.length;t++)i=new RegExp(u[t],"g"),n=n.replace(i,o[t]);return n}}}),jQuery.uaMatch||(jQuery.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}}),jQuery.browser||(r=jQuery.uaMatch(navigator.userAgent),i={version:"0",msie:!1,opera:!1,safari:!1,mozilla:!1,webkit:!1,chrome:!1},r.browser&&(i[r.browser]=!0,i.version=r.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),jQuery.browser=i),$.ui&&$.ui.position&&$.ui.position.flipfit&&($.ui.position.flip.top=function(n,t){var f=t.within,v=f.offset.top+f.scrollTop,h=f.height,e=f.isWindow?f.scrollTop:f.offset.top,a=n.top-t.collisionPosition.marginTop,l=a-e,c=a+t.collisionHeight-h-e,y=t.my[1]==="top",u=y?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,r=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,i=-2*t.offset[1],o,s;l<0?(s=n.top+u+r+i+t.collisionHeight-h-v,n.top+u+r+i>l&&(s<0||s<Math.abs(l))&&(n.top+=u+r+i)):c>0&&(o=n.top-t.collisionPosition.marginTop+u+r+i-e,n.top+u+r+i+t.collisionHeight-h-e<c&&(o>0||Math.abs(o)<c)&&(n.top+=u+r+i))}),e=$.fn.position,$.fn.position=function(n){if(n&&$.isPlainObject(n)&&n.offset){var t=(n.my||"").split(" "),r=/left|center|right/,u=/top|center|bottom/,i=(n.offset||"").split(" ");t.length===1&&(r.test(t[0])?t.concat(["center"]):u.test(t[0])?["center"].concat(t):["center","center"]),i.length===1&&i.concat(i[0]),$.each(t,function(n,r){t[n]=/\+|-/.test(i[n])?t[n]+i[n]:t[n]+"+"+i[n]}),n.my=t.join(" ")}return e.apply(this,arguments)},n.getKeyCodeEnum=s}(gcui||(gcui={})),function(n){var i,t;n.expando=".gcui",i=function(){function n(n){this.message=n,this.stack="gcui"+(new Error).stack,this.name="GCUIError"}return n}(),n.GCUIError=i,t=i,t.prototype=new Error,t.prototype.constructor=t}(gcui||(gcui={})),function(n){(function(t){var i=function(){function t(n){this.object=n}return t.getFrom=function(i,r){typeof r=="undefined"&&(r=!0);var f=n.expando,u;if(Object(i)!==i)return null;u=i[f],u&&u.object!==i&&(u=null);if(r&&!(u instanceof t&&Object.prototype.hasOwnProperty.call(i,f))){u=new t(i);try{Object.defineProperty(i,f,{value:u,configurable:!1,enumerable:!1,writable:!1})}catch(e){i[f]=u}}return u},t}();t.Expando=i})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(n){(function(n){function t(n){return function(){var t=function(){return n.prototype._call.apply(t,arguments)};return $.extend(t,n.prototype),n.apply(t,arguments),t}}n.funcClass=t})(n.util||(n.util={}));var t=n.util})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(n){function s(n){return e.isFunction(n.subscribe)}function a(n){return typeof n=="undefined"&&(n=null),new u(n)}function l(n){return typeof n=="undefined"&&(n=null),new u(n,!0)}function c(n){return e.isFunction(n)&&s(n)}var e=jQuery,o=function(){function n(n,t){this.handler=n,this.context=t}return n.prototype.trigger=function(n){return this.handler.apply(this.context,n)},n}(),f,t,r,h,i,u;n.SubscriberEntry=o,f=function(){function t(n){this.defaultContext=n,this._entries=[]}return t.prototype.subscribe=function(t,i){typeof i=="undefined"&&(i=this.defaultContext);var u=this,r=new o(t,i);return this._entries.push(r),{dispose:function(){return n.util.remove(u._entries,r)}}},t.prototype.trigger=function(){for(var i=[],t=0;t<arguments.length-0;t++)i[t]=arguments[t+0];n.util.each(this._entries,function(n,t){return t.trigger(i)})},t.makeSubscribable=function(n){var i=new t(n);return n.subscribe=e.proxy(i.subscribe,i),i},t}(),n.Subscribable=f,n.isSubscriptable=s,t=function(){function n(){}return n.prototype.subscribe=function(n,t){return this._subscribable=this._subscribable||new f(this),this._subscribable.subscribe(n,t)},n.prototype._trigger=function(){for(var t=[],n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];this._subscribable&&this._subscribable.trigger.apply(this._subscribable,arguments)},n}(),n.BaseObservable=t,r=function(n){function t(t){n.call(this),this.mutable=t}return __extends(t,n),t.prototype._call=function(){return this.mutable.value},t}(t),n._ReadOnlyObservable=r,h=n.util.funcClass(r),i=function(n){function t(t,i){typeof i=="undefined"&&(i=!1),n.call(this),this.value=t,this.checkNewValue=i}return __extends(t,n),t.prototype._call=function(n){return arguments.length>0&&(!this.checkNewValue||n!==this.value)&&(this.value=n,this._trigger(n),this._readOnly&&this._readOnly._trigger(n)),this.value},t.prototype.read=function(){return this._readOnly=this._readOnly||new h(this)},t}(t),n._MutableObservable=i,u=n.util.funcClass(i),n.observable=a,n.observableWithNewValueCheck=l,n.isObservable=c})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(t){(function(i){function p(n,t){return typeof t=="undefined"&&(t=!1),r.isArray(n)?n=n.slice(0):r.isPlainObject(n)&&(n=r.extend(!!t,{},n)),n}function e(n){return typeof n=="string"||n instanceof String}function tt(n){return typeof n=="number"}function c(t){return t===n.expando||t===r.expando}function f(n,t){var i=this;r.each(n,function(n,r){if(!c(n))return t.call(i,n,r)})}function nt(t,i){var u=r.map(t,i);return delete u[n.expando],u}function o(n){var t;return t=n&&r.isFunction(n.toString)&&n.toString!==Object.prototype.toString?n.toString():JSON.stringify(n),t!=null&&t.length>2&&t[0]==='"'&&t[t.length-1]==='"'&&(t=t.substr(1,t.length-2)),t}function g(n){for(var i=[],t=0;t<arguments.length-1;t++)i[t]=arguments[t+1];return n.replace(/{(\d+)}/g,function(n,t){return o(i[parseInt(t,10)])})}function d(n,t){var i=!0;return f(n,function(n,r){return i=r,t&&(i=t.call(i,i,n)),i?void 0:!1}),i}function b(n,t){var i=!1;return f(n,function(n,r){return i=r,t&&(i=t.call(i,i,n)),i?!1:void 0}),i}function s(n,t){var u,f,i;if(n==null)return t==null?0:-1;else if(t==null)return 1;if(r.isArray(n)&&r.isArray(t)){for(f=Math.min(n.length,t.length),u=0;u<f;u++){i=s(n[u],t[u]);if(i!==0)return i}return n.length-t.length}else if(e(n)&&e(t))return n=n.toLowerCase(),t=t.toLowerCase(),n<t?-1:n>t?1:0;return i=n-t,isNaN(i)?0:i}function ut(n,t){return r.inArray(t,n)>=0}function rt(n,t){for(var r=0,i=0;i<n.length;)n[i]!==t?i++:(n.splice(i,1),r++);return r}function it(n,t){return n==-1?-1:n==0?0:t?Math.ceil(n/t):1}function k(n,t){function r(){return n.apply(t,u)}for(var u=[],i=0;i<arguments.length-2;i++)u[i]=arguments[i+2];if(typeof setTimeout==typeof undefined)return r();else setTimeout(r,10)}function v(n){if(typeof console=="undefined")return;console.error?console.error(n):console.log&&console.log(n)}function a(n,i){for(var f=0,r=n,e,u;;){u=i.indexOf(".",f),u<0?e=f>0?i.substring(f):i:(e=i.substring(f,u),f=u+1),r=r[e],t.isObservable(r)&&(r=r());if(u<0)break}return r}function l(n,i,r){for(var f=0,o,e,u;;){e=i.indexOf(".",f),e<0?o=f>0?i.substring(f):i:(o=i.substring(f,e),f=e+1),u=n[o];if(e<0){t.isObservable(u)?u(r):n[o]=r;break}else t.isObservable(u)&&(u=u()),n=u}}function y(n){return typeof n=="object"&&!r.isArray(n)&&!r.isPlainObject(n)&&n.constructor!==Object.prototype.constructor}function w(n){t.util.each(n,function(n,i){if(!i||typeof i!="object")return;t.util.each(i,function(n,r){var u;if(!t.util.isString(r))return;u=/\/Date\((-?\d+)\)\//.exec(r);if(!u)return;i[n]=new Date(parseInt(u[1],10))})})}var r=jQuery,u,h;i.clone=p,i.isString=e,i.isNumeric=tt,i.isInternalProperty=c,i.each=f,i.map=nt,i.toStr=o,i.format=g,i.every=d,i.some=b,i.compare=s,i.contains=ut,i.remove=rt,i.pageCount=it,i.executeDelayed=k,i.logError=v,i.getProperty=a,i.setProperty=l,i.isClassInstance=y,i.convertDateProperties=w,u=function(){function n(n){this.key=n}return n}(),i.HashMapEntry=u,h=function(){function n(){this.hash={}}return n.prototype.getEntry=function(n,t){var f,i,e,r;typeof t=="undefined"&&(t=!1);if(n===null)return!this.nullEntry&&t&&(this.nullEntry=new u(n)),this.nullEntry;f=String(n),i=this.hash[f];if(i==null){if(!t)return null;i=[],this.hash[f]=i}for(r=0;r<i.length;r++)if(i[r].key===n)return i[r];return t&&(e=new u(n),i.push(e)),null},n.prototype.containsKey=function(n){return!!this.getEntry(n)},n.prototype.get=function(n,t){typeof t=="undefined"&&(t=null);var i=this.getEntry(n);return i?i.value:t},n.prototype.put=function(n,t){this.getEntry(n,!0).value=t},n}(),i.HashMap=h})(t.util||(t.util={}));var i=t.util})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(t){t.errors={},t.errors._register=function(i){t.util.each(i,function(i,r){function u(){for(var f=[],u,i=0;i<arguments.length-0;i++)f[i]=arguments[i+0];return $.isFunction(r)?r=r.apply(this,arguments):arguments.length>0&&(f.unshift(r),r=t.util.format.apply(this,f)),r=$.trim(r),u=r[r.length-1],u!=="."&&u!=="!"&&u!=="?"&&(r+="."),new n.GCUIError(r)}t.errors[i]=function(){throw u.apply(this,arguments);},t.errors[i].create=u})},t.errors._register({indexOutOfBounds:"Index is outside the bounds of the array.",notImplemented:"The operation is not implemented",unsupprtedOperation:"Unsupported operation",unsupportedFilterOperator:"Unsupported filter operator: {0}",unsupportedDataSource:"Unsupported data source",argument:function(n){var t="Unexpected argument value.";return n&&(t+="\nParameter name: "+n),t},argumentNull:"Argument '{0}' is null/undefined",noParser:"There is no parser for type '{0}'",noUrl:"Url is not specified",cantConvert:"Value can't be converted to type '{0}': '{1}'",noGlobalize:"Globalize is not defined. Make sure you include globalize.js",itemNotInView:"Item {0} is not in the data view",unsupportedFilterFormat:"The filter format is not supported",multiPropertyKeysNotSupported:"Entities with multiple properties in the primary key are not supported. Entity type: {0}",keyPropertyNotFound:"Key property not found in {0} entity type"})})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(n){(function(t){function f(i,r){var u,f;return typeof r=="undefined"&&(r=!1),i=i.toLowerCase(),u=t.ops[i],u||(f=t.opMap[i],f&&(u=t.ops[f])),!u&&r&&n.errors.unsupportedOperator(i),u}function r(r){var e,u;if(!i.isPlainObject(r))return{operator:"==",op:t.ops.equals,value:r};u=r.operator||t.ops.equals;if(n.util.isString(r.operator)){if(r.operator.toLowerCase()==="nofilter")return null;u=f(r.operator,!0)}else i.isFunction(u.apply)||n.errors.unsupportedOperator(u);return{operator:r.operator,op:u,value:r.value}}function u(t){var u={original:t,func:null,normalized:null},f;return i.isFunction(t)?u.func=t:i.isArray(t)?n.errors.unsupportedFilterFormat(t):t&&(u.normalized={},f=!1,n.util.each(t,function(t,e){i.isArray(e)&&n.errors.unsupportedFilterFormat(),e=r(e),e&&(u.normalized[t]=e,f=!0)}),f?u.func=function(t){return n.util.every(u.normalized,function(i,r){var u=n.util.getProperty(t,r);return i.op.apply(u,i.value)})}:u.normalized=null),u.normalized||u.func||(u.func=function(n){return!0}),u}var i=jQuery;t.opMap={"==":"equals",doesnotcontain:"notcontain","!=":"notequal",">":"greater","<":"less",">=":"greaterorequal","<=":"lessorequal",isnotempty:"notisempty",isnotnull:"notisnull"},t.normalizeCondition=r,t.compile=u,t.ops=function(){function e(n,t,i,r,u){return f[n.toLowerCase()]={name:n,displayName:t,arity:i,applicableTo:r,apply:u}}function o(t){return t instanceof Date&&(t=t.getTime()),n.util.isString(t)&&(t=t.toLowerCase()),t}function s(n,t,i,r){e(n,t,2,i,function(n,t){return r(o(n),o(t))})}function r(n,t,i,r){e(n,t,1,i,r)}function i(n,i,r){s(n,i,t.prim,r)}function u(n,i,r){s(n,i,t.str,r)}var f={},t={str:["string"],prim:["string","number","datetime","currency","boolean"]};return i("Equals","Equals",function(n,t){return n==t}),i("NotEqual","Not equal",function(n,t){return n!=t}),i("Greater","Greater than",function(n,t){return n>t}),i("Less","Less than",function(n,t){return n<t}),i("GreaterOrEqual","Greater or equal",function(n,t){return n>=t}),i("LessOrEqual","Less or equal",function(n,t){return n<=t}),u("Contains","Contains",function(n,t){return n==t||n&&n.indexOf&&n.indexOf(t)>=0}),u("NotContain","Does not contain",function(n,t){return n!=t&&(!n||!n.indexOf||n.indexOf(t)<0)}),u("BeginsWith","Begins with",function(n,t){return n==t||n&&n.indexOf&&n.indexOf(t)==0}),u("EndsWith","Ends with",function(t,i){var r;return!n.util.isString(t)||!n.util.isString(i)?!1:(r=t.lastIndexOf(i),r>=0&&t.length-r===i.length)}),r("IsEmpty","Is empty",t.str,function(n){return!n&&n!==0&&n!==!1}),r("NotIsEmpty","Is not empty",t.str,function(n){return!!n||n===0||n===!1}),r("IsNull","Is null",t.prim,function(n){return n==null}),r("NotIsNull","Is not null",t.prim,function(n){return n!=null}),f}()})(n.filtering||(n.filtering={}));var t=n.filtering})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(n){(function(t){function r(t){var i=[];return t=n.util.isString(t)?t.split(/,\s*/):$.isArray(t)?t.slice(0):[t],t=$.isArray(t)?t.slice(0):[t],n.util.each(t,function(t,r){var f=!0,e,u;if(r==null)return;if(!n.util.isString(r)){r.property!=null&&i.push(r);return}r[0]==="-"?(f=!1,r=r.substr(1)):(u=/\s(asc|desc)\s*$/.exec(r),u&&(r=r.substr(0,u.index),f=!(u[1]==="desc"))),i.push({property:r,asc:f})}),i}function i(t,i){typeof i=="undefined"&&(i=n.util.compare);var u=r(t),f={original:t,propertyCompareTo:i,compare:null,normalized:u};return u!=null&&(f.compare=function(t,r){for(var o=0,f,e,o=0;o<u.length;o++){e=u[o],f=i(n.util.getProperty(t,e.property),n.util.getProperty(r,e.property));if(f!==0)return e.asc||(f=-f),f}return 0}),f}t.compile=i})(n.sorting||(n.sorting={}));var t=n.sorting})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(n){function r(i){return t.isFunction(i)||n.errors.argument("factory"),u.push(i),{dispose:function(){n.util.remove(u,i)}}}function f(t){if(i(t))return t;var r=n.util.some(u,function(n){return n(t)});return r||n.errors.unsupportedDataSource()}function i(n){return n&&t.isFunction(n.count)&&t.isFunction(n.item)&&t.isFunction(n.getProperty)}var t=jQuery,u=[];n.registerDataViewFactory=r,r(function(n){return i(n)&&n}),r(function(i){return t.isArray(i)&&new n.ArrayDataView(i)}),n.asDataView=f,n.isDataView=i})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(n){var t=jQuery,i=function(){function i(i){function u(n){return function(){if(r)return;r=!0;try{n.apply(this,arguments)}finally{r=!1}}}this.array=i,this.currentItem=n.observableWithNewValueCheck(null),this.currentPosition=n.observableWithNewValueCheck(-1);var r=!1;this.currentItem.subscribe(u(function(n){this.currentPosition(n==null?-1:t.inArray(n,this.array))}),this),this.currentPosition.subscribe(u(function(t){n.util.isNumeric(t)||n.errors.argument("value"),(t<-1||t>=this.array.length)&&n.errors.indexOutOfBounds(),this.currentItem(t<0?null:this.array[t])}),this)}return i.prototype.update=function(){var r=this.currentItem(),n=this.currentPosition(),i=t.inArray(r,this.array);i<0&&r==null&&this._recentlyRemovedItem!=null&&(i=t.inArray(this._recentlyRemovedItem,this.array)),i<0?n>=0&&n<this.array.length?this.currentItem(this.array[n]):n==this.array.length&&this.array.length>0?(n=this.array.length-1,this.currentPosition(n),this.currentItem(this.array[n])):(this.currentPosition(-1),this.currentItem(null)):(r&&(this._recentlyRemovedItem=r),this.currentPosition(i))},i.prototype.updateDelayed=function(){n.util.executeDelayed(this.update,this)},i}();n.CurrencyManager=i})(n.data||(n.data={}));var t=n.data}(gcui||(gcui={})),function(n){(function(n){var t=jQuery,u=function(){function t(t){function i(){this.pageSize()>0&&this.pageIndex()>=0?(this._skip=this.pageSize()*this.pageIndex(),this._take=this.pageSize()):(this._skip=0,this._take=-1),t(!0)}this.onChanged=t,this.filter=n.observable(),this.sort=n.observable(),this.pageIndex=n.observable(0),this.pageSize=n.observable(0),this._skip=0,this._take=-1,this.filter.subscribe(function(n){this.onFilterChanged(n);t()},this),this.sort.subscribe(function(){this._compiledSort=n.sorting.compile(this.sort()),t()},this),this.pageIndex.subscribe(i,this),this.pageSize.subscribe(i,this)}return t.prototype.onFilterChanged=function(t){this._compiledFilter=n.filtering.compile(t)},t.prototype.setFilter=function(n){this.filter(n)},t.prototype.update=function(n){"filter"in n&&this.setFilter(n.filter),"sort"in n&&this.sort(n.sort),"pageSize"in n&&this.pageSize(n.pageSize),"pageIndex"in n&&this.pageIndex(n.pageIndex)},t.prototype.apply=function(t,i){var u,r,f;return typeof i=="undefined"&&(i=!0),u=this,r=[],n.util.each(t,function(n,t){if(u._compiledFilter&&!u._compiledFilter.func(t))return;r.push(t)}),this._compiledSort&&r.sort(this._compiledSort.compare),f=r.length,i&&this._take>0&&(this._skip>0&&r.splice(0,Math.min(this._skip,r.length)),this._take<r.length&&(r.length=this._take)),{results:r,totalCount:f}},t.prototype.toObj=function(){return{filter:this._compiledFilter&&this._compiledFilter.normalized,sort:this._compiledSort&&this._compiledSort.normalized,pageSize:this.pageSize(),pageIndex:this.pageIndex()}},t}(),i,r;n.Shape=u,i=function(){function i(t){this.isRemote=!1,this.localPaging=!0,this.local=[],this._updatingShape=!1,this._pageCount=n.observable(1),this._totalItemCount=n.observable(0),this._isLoaded=n.observable(!1),this._isLoading=n.observable(!1),this._currentEditItem=n.observable(),this._isCurrentEditItemNew=!1,this._currentEditItemSnapshot=null,this.isLoading=this._isLoading.read(),this.isLoaded=this._isLoaded.read(),this._changed=new n.Subscribable(this),this.currentEditItem=this._currentEditItem.read(),this._initCurrency(),this._initShape(t)}return i.prototype.dispose=function(){},i.prototype.count=function(){return this.local.length},i.prototype.item=function(t){return(t<0||t>=this.local.length)&&n.errors.indexOutOfBounds(),this.local[t]},i.prototype.indexOf=function(n){return t.inArray(n,this.local)},i.prototype.getSource=function(){return this.sourceArray},i.prototype.toObservableArray=function(){return this._koArray||(this._koArray=ko.observableArray(this.local)),this._koArray},i._getProps=function(i){var r=[];return n.util.each(i,function(n,i){n=String(n);if(n.match(/^_/))return;if(t.isFunction(i)&&!i.subscribe)return;r.push({name:n})}),r},i.prototype.getProperties=function(){return this.count()?i._getProps(this.item(0)):[]},i.prototype._readProperty=function(t,i){return n.util.getProperty(t,i)},i.prototype.getProperty=function(n,t){var i=this._getItem(n);return this._readProperty(i,t)},i.prototype._writeProperty=function(t,i,r){n.util.setProperty(t,i,r)},i.prototype.setProperty=function(n,t,i){var r=this._getItem(n);return r!==this.currentEditItem()||!this._currentEditItemSnapshot||t in this._currentEditItemSnapshot||(this._currentEditItemSnapshot[t]=this.getProperty(n,t)),this._writeProperty(r,t,i),this},i.prototype.subscribe=function(n,t){return this._changed.subscribe(n,t)},i.prototype.trigger=function(){this._currencyManager.update(),this._changed.trigger(this.local),this._koArray&&this._koArray.notifySubscribers(this.local)},i.prototype.canFilter=function(){return!0},i.prototype.canSort=function(){return!0},i.prototype._updateShape=function(n){this._updatingShape=!0;try{this._shape.update(n)}finally{this._updatingShape=!1}},i.prototype.prevPage=function(){return this.pageIndex()<1?!1:(this.pageIndex(this.pageIndex()-1),!0)},i.prototype.nextPage=function(){return this.pageCount()>0&&this.pageIndex()+1>=this.pageCount()?!1:(this.pageIndex(this.pageIndex()+1),!0)},i.prototype._createShape=function(n){return new u(n)},i.prototype._initShape=function(n){var t=this,i=function(n){typeof n=="undefined"&&(n=!1),t._updatingShape||t.refresh(null,n&&t.localPaging)};this._shape=this._createShape(i),n&&this._updateShape(n),this.filter=this._shape.filter,this.sort=this._shape.sort,this.pageIndex=this._shape.pageIndex,this.pageSize=this._shape.pageSize,this.pageCount=this._pageCount.read(),this.totalItemCount=this._totalItemCount.read()},i.prototype._localRefresh=function(i){typeof i=="undefined"&&(i=this.localPaging);var u=this,r=this._shape.apply(this.sourceArray,i);return this.local.length=0,t.each(r.results,function(n,t){return u.local.push(t)}),i&&this._totalItemCount(r.totalCount),this._pageCount(n.util.pageCount(this.totalItemCount(),this.pageSize())),this.trigger(),t.Deferred().resolve().promise()},i.prototype._remoteRefresh=function(){return this._localRefresh()},i.prototype.refresh=function(n,t){var i,r;return typeof t=="undefined"&&(t=!1),i=this,this.cancelRefresh(),n&&this._updateShape(n),this._isLoading(!0),r=t?this._localRefresh():this._remoteRefresh(),r.then(function(){i._isLoaded(!0),i._isLoading(!1)})},i.prototype.cancelRefresh=function(){},i.prototype._initCurrency=function(){this._currencyManager=new n.CurrencyManager(this.local),this.currentItem=this._currencyManager.currentItem,this.currentPosition=this._currencyManager.currentPosition},i.prototype.isCurrentEditItemNew=function(){return this._isCurrentEditItemNew},i.prototype._beginEdit=function(n,t){this.commitEdit(),this._currentEditItemSnapshot={},this._isCurrentEditItemNew=t,this._currentEditItem(n)},i.prototype.canAdd=function(){return!0},i.prototype.add=function(t){t||n.errors.argument("item"),this.commitEdit(),this.local.push(t),this._beginEdit(t,!0),this.trigger()},i.prototype.canAddNew=function(){return!1},i.prototype.addNew=function(){return n.errors.unsupportedOperation()},i.prototype.editItem=function(n){typeof n=="undefined"&&(n=this.currentItem()),this.commitEdit(),n=this._getItem(n),n&&this._beginEdit(n,!1)},i.prototype.canRemove=function(){return!0},i.prototype._remove=function(t){this.local.splice(t.index,1),n.util.remove(this.sourceArray,t.item),this.trigger()},i.prototype.remove=function(n){typeof n=="undefined"&&(n=this.currentItem()),this.commitEdit();var t=this._resolve(n);return t?(this._remove(t),!0):!1},i.prototype.canCancelEdit=function(){return!0},i.prototype.cancelEdit=function(){var r=this,u,i;if(!this.currentEditItem())return;i=this.currentEditItem(),this._currentEditItem(null),this._isCurrentEditItemNew?n.util.remove(this.local,this.item):this._currentEditItemSnapshot&&t.each(this._currentEditItemSnapshot,function(n,t){return r._writeProperty(i,n,t)}),this.trigger()},i.prototype.canCommitEdit=function(){return!0},i.prototype.commitEdit=function(){var t,i;if(!this.currentEditItem())return;t=this.currentEditItem,this._currentEditItem(null),this._isCurrentEditItemNew&&this.sourceArray.push(t),i=this._shape._compiledFilter&&this._shape._compiledFilter.func,i&&!i(t)&&n.util.remove(this.local,t),this.trigger()},i.prototype._getItem=function(t){var i;return n.util.isNumeric(t)?this.item(t):t},i.prototype._resolve=function(t,i){typeof i=="undefined"&&(i=!1);var r;return n.util.isNumeric(t)?{index:t,item:this.item(t)}:(r=this.indexOf(t),r<0?(i&&n.errors.itemNotInView(t),null):{index:r,item:t})},i}(),n.ArrayDataViewBase=i,r=function(n){function t(t,i){n.call(this,i),this.sourceArray=t,this.refresh()}return __extends(t,n),t}(i),n.ArrayDataView=r})(n.data||(n.data={}))}(gcui||(gcui={})),function(n){(function(n){var i=jQuery,t=function(n){function t(t){n.call(this),this.isRemote=!0,this.sourceArray=[],t&&this._construct(t)}return __extends(t,n),t.prototype._construct=function(n){this.options=n=i.extend({localPaging:!1},n),this.localPaging=n.localPaging,this._updateShape(n)},t}(n.ArrayDataViewBase);n.RemoteDataView=t})(n.data||(n.data={}))}(gcui||(gcui={})),function(n){(function(n){var t=jQuery,r=function(){function n(n){this._originalReader=n}return n.prototype.read=function(n){n.items=null,this._originalReader&&t.isFunction(this._originalReader.read)&&this._originalReader.read(n),t.isArray(n.items)||(n.items=t.isArray(n.data)?n.data:n.data&&t.isArray(n.data.rows)?n.data.rows:[]);if(n.dynamic)if(!n.data||isNaN(n.data.totalRows))throw"totalRows value is missing";},n}(),i=function(i){function u(n){var u=this,f;i.call(this),this.dataSource=n,this.isRemote=!0,this.localPaging=!0,this._origLoaded=n.loaded,this._origReader=n.reader,n.loaded=function(n,i){u._loaded(),t.isFunction(u._origLoaded)&&u._origLoaded.apply(u,arguments)},n.reader=new r(n.reader),f=n.items&&n.items.length>0,t.isArray(n.data)&&!f&&n.read(),n.items&&this._loaded()}return __extends(u,i),u.prototype.dispose=function(){this.dataSource.loaded=this._origLoaded,this.dataSource.reader=this._origReader,i.prototype.dispose.call(this)},u.prototype.getProperties=function(){return this.sourceArray&&this.sourceArray.length?n.ArrayDataViewBase._getProps(this.sourceArray[0]):[]},u.prototype._loaded=function(){this.sourceArray=this.dataSource.items,this.dataSource.data&&n.util.isNumeric(this.dataSource.data.totalRows)&&this._totalItemCount(this.dataSource.data.totalRows);var t=i.prototype._localRefresh.call(this,!this.dataSource.dynamic);this._currentDeferred&&t.then(this._currentDeferred.resolve)},u.prototype._remoteRefresh=function(){this._currentDeferred&&this._currentDeferred.state()==="pending"&&this._currentDeferred.fail(),this._currentDeferred=t.Deferred();var n={},i=!1;return this.dataSource.dynamic&&(i=!0,n.data=this._prepareRequest(),this.dataSource.proxy&&(this._origDataOption||(this._origDataOption=t.extend({},this.dataSource.proxy.options.data)),this.dataSource.proxy.options.data=t.extend({},this._origDataOption,n.data))),this.dataSource.load(n,i),this._currentDeferred},u.prototype._prepareRequest=function(){return{filtering:this._prepareFilterRequest(),paging:this._preparePageRequest(),sorting:this._prepareSortRequest()}},u.prototype._prepareFilterRequest=function(){var n=[];return this._shape._compiledFilter&&this._shape._compiledFilter.normalized&&t.each(this._shape._compiledFilter.normalized,function(t,i){n.push({dataKey:t,filterOperator:i.op.Name,filterValue:i.value})}),n},u.prototype._preparePageRequest=function(){return{pageIndex:this._shape.pageIndex(),pageSize:this._shape.pageSize()}},u.prototype._prepareSortRequest=function(){return!this._shape._compiledSort||!this._shape._compiledSort.normalized||this._shape._compiledSort.normalized.length==0?[]:t.map(this._shape._compiledSort.normalized,function(n){return{dataKey:n.property,sortDirection:n.asc?"ascending":"descending"}})},u}(n.ArrayDataViewBase);n.registerDataViewFactory(function(n){if(typeof gcuidatasource=="function"&&n instanceof gcuidatasource)return new i(n)})})(n.data||(n.data={}))}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._create=function(){window.applyTouchUtilEvents&&(i=window.applyTouchUtilEvents(i)),this.element.addClass(this.options.uiCSS.widget+" gcui-pager "+this.options.uiCSS.helperClearFix),this.options.disabled&&this.disable(),this._refresh()},t.prototype._destroy=function(){this.element.removeClass(this.options.uiCSS.widget+" gcui-pager "+this.options.uiCSS.helperClearFix),this.$ul.remove()},t.prototype._setOption=function(n,t){this._super(n,t),this._refresh()},t.prototype._refresh=function(){this._validate(),this.$ul&&this.$ul.remove(),this.element.append(this.$ul=i('<ul class="ui-list '+this.options.uiCSS.cornerAll+" "+this.options.uiCSS.content+" "+this.options.uiCSS.helperClearFix+'" role="tablist"></ul>'));switch((this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(!1);break;case"nextpreviousfirstlast":this._createNextPrev(!0);break;case"numeric":this._createNumeric(!1);break;case"numericfirstlast":this._createNumeric(!0);break}},t.prototype._validate=function(){var n=this.options;(isNaN(n.pageCount)||n.pageCount<1)&&(n.pageCount=1),isNaN(n.pageIndex)||n.pageIndex<0?n.pageIndex=0:n.pageIndex<n.pageCount||(n.pageIndex=n.pageCount-1),(isNaN(n.pageButtonCount)||n.pageButtonCount<1)&&(n.pageButtonCount=1)},t.prototype._createNextPrev=function(n){var t=this.options;n&&t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.previousPageText,t.pageIndex,t.previousPageClass)),t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.nextPageText,t.pageIndex+2,t.nextPageClass)),n&&t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass))},t.prototype._createNumeric=function(n){var t=this.options,f=t.pageIndex+1,r=1,i=Math.min(t.pageCount,t.pageButtonCount),u;for(f>i&&(r=Math.floor(t.pageIndex/t.pageButtonCount)*t.pageButtonCount+1,i=r+t.pageButtonCount-1,i=Math.min(i,t.pageCount),i-r+1<t.pageButtonCount&&(r=Math.max(1,i-t.pageButtonCount+1))),r!==1&&(n&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),this.$ul.append(this._createPagerItem(!1,"...",r-1,""))),u=r;u<=i;u++)this.$ul.append(this._createPagerItem(u===f,u.toString(),u,""));t.pageCount>i&&(this.$ul.append(this._createPagerItem(!1,"...",i+1,"")),n&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass)))},t.prototype._createPagerItem=function(n,t,r,u){var o,f=this.options.uiCSS,s=this,e=i("<li />").addClass("gcui-pager-button "+f.cornerAll).attr({role:"tab","aria-label":t,title:t});return n?e.addClass(f.stateActive).attr("aria-selected","true"):e.addClass(f.stateDefault).hover(function(){s.options.disabled||i(this).addClass(f.stateHover)},function(){s.options.disabled||i(this).removeClass(f.stateHover)}).bind("click."+this.widgetName,{newPageIndex:r-1},i.proxy(this._onClick,this)),o=n?i("<span />"):u?i("<span />").addClass(f.icon+" "+u):i("<a/>").attr("href","#"),o.text(t),e.append(o),e},t.prototype._onClick=function(n){var t,i;return this.options.disabled?!1:(t={newPageIndex:n.data.newPageIndex,handled:!1},this._trigger("pageIndexChanging",null,t)!==!1&&this.options.pageIndex!==t.newPageIndex&&(this.options.pageIndex=t.newPageIndex,t.handled||this._refresh(),i={newPageIndex:t.newPageIndex},this._trigger("pageIndexChanged",null,i)),!1)},t}(n.gcuiWidget),u;t.gcuipager=r,r.prototype.widgetEventPrefix="gcuipager",u=function(){function n(){this.mobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-c"},this.firstPageClass=i.gcui.widget.prototype.options.uiCSS.iconSeekFirst,this.firstPageText="First",this.lastPageClass=i.gcui.widget.prototype.options.uiCSS.iconSeekEnd,this.lastPageText="Last",this.mode="numeric",this.nextPageClass=i.gcui.widget.prototype.options.uiCSS.iconSeekNext,this.nextPageText="Next",this.pageButtonCount=10,this.previousPageClass=i.gcui.widget.prototype.options.uiCSS.iconSeekPrev,this.previousPageText="Previous",this.pageCount=1,this.pageIndex=0,this.pageIndexChanging=null,this.pageIndexChanged=null}return n}(),r.prototype.options=i.extend(!0,{},n.gcuiWidget.prototype.options,new u),i.gcui.registerWidget("gcuipager",r.prototype)})(n.pager||(n.pager={}))}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,c=0,l=0,e=i.effects?i.effects:i,r=e.save,u=e.restore,h=e.createWrapper,o=e.removeWrapper,a=function(){return++c},v=function(){return++l},f=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._setOption=function(t,i){n.prototype._setOption.call(this,t,i);switch(t){case"selected":if(this.options.collapsible&&i===this.options.selected)return;this.select(i);break;case"alignment":this._innerDestroy(!0),this._tabify(!0);break;default:this._tabify(!1);break}},t.prototype._create=function(){var t=this,i=this.options;this.element.is(":hidden")&&this.element.addVisibilityObserver&&this.element.addVisibilityObserver(function(){t.element.removeVisibilityObserver&&t.element.removeVisibilityObserver();var i=t.element.data("gcuitabs"),n=t.element.data("gcuiUITabs");t._innerDestroy(!0),t.element.data("gcuitabs",i),t.element.data("gcuiUITabs",n),t._tabify(!0)},"gcuitabs"),this._tabify(!0),(i.disabledstate||i.disabled)&&this.disable(),n.prototype._create.call(this)},t.prototype.destroy=function(){this._innerDestroy(),n.prototype.destroy.call(this)},t.prototype._tabify=function(n){this.list=this.element.children("ol,ul").eq(0),this.lis=i("li:has(a)",this.list),this.anchors=this.lis.map(function(){return i("a",this)[0]}),this.panels=i([]);var r=this,t=r.options,v=/^#.+/,u,a,o,f,e,l,s,h,c;i.each(r.anchors,function(n,u){var f=i(u).attr("href")||"",s=f.split("#")[0],h,o,e;s&&(s===location.toString().split("#")[0]||(h=i("base")[0])&&s===h.href)&&(f=u.hash,u.href=f),v.test(f)?r.panels=r.panels.add(r._sanitizeSelector(f),r.element):f!=="#"?(i.data(u,"href.tabs",f),i.data(u,"load.tabs",f.replace(/#.*$/,"")),o=r._tabId(u),u.href="#"+o,e=i("#"+o),e.length||(e=i(t.panelTemplate||r._defaults.panelTemplate).attr("id",o).addClass(t.uiCSS.tabsPanel).addClass(t.uiCSS.content).addClass(t.uiCSS.cornerBottom).insertAfter(r.panels[n-1]||r.list),e.data("destroy.tabs",!0)),r.panels=r.panels.add(e)):t.disabledIndexes.push(n)}),u=this._getAlignment(!0),a=this._getAlignment(!1);if(n){this.list.attr("role","tablist"),this.lis.attr("role","tab"),this.panels.attr("role","tabpanel"),this.element.addClass(t.uiCSS.tabs).addClass(t.uiCSS.gcuitabs).addClass(t.uiCSS.widget).addClass(t.uiCSS.content).addClass(t.uiCSS.cornerAll).addClass(t.uiCSS.helperClearFix).addClass(t.uiCSS.tabsPanel).addClass(t.uiCSS.tabsPanel).addClass(t.uiCSS["tabs"+u]),this.list.addClass(t.uiCSS.tabsNav).addClass(t.uiCSS.helperReset).addClass(t.uiCSS.helperClearFix).addClass(t.uiCSS.header).addClass(t.uiCSS.cornerAll),this.lis.addClass(t.uiCSS.stateDefault).addClass(t.uiCSS["corner"+u]),this.panels.addClass(t.uiCSS.tabsPanel).addClass(t.uiCSS.content).addClass(t.uiCSS["corner"+a]);switch(u){case"Bottom":this.list.appendTo(this.element);break;case"Left":o=i("<div/>").addClass(t.uiCSS.tabsContent).appendTo(this.element),this.panels.appendTo(o);break;case"Right":o=i("<div/>").addClass(t.uiCSS.tabsContent).insertBefore(this.list),this.panels.appendTo(o);break;case"Top":this.list.prependTo(this.element);break}t.sortable&&this.list.sortable&&this.list.sortable({axis:u==="Top"||u==="Bottom"?"x":"y"}),t.selected===undefined?(location.hash&&i.each(this.anchors,function(n,i){if(i.hash===location.hash)return t.selected=n,!1}),typeof t.selected!="number"&&t.cookie&&(t.selected=parseInt(r._cookie(undefined,undefined),10)),typeof t.selected!="number"&&this.lis.filter("."+t.uiCSS.tabsActive).length&&(t.selected=this.lis.index(this.lis.filter("."+t.uiCSS.tabsActive))),t.selected=t.selected||(this.lis.length?0:-1)):t.selected===null&&(t.selected=-1),t.selected=t.selected>=0&&this.anchors[t.selected]||t.selected<0?t.selected:0,t.disabledIndexes=i.unique(t.disabledIndexes.concat(i.map(this.lis.filter("."+t.uiCSS.stateDisabled),function(n,t){return r.lis.index(n)}))).sort(),i.inArray(t.selected,t.disabledIndexes)!==-1&&t.disabledIndexes.splice(i.inArray(t.selected,t.disabledIndexes),1),this.panels.addClass(t.uiCSS.tabsHide).attr("aria-hidden",!0),this.lis.removeClass(t.uiCSS.tabsActive).removeClass(t.uiCSS.stateActive).attr("aria-selected",!1),t.selected>=0&&this.anchors.length&&(this.panels.eq(t.selected).removeClass(t.uiCSS.tabsHide).attr("aria-hidden",!1),this.lis.eq(t.selected).addClass(t.uiCSS.tabsActive).addClass(t.uiCSS.stateActive).attr("aria-selected",!0),r.element.queue("tabs",function(){r.element.triggerVisibility&&i(r.panels[t.selected]).triggerVisibility(),r._trigger("show",null,r._ui(r.anchors[t.selected],r.panels[t.selected]))}),this.load(t.selected)),i(window).bind("unload",function(){r.lis&&r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})}else t.selected=this.lis.index(this.lis.filter("."+t.uiCSS.tabsActive));for(this.element[t.collapsible?"addClass":"removeClass"](t.uiCSS.tabsCollapsible),t.cookie&&this._cookie(t.selected,t.cookie),f=0;f<this.lis.length;f++)e=this.lis[f],i(e)[i.inArray(f,t.disabledIndexes)!==-1&&!i(e).hasClass(t.uiCSS.tabsActive)?"addClass":"removeClass"](t.uiCSS.stateDisabled),i(e).hasClass(t.uiCSS.stateDisabled)&&i(e).attr("aria-disabled",!0);t.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),t.disabledState||t.disabled||t.event==="mouseover"||(l=function(n,i){i.is(":not(."+t.uiCSS.stateDisabled+")")&&i.addClass(n)},s=function(n,t){t.removeClass(n)},this.lis.bind("mouseover.tabs",function(){l(t.uiCSS.stateHover,i(this))}),this.lis.bind("mouseout.tabs",function(){s(t.uiCSS.stateHover,i(this))}),this.anchors.bind("focus.tabs",function(){r.lis.filter("."+t.uiCSS.stateFocus).removeClass(t.uiCSS.stateFocus),l(t.uiCSS.stateFocus,i(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){s(t.uiCSS.stateFocus,i(this).closest("li"))})),(t.showOption===undefined||t.showOption===null)&&(t.showOption={}),this._normalizeBlindOption(t.showOption),(t.hideOption===undefined||t.hideOption===null)&&(t.hideOption={}),this._normalizeBlindOption(t.hideOption),h=(t.showOption.blind||t.showOption.fade)&&t.showOption.duration>0?function(n,f){i(n).closest("li").addClass(t.uiCSS.tabsActive).addClass(t.uiCSS.stateActive).attr("aria-selected",!0),r._showContent(),f.removeClass(t.uiCSS.tabsHide).attr("aria-hidden",!1);if(u==="Top"||u==="Bottom"){var e={duration:t.showOption.duration,height:"toggle",opacity:"toggle"};t.showOption.blind||delete e.height,t.showOption.fade||delete e.opacity,f.hide().removeClass(t.uiCSS.tabsHide).attr("aria-hidden",!1).animate(e,t.showOption.duration||"normal",function(){r._resetStyle(f),f.triggerVisibility&&f.triggerVisibility(),r._trigger("show",null,r._ui(n,f[0]))})}else r._showContent(),r._blindPanel(f,"show")}:function(n,u){i(n).closest("li").addClass(t.uiCSS.tabsActive).addClass(t.uiCSS.stateActive).attr("aria-selected",!0),r._showContent(),u.removeClass(t.uiCSS.tabsHide).attr("aria-hidden",!1),u.triggerVisibility&&u.triggerVisibility(),r._trigger("show",null,r._ui(n,u[0]))},c=(t.hideOption.blind||t.hideOption.fade)&&t.hideOption.duration>0?function(n,i){if(u==="Top"||u==="Bottom"){var f={duration:t.hideOption.duration,height:"toggle",opacity:"toggle"};t.hideOption.blind||delete f.height,t.hideOption.fade||delete f.opacity,i.animate(f,t.hideOption.duration||"normal",function(){r.lis.removeClass(t.uiCSS.tabsActive).removeClass(t.uiCSS.stateActive).attr("aria-selected",!1),i.addClass(t.uiCSS.tabsHide).attr("aria-hidden",!0),r._resetStyle(i),r.element.dequeue("tabs")})}else r._saveLayout(),r._blindPanel(i,"hide")}:function(n,i,u){r.lis.removeClass(t.uiCSS.tabsActive).removeClass(t.uiCSS.stateActive).attr("aria-selected",!1),r._hideContent(),i.addClass(t.uiCSS.tabsHide).attr("aria-hidden",!0),r.element.dequeue("tabs")},t.disabledState||t.disabled||this.anchors.bind(t.event+".tabs",function(){var f=this,e=i(this).closest("li"),n=r.panels.filter(":not(."+t.uiCSS.tabsHide+")"),u=i(r._sanitizeSelector(this.hash),r.element);if(e.hasClass(t.uiCSS.tabsActive)&&!t.collapsible||e.hasClass(t.uiCSS.stateDisabled)||e.hasClass(t.uiCSS.tabsLoading)||r._trigger("select",null,r._ui(this,u[0]))===!1)return this.blur(),!1;t.selected=r.anchors.index(this),r.abort();if(t.collapsible)if(e.hasClass(t.uiCSS.tabsActive))return t.selected=-1,t.cookie&&r._cookie(t.selected,t.cookie),r.element.queue("tabs",function(){c(f,n)}).dequeue("tabs"),this.blur(),!1;else if(!n.length)return t.cookie&&r._cookie(t.selected,t.cookie),r.element.queue("tabs",function(){h(f,u)}),r.load(r.anchors.index(this)),this.blur(),!1;t.cookie&&r._cookie(t.selected,t.cookie);if(u.length)n.length&&r.element.queue("tabs",function(){c(f,n)}),r.element.queue("tabs",function(){h(f,u)}),r.load(r.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";GcSpread.Sheets.util.browser.msie&&this.blur()}),this._initScroller(),this.anchors.bind("click.tabs",function(){return!1})},t.prototype._blindPanel=function(n,t){var u=this,f=u.options,a=n.parent("."+f.uiCSS.tabsContent),v=["position","top","left","width"],s=t==="show"?f.showOption:f.hideOption,e,l,c;if(!a.length)return;u.list.width(u.list.width()),r&&r(n,v),n.show(),t==="show"?(n.removeClass(f.uiCSS.tabsHide).attr("aria-hidden",!1),n.width(u.element.data("panel.width"))):n.width(n.width()),e=h?h(n).css({overflow:"hidden"}):i("<div></div>"),t==="show"&&e.css(i.extend({width:0},s.fade?{opacity:0}:{})),l=i.extend({width:t==="show"?u.element.data("panel.outerWidth"):0},s.fade?{opacity:t==="show"?1:0}:{}),c=u.list.outerWidth(!0),e.animate(l,{duration:s.duration,step:function(){var n=e.outerWidth(!0);u.element.width(c+n),a.width(Math.max(0,u.element.innerWidth()-c-6))},complete:function(){t==="hide"?(u.lis.removeClass(f.uiCSS.tabsActive).removeClass(f.uiCSS.stateActive).attr("aria-selected",!1),n.addClass(f.uiCSS.tabsHide).attr("aria-hidden",!0)):n.css("width",""),o&&o(n),t==="show"&&u._restoreLayout(),u._resetStyle(n),n.dequeue(),u.element.dequeue("tabs")}})},t.prototype._hideContent=function(){var t=this.options.uiCSS,n=this.element.find("."+t.tabsContent);n.length&&(this._saveLayout(),n.addClass(t.tabsHide).attr("aria-hidden",!0),this.element.width(this.list.outerWidth(!0)))},t.prototype._showContent=function(){var t=this.options.uiCSS,n=this.element.find("."+t.tabsContent);n.length&&(this._restoreLayout(),n.removeClass(t.tabsHide).attr("aria-hidden",!1))},t.prototype._saveLayout=function(){var i=this.options.uiCSS,n=["width","height","overflow"],t=this.panels.filter(":not(."+i.tabsHide+")");r&&(r(this.element,n),r(this.list,n),r(this.element.find("."+i.tabsContent),n)),this.list.width(this.list.width()),this.element.data("panel.width",t.width()),this.element.data("panel.outerWidth",t.outerWidth(!0))},t.prototype._restoreLayout=function(){var t=this.options.uiCSS,n=["width","height","overflow"];u&&(u(this.element,n),u(this.list,n),u(this.element.find("."+t.tabsContent),n))},t.prototype._resetStyle=function(n){n.css({display:""}),i.support.opacity||n[0].style.removeAttribute("filter")},t.prototype._normalizeBlindOption=function(n){n.blind===undefined&&(n.blind=!1),n.fade===undefined&&(n.fade=!1),n.duration===undefined&&(n.duration=200);if(typeof n.duration=="string")try{n.duration=parseInt(n.duration,10)}catch(t){n.duration=200}},t.prototype._initScroller=function(){var t=this,u=i.inArray(this._getAlignment(!0),["Top","Bottom"])!==-1,n=0;if(!u)return;i.each(this.lis,function(r,u){var e=i(u),s,f=0,o=0;GcSpread.Sheets.util.browser.msie&&!!t.options.scrollable&&(i.each(e.children(),function(n,t){var r=i(t);r.is("a")&&r.width(r.width()),f+=r.outerWidth(!0)}),o=f-e.width(),e.width(f)),n+=t._getLiWidth(i(u))+o}),!!this.options.scrollable&&this.element.innerWidth()<n?(this.scrollWrap===undefined&&(this.list.wrap("<div class='scrollWrap'></div>"),this.scrollWrap=this.list.parent(),r&&r(this.list,["width","height","overflow"])),this.list.width(Math.ceil(n)+2),this.scrollWrap.height(this.list.outerHeight(!0)),this.scrollWrap.superpanel({allowResize:!1,hScroller:{scrollMode:"edge"},vScroller:{scrollBarVisibility:"hidden"}})):this._removeScroller()},t.prototype._ui=function(n,t){return{tab:n,panel:t,index:this.anchors.index(n)}},t.prototype._tabId=function(n){var r=i(n),t,u;if(r.data&&r.data("tabid"))return r.data("tabid");if(n.href&&n.href.length){u=this._getURLParameters(n.href);if(u.tabId)return t=u.tabId,r.data("tabid",t),t}return t=n.title&&n.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+a(),r.data("tabid",t),t},t.prototype._getURLParameters=function(n){var u={},r,t;return n.indexOf("?")>-1&&(r=n.split("?")[1],t=r.split("&"),i.each(t,function(n,t){var i=t.split("=");i.length>1&&(u[i[0]]=i[1])})),u},t.prototype._getAlignment=function(n){var t=this.options.alignment||"top";if(n)return t.charAt(0).toUpperCase()+t.substr(1);switch(t){case"top":t="Bottom";break;case"bottom":t="Top";break;case"left":t="Right";break;case"right":t="Left";break}return t},t.prototype._sanitizeSelector=function(n){return n.replace(/:/g,"\\:")},t.prototype._innerDestroy=function(n){var t=this.options,r=i("."+t.uiCSS.tabsContent);return this.abort(),this._removeScroller(),this.element.unbind(".tabs").removeClass(t.uiCSS.gcuitabs).removeClass(t.uiCSS.tabsTop).removeClass(t.uiCSS.tabsBottom).removeClass(t.uiCSS.tabsLeft).removeClass(t.uiCSS.tabsRight).removeClass(t.uiCSS.tabs).removeClass(t.uiCSS.widget).removeClass(t.uiCSS.content).removeClass(t.uiCSS.cornerAll).removeClass(t.uiCSS.tabsCollapsible).removeClass(t.uiCSS.helperClearFix).removeData("tabs").removeAttr("role"),this.list.removeClass(t.uiCSS.tabsNav).removeClass(t.uiCSS.helperReset).removeClass(t.uiCSS.helperClearFix).removeClass(t.uiCSS.header).removeClass(t.uiCSS.cornerAll).removeAttr("role"),i.each(this.anchors,function(n,t){var r=i(t),u=r.data("href.tabs");u&&(t.href=u),r.unbind(".tabs"),i.each(["href","load","cache"],function(n,t){r.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(r,u){var f=i(u);f.data("destroy.tabs")&&!n?f.remove():f.removeClass(t.uiCSS.stateDefault).removeClass(t.uiCSS.cornerTop).removeClass(t.uiCSS.cornerBottom).removeClass(t.uiCSS.cornerLeft).removeClass(t.uiCSS.cornerRight).removeClass(t.uiCSS.tabsActive).removeClass(t.uiCSS.stateActive).removeClass(t.uiCSS.stateHover).removeClass(t.uiCSS.stateFocus).removeClass(t.uiCSS.stateDisabled).removeClass(t.uiCSS.tabsPanel).removeClass(t.uiCSS.content).removeClass(t.uiCSS.tabsHide).css({position:"",left:"",top:""}).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-selected").removeAttr("aria-disabled")}),r.length&&r.replaceWith(r.contents()),t.cookie&&this._cookie(null,t.cookie),this},t.prototype._cleanup=function(){var n=this.options.uiCSS;this.lis.filter("."+n.tabsLoading).removeClass(n.tabsLoading).find("span:data(label.tabs)").each(function(){var n=i(this);n.html(n.data("label.tabs")).removeData("label.tabs")})},t.prototype._removeScroller=function(){if(!this.scrollWrap)return;this.scrollWrap.superpanel("destroy").replaceWith(this.scrollWrap.contents()),this.scrollWrap=undefined,u&&u(this.list,["width","height","overflow"])},t.prototype._cookie=function(n,t){var r=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+v());return i.cookie.apply(null,[r].concat(i.makeArray(arguments)))},t.prototype._getLiWidth=function(n){return this._parsePxToNumber(n.css("margin-left"))+this._parsePxToNumber(n.css("border-left-width"))+this._parsePxToNumber(n.css("padding-left"))+this._parsePxToNumber(n.css("width"))+this._parsePxToNumber(n.css("margin-right"))+this._parsePxToNumber(n.css("border-right-width"))+this._parsePxToNumber(n.css("padding-right"))},t.prototype._parsePxToNumber=function(n){var t=n.indexOf("px");return t&&t!==-1?parseFloat(n.substr(0,t)):0},t.prototype.abort=function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},t.prototype.select=function(n){return typeof n=="string"?n=this.anchors.index(this.anchors.filter("[href$="+n+"]")):n===null&&(n=-1),n===-1&&this.options.collapsible&&(n=this.options.selected),this.anchors.eq(n).trigger(this.options.event+".tabs"),this},t.prototype.load=function(n){var t=this,r=t.options,u=t.anchors.eq(n)[0],e=i.data(u,"load.tabs"),f=i("span",u);t.abort();if(!1===t._trigger("beforeShow",null,t._ui(t.anchors[n],t.panels[n]))){t.element.dequeue("tabs");return}if(!e||t.element.queue("tabs").length!==0&&i.data(u,"cache.tabs")){t.element.dequeue("tabs");return}return t.lis.eq(n).addClass(r.uiCSS.tabsLoading),(r.spinner||t._defaults.spinner)&&f.data("label.tabs",f.html()).html(r.spinner||t._defaults.spinner),t.xhr=i.ajax(i.extend({},r.ajaxOptions,{url:e,success:function(f,e){i(t._sanitizeSelector(u.hash),t.element).html(f),t._cleanup(),r.cache&&i.data(u,"cache.tabs",!0),t._trigger("load",null,t._ui(t.anchors[n],t.panels[n]));try{r.ajaxOptions.success(f,e)}catch(o){}},error:function(i,f,e){t._cleanup(),t._trigger("load",null,t._ui(t.anchors[n],t.panels[n]));try{r.ajaxOptions.error(i,f,n,u)}catch(o){}}})),t.element.dequeue("tabs"),t},t.prototype.add=function(n,t,r){r===undefined&&(r=this.anchors.length);var u=this,f=u.options,o=i((f.tabTemplate||u._defaults.tabTemplate).replace(/#\{href\}/g,n).replace(/#\{label\}/g,t)),h=n.indexOf("#")?u._tabId(i("a",o)[0]):n.replace("#",""),l=u._getAlignment(!0),c=u._getAlignment(!1),e=i("#"+h),s;return o.addClass(f.uiCSS.stateDefault).addClass(f.uiCSS["corner"+l]).data("destroy.tabs",!0).attr("role","tab").attr("aria-selected",!1),e.length||(e=i(f.panelTemplate||u._defaults.panelTemplate).attr("id",h).data("destroy.tabs",!0).attr("role","tabpanel")),e.addClass(f.uiCSS.tabsPanel).addClass(f.uiCSS.content).addClass(f.uiCSS["corner"+c]+" "+f.uiCSS.tabsHide).attr("aria-hidden",!0),r<u.lis.length?(o.insertBefore(u.lis[r]),e.insertBefore(u.panels[r])):(o.appendTo(u.list),u.panels.length>0?e.insertAfter(u.panels[u.panels.length-1]):(s=u.element.find("."+f.uiCSS.tabsContent),s.length===0&&(s=u.element),e.appendTo(s))),f.disabledIndexes=i.map(f.disabledIndexes,function(n,t){return n>=r?++n:n}),u._removeScroller(),u._tabify(!1),u.anchors.length===1&&(f.selected=0,o.addClass(f.uiCSS.tabsActive).addClass(f.uiCSS.stateActive).attr("aria-selected",!0),e.removeClass(f.uiCSS.tabsHide).attr("aria-hidden",!1),u.element.queue("tabs",function(){u.element.triggerVisibility&&i(u.panels[0]).triggerVisibility(),u._trigger("show",null,u._ui(u.anchors[0],u.panels[0]))}),u.load(0)),u._trigger("add",null,u._ui(u.anchors[r],u.panels[r])),u},t.prototype.remove=function(n){var t=this.options,r=this.lis.eq(n).remove(),u=this.panels.eq(n).remove();return r.hasClass(t.uiCSS.tabsActive)&&this.anchors.length>1&&this.select(n+(n+1<this.anchors.length?1:-1)),t.disabledIndexes=i.map(i.grep(t.disabledIndexes,function(t,i){return t!==n},!1),function(t,i){return t>=n?--t:t}),this._removeScroller(),this._tabify(!1),this._trigger("remove",null,this._ui(r.find("a")[0],u[0])),this},t.prototype.enableTab=function(n){var t=this.options;if(i.inArray(n,t.disabledIndexes)!==-1)return this.lis.eq(n).removeClass(t.uiCSS.stateDisabled).removeAttr("aria-disabled"),t.disabledIndexes=i.grep(t.disabledIndexes,function(t,i){return t!==n},!1),this._trigger("enable",null,this._ui(this.anchors[n],this.panels[n])),this},t.prototype.disableTab=function(n){var t=this.options;return n!==t.selected&&(this.lis.eq(n).addClass(t.uiCSS.stateDisabled).attr("aria-disabled",!0),t.disabledIndexes.push(n),t.disabledIndexes.sort(),this._trigger("disable",null,this._ui(this.anchors[n],this.panels[n]))),this},t.prototype.url=function(n,t){return this.anchors.eq(n).removeData("cache.tabs").data("load.tabs",t),this},t.prototype.length=function(){return this.anchors.length},t}(n.gcuiWidget),s;t.gcuitabs=f,f.prototype._defaults={panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},s=function(){function n(){this.uiCSS={gcuitabs:"gcui-gcuitabs",tabsContent:"gcui-gcuitabs-content",tabsHide:"gcui-gcuitabs-hide"},this.mobileCSS={header:"ui-header ui-bar-c",content:"ui-content ui-body ui-body-c",stateDefault:"ui-btn-up-a",stateActive:"ui-btn-down-b"},this.alignment="top",this.sortable=!1,this.scrollable=!1,this.ajaxOptions=null,this.cache=!1,this.cookie=null,this.collapsible=!1,this.hideOption=null,this.showOption=null,this.disabledIndexes=[],this.event="click",this.idPrefix="ui-tabs-",this.panelTemplate="",this.spinner="",this.tabTemplate="",this.add=null,this.remove=null,this.select=null,this.beforeShow=null,this.show=null,this.load=null,this.disable=null,this.enable=null}return n}(),f.prototype.options=i.extend(!0,{},n.gcuiWidget.prototype.options,new s),i.gcui.registerWidget("gcuitabs",f.prototype)})(n.tabs||(n.tabs={}));var t=n.tabs}(gcui||(gcui={})),$.fn.extend({getBounds:function(){return $.extend({},$(this).offset(),{width:$(this).outerWidth(!0),height:$(this).outerHeight(!0)})},setBounds:function(n){return $(this).css({left:n.left,top:n.top}).width(n.width).height(n.height),this},getMaxZIndex:function(){var n=($(this).css("z-index")=="auto"?0:$(this).css("z-index"))*1;return $(this).siblings().each(function(t,i){n=Math.max(n,($(i).css("z-index")=="auto"?0:$(i).css("z-index"))*1)}),Math.max(n,$(this).zIndex())}}),function(n){(function(t){var i=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._init=function(){this.elementZIndex=this.element.zIndex();if(!!this.options.ensureOutermost){var n=$("form");n.length===0&&(n=$(document.body)),this.element.appendTo(n)}this.element.data("visible.gcuipopup",!1),this.element.css("position","absolute"),this.element.position({of:$(document.body)}),this.element.hide()},t.prototype._setOption=function(t,i){n.prototype._setOption.call(this,t,i);if(t==="autoHide"){var r=this.isVisible();this.hide(),r&&this.show()}},t.prototype.destroy=function(){var i,t,r;n.prototype.destroy.call(this),this.isVisible()&&this.hide(),i=GcSpread.Sheets.util.browser,i.msie&&parseInt(i.version)<7&&(t=this.element.data("backframe.gcuipopup"),t||t.remove()),r=this,this.element.unbind(".gcuipopup"),$.each(["visible","backframe","animating","width"],function(n,t){r.element.removeData(t+".gcuipopup")})},t.prototype.isVisible=function(){return!!this.element.data("visible.gcuipopup")&&this.element.is(":visible")},t.prototype.isAnimating=function(){return!!this.element.data("animating.gcuipopup")},t.prototype.show=function(n){var r=this;this._setPosition(n);if(this.isVisible())return;if(this._trigger("showing")===!1)return;this.options.autoHide&&window.setTimeout(function(){$(document).bind("mouseup.gcuipopup",$.proxy(r._onDocMouseUp,r))},0);var t=this.options.showEffect||"show",i=this.options.showDuration||300,u=this.options.showOptions||{};this.element.data("animating.gcuipopup",!0),$.effects&&$.effects.effect[t]?this.element.show(t,u,i,$.proxy(this._showCompleted,this)):this.element[t](t==="show"?null:i,$.proxy(this._showCompleted,this)),t&&i&&t!=="show"&&i>0||this._showCompleted()},t.prototype._showCompleted=function(){this.element.removeData("animating.gcuipopup"),this.element.data("visible.gcuipopup",!0),this._trigger("shown")},t.prototype.showAt=function(n,t){this.show({my:"left+"+n+" top+"+t,at:"left top",of:document.body})},t.prototype.hide=function(){if(!this.isVisible())return;if(this._trigger("hiding")===!1)return;$(document).unbind("mouseup.gcuipopup");var n=this.options.hideEffect||"hide",t=this.options.hideDuration||300,i=this.options.hideOptions||{};this.element.data("animating.gcuipopup",!0),$.effects&&$.effects.effect[n]?this.element.hide(n,i,t,$.proxy(this._hideCompleted,this)):this.element[n](n==="hide"?null:t,$.proxy(this._hideCompleted,this)),n&&t&&n!=="hide"&&t>0||this._hideCompleted()},t.prototype._hideCompleted=function(){var t,n;this.element.data("width.gcuipopup")!==undefined&&(this.element.width(this.element.data("width.gcuipopup")),this.element.removeData("width.gcuipopup")),this.element.unbind("move.gcuipopup"),this.element.removeData("animating.gcuipopup"),t=GcSpread.Sheets.util.browser,t.msie&&parseInt(t.version)<7&&(n=this.element.data("backframe.gcuipopup"),n&&n.hide()),this._trigger("hidden")},t.prototype._onDocMouseUp=function(n){var t=n.target?n.target:n.srcElement;this.isVisible()&&!!this.options.autoHide&&t!=this.element.get(0)&&$(t).parents().index(this.element)<0&&this.hide()},t.prototype._onMove=function(n){var t=this.element.data("backframe.gcuipopup");t&&(this.element.before(t),t.css({top:this.element.css("top"),left:this.element.css("left")}))},t.prototype._addBackgroundIFrame=function(){var t=GcSpread.Sheets.util.browser,n;t.msie&&parseInt(t.version)<7&&(n=this.element.data("backframe.gcuipopup"),n||(n=jQuery("<iframe/>").css({position:"absolute",display:"none",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}).attr({src:"javascript:'<html></html>';",scrolling:"no",frameborder:"0","tabIndex ":-1}),this.element.before(n),this.element.data("backframe.gcuipopup",n),this.element.bind("move.gcuipopup",$.proxy(this._onMove,this))),n.setBounds(this.element.getBounds()),n.css({display:"block",left:this.element.css("left"),top:this.element.css("top"),"z-index":this.element.css("z-index")-1}))},t.prototype._setZIndex=function(n){this.element.css("z-index",n);var t=this.element.data("backframe.gcuipopup");t&&t.css("z-index",this.element.css("z-index")-1)},t.prototype._setPosition=function(n){var r=this.element.is(":visible"),t,i;this.element.show(),this.element.position($.extend({},this.options.position,n?n:{})),r||this.element.hide(),n&&(t=n.of),t||(t=this.options.position.of),this._addBackgroundIFrame(),i=Math.max(1e3,this.elementZIndex),t&&(i=Math.max(i,$(t).getMaxZIndex())),this._setZIndex(i+10),this._trigger("posChanged")},t}(n.GCUIWidget),r;t.gcuipopup=i,r=function(){function n(){this.ensureOutermost=!1,this.showEffect="show",this.showOptions={},this.showDuration=300,this.hideEffect="hide",this.hideOptions={},this.hideDuration=100,this.autoHide=!1,this.position={at:"left bottom",my:"left top"},this.showing=null,this.shown=null,this.hiding=null,this.hidden=null,this.posChanged=null}return n}(),i.prototype.options=$.extend(!0,{},n.gcuiWidget.prototype.options,new r),$.gcui.registerWidget("gcuipopup",i.prototype)})(n.popup||(n.popup={}));var t=n.popup}(gcui||(gcui={})),jQuery.extend(jQuery.support,{isTouchEnabled:function(){return"ontouchstart"in window||"ontouchend"in document||typeof window.navigator.msMaxTouchPoints!="undefined"&&window.navigator.msMaxTouchPoints>0?!0:!1}}),function(n){(function(n){"use strict";function a(n){while(n&&typeof n.originalEvent!="undefined")n=n.originalEvent;return n}function pi(n,i){var f=n.type,s,h,c,r,o,v,l,u,e;n=t.Event(n),n.nativeType=n.type,n.type=i,s=n.originalEvent,h=t.event.props,f.search(/^(mouse|click)/)>-1&&(h=si);if(s)for(l=h.length,r;l;)r=h[--l],n[r]=s[r];for(f.search(/mouse(down|up)|click/)>-1&&!n.which&&(n.which=1),c=a(s),u=0,e=ti.length;u<e;u++)r=ti[u],n[r]===undefined&&(n[r]=c[r]);if(f.search(/^touch/)!==-1){f=c.touches,o=c.changedTouches,v=f&&f.length?f[0]:o&&o.length?o[0]:undefined;if(v)for(u=0,e=kt.length;u<e;u++)r=kt[u],n[r]=v[r]}return n}function y(n){var u={},r,i;while(n){r=t.data(n,o);for(i in r)r[i]&&(u[i]=u.hasVirtualBinding=!0);n=n.parentNode}return u}function bi(n,i){var r;while(n){r=t.data(n,o);if(r&&(!i||r[i]))return n;n=n.parentNode}return null}function li(){c=!1}function ei(){c=!0}function ai(){s=0,w.length=0,rt=!1,ei()}function vi(){li()}function d(){ui(),l=setTimeout(function(){l=0,ai()},t.gcuimouse.resetTimerDuration)}function ui(){l&&(clearTimeout(l),l=0)}function f(n,i,r){var u;return(r&&r[n]||!r&&bi(i.target,n))&&(u=pi(i,n),t(i.target).trigger(u)),u}function ri(n){var e=t.data(n.target,nt),r,u,i;if(!rt&&(!s||s!==e)){r="gcui"+n.type;for(u in k)k[u]===n.type&&(r=u);i=f(r,n),i&&(i.isDefaultPrevented()&&n.preventDefault(),i.isPropagationStopped()&&n.stopPropagation(),i.isImmediatePropagationStopped()&&n.stopImmediatePropagation())}}function ht(n){var c=a(n).touches,h,e,r,o;(c&&c.length===1||i)&&(h=n.target,e=y(h),e.hasVirtualBinding&&(s=oi++,t.data(h,nt,s),ui(),vi(),u=!1,r=a(n),o=r.touches?r.touches[0]:r,ii=o.pageX,fi=o.pageY,f("gcuimouseover",n,e),f("gcuimousedown",n,e)))}function st(n){if(c)return;u||f("gcuimousecancel",n,y(n.target)),u=!0,d()}function ct(n){var i;if(c)return;var r=a(n),o=r.touches?r.touches[0]:r,s=u,e=t.gcuimouse.moveDistanceThreshold;u=u||Math.abs(o.pageX-ii)>e||Math.abs(o.pageY-fi)>e,i=y(n.target),u&&!s&&f("gcuimousecancel",n,i),f("gcuimousemove",n,i),d()}function ot(n){var i,t,e,r;if(c)return;ei(),i=y(n.target),f("gcuimouseup",n,i),u||(r=f("gcuiclick",n,i),r&&r.isDefaultPrevented()&&(t=a(n),e=t.changedTouches?t.changedTouches[0]:t,w.push({touchID:s,x:e.clientX,y:e.clientY}),rt=!0)),f("gcuimouseout",n,i),u=!1,d()}function lt(n){var i=t.data(n,o),r;if(i)for(r in i)if(i[r])return!0;return!1}function pt(){}function yi(n){var i=k[n];return{setup:function(u,f){var h,s;lt(this)||t.data(this,o,{}),h=t.data(this,o),h[n]=!0,t(this).bind(i,pt),s=!1,ft&&(r[e]=(r[e]||0)+1,r[e]===1&&(s=!0,p.bind(e,ht).bind(gt,ot).bind(dt,ct).bind(ni,st))),s&&e===i||(r[n]=(r[n]||0)+1,r[n]===1&&p.bind(i,ri))},teardown:function(u,f){--r[n],r[n]||p.unbind(i,ri),ft&&(--r[e],r[e]||p.unbind(e,ht).unbind(dt,ct).unbind(gt,ot).unbind(ni,st));var h=t(this),s=t.data(this,o);s&&(s[n]=!1),h.unbind(i,pt),lt(this)||h.removeData(o)}}}function tt(n,i,r){var u=r.type;r.nativeType=r.type,r.type=i;try{t([n]).trigger(r)}finally{r.type=u}}function it(n,t){if(window.navigator.msPointerEnabled&&!n.__MSGesturePreInit){n.__MSGesturePreInit=!0;var i=new MSGesture;i.target=n,n.addEventListener("MSPointerDown",function(n){i.addPointer(n.pointerId)},!1)}}function ut(n,i){var r=ci(i,n);return t(i.target).trigger(r),r}function ci(n,i){var h=n.type,u,e,c,r,a,l,o,f,s;u=n.originalEvent,n=t.Event(n),n.nativeType=n.type,n.type=i,e=t.event.props;if(u)for(o=e.length,r;o;)r=e[--o],n[r]=n[r]||u[r];for(f=0,s=et.length;f<s;f++)r=et[f],n[r]=n[r]||u[r];return window.navigator.msPointerEnabled&&n.rotation&&(n.rotation=n.rotation*360/Math.PI),n}var t=jQuery,o="virtualMouseBindings",nt="virtualTouchID",g="gcuimouseover gcuimousedown gcuimousemove gcuimouseup gcuiclick gcuitap gcuidoubletap gcuitaphold gcuimouseout gcuimousecancel".split(" "),i=window.navigator.msPointerEnabled,k={gcuimouseover:i?"MSPointerOver":"mouseover",gcuimousedown:i?"MSPointerDown":"mousedown",gcuijmousemove:i?"MSPointerMove":"mousemove",gcuimouseup:i?"MSPointerUp":"mouseup",gcuimouseout:i?"MSPointerOut":"mouseout",gcuimousecancel:i?"mousecancel":"mousecancel",gcuiclick:i?"MSGestureTap":"click",gcuidoubletap:i?"MSGestureDoubleTap":"dblclick",gcuitaphold:i?"MSGestureHold":"gesturehold"},kt="clientX clientY pageX pageY screenX screenY".split(" "),ti="clientX clientY pageX pageY screenX screenY".split(" "),hi=t.event.mouseHooks?t.event.mouseHooks.props:[],si=t.event.props.concat(hi),r={},l=0,ii=0,fi=0,u=!1,w=[],rt=!1,c=!1,ft="addEventListener"in document,p=t(document),oi=1,s=0,e=i?"MSPointerDown":"touchstart",gt=i?"MSPointerUp":"touchend",dt=i?"MSPointerMove":"touchmove",ni=i?"scroll":"scroll",v,et;for(t.gcuimouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},v=0;v<g.length;v++)t.event.special[g[v]]=yi(g[v]);ft&&document.addEventListener("click",function(n){var e=w.length,h=n.target,s,o,i,u,r,c,f;if(e){s=n.clientX,o=n.clientY,f=t.gcuimouse.clickDistanceThreshold,i=h;while(i){for(u=0;u<e;u++){r=w[u],c=0;if(i===h&&Math.abs(r.x-s)<f&&Math.abs(r.y-o)<f||t.data(i,nt)===r.touchID){n.preventDefault(),n.stopPropagation();return}}i=i.parentNode}}},!0),t.each("touchstart touchmove touchend orientationchange throttledresize gcuitap gcuitaphold gcuiswipe gcuiswipeleft gcuiswiperight gcuiscrollstart gcuiscrollstop".split(" "),function(n,i){t.fn[i]=function(n){return n?this.bind(i,n):this.trigger(i)},t.attrFn&&(t.attrFn[i]=!0)});var h="ontouchend"in document,wi="touchmove scroll",wt=h?"touchstart":"mousedown",bt=h?"touchend":"mouseup",b=h?"touchmove":"mousemove",at=h?"gesturestart":"gesturestart",vt=h?"gesturechange":"gesturechange",yt=h?"gestureend":"gestureend";window.navigator.msPointerEnabled&&(wt="MSPointerDown",bt="MSPointerUp",b="MSPointerMove",at="MSGestureStart",vt="MSGestureChange",yt="MSGestureEnd"),t.event.special.gcuiscrollstart={enabled:!0,setup:function(){function r(t,i){n=i,tt(u,n?"gcuiscrollstart":"gciscrollstop",t)}var u=this,f=t(u),n,i;f.bind(wi,function(u){if(!t.event.special.gcuiscrollstart.enabled)return;n||r(u,!0),clearTimeout(i),i=setTimeout(function(){r(u,!1)},50)})}},t.event.special.gcuitap={setup:function(){var i=this,n=t(i);n.bind("gcuimousedown",function(r){function f(){clearTimeout(s)}function u(){f(),n.unbind("gcuiclick",e).unbind("gcuimouseup",f),t(document).unbind("gcuimousecancel",u)}function e(n){u(),o==n.target&&tt(i,"gcuitap",n)}if(r.which&&r.which!==1)return!1;var o=r.target,h=r.originalEvent,s;n.bind("gcuimouseup",f).bind("gcuiclick",e),t(document).bind("gcuimousecancel",u),s=setTimeout(function(){tt(i,"gcuitaphold",t.Event("gcuitaphold",{target:o}))},750)})}},t.event.special.gcuiswipe={scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var i=this,n=t(i);n.bind(wt,function(i){function f(n){if(!r)return;var i=n.originalEvent.touches?n.originalEvent.touches[0]:n;u={time:+new Date,coords:[i.pageX,i.pageY]},Math.abs(r.coords[0]-u.coords[0])>t.event.special.gcuiswipe.scrollSupressionThreshold&&n.preventDefault()}var e=i.originalEvent.touches?i.originalEvent.touches[0]:i,r={time:+new Date,coords:[e.pageX,e.pageY],origin:t(i.target)},u;n.bind(b,f).one(bt,function(i){n.unbind(b,f),r&&u&&u.time-r.time<t.event.special.gcuiswipe.durationThreshold&&Math.abs(r.coords[0]-u.coords[0])>t.event.special.gcuiswipe.horizontalDistanceThreshold&&Math.abs(r.coords[1]-u.coords[1])<t.event.special.gcuiswipe.verticalDistanceThreshold&&r.origin.trigger("gcuiswipe").trigger(r.coords[0]>u.coords[0]?"gcuiswipeleft":"gcuiswiperight"),r=u=undefined})})}},et="altKey ctrlKey metaKey rotation scale shiftKey target velocityX velocityY translationX translationY".split(" "),t.event.special.gcuigesturestart={setup:function(){var n=this,i=t(n);it(n,"gcuigesturestart"),i.bind(at,function(n){ut("gcuigesturestart",n)})}},t.event.special.gcuigesturechange={setup:function(){var n=this,i=t(n);it(n,"gcuigesturechange"),i.bind(vt,function(n){ut("gcuigesturechange",n)})}},t.event.special.gcuigestureend={setup:function(){var n=this,i=t(n);it(n,"gcuigestureend"),i.bind(yt,function(n){ut("gcuigestureend",n)})}},function(n,t){function h(){var n=i();n!==o&&(o=n,e.trigger("orientationchange"))}var e=n(t),l,i,o,r,f,u={"0":!0,"180":!0};if("orientation"in t&&"onorientationchange"in t){var c=t.innerWidth||n(t).width(),s=t.innerHeight||n(t).height(),a=50;r=c>s&&c-s>a,f=u[t.orientation],(r&&f||!r&&!f)&&(u={"-90":!0,"90":!0})}n.event.special.orientationchange=l={setup:function(){if("orientation"in t&&"onorientationchange"in t&&n.mobile.orientationChangeEnabled)return!1;o=i(),e.bind("throttledresize",h)},teardown:function(){if("orientation"in t&&"onorientationchange"in t&&n.mobile.orientationChangeEnabled)return!1;e.unbind("throttledresize",h)},add:function(n){var t=n.handler;n.handler=function(n){return n.orientation=i(),t.apply(this,arguments)}}},n.event.special.orientationchange.orientation=i=function(){var i=!0,n=document.documentElement;return i="orientation"in t&&"onorientationchange"in t?u[t.orientation]:n&&n.clientWidth/n.clientHeight<1.1,i?"portrait":"landscape"}}(jQuery,window),function(){t.event.special.throttledresize={setup:function(){t(this).bind("resize",u)},teardown:function(){t(this).unbind("resize",u)}};var f=250,u=function(){n=+new Date,r=n-e,r<f?(i&&clearTimeout(i),i=setTimeout(u,f-r)):(e=n,t(this).trigger("throttledresize"))},e=0,i,n,r}(),t.each({gcuiscrollstop:"gcuiscrollstart",gcuitaphold:"gcuitap",gcuiswipeleft:"gcuiswipe",gcuiswiperight:"gcuiswipe"},function(n,i){t.event.special[n]={setup:function(){t(this).bind(i,t.noop)}}})})(n.touch||(n.touch={}))}(gcui||(gcui={})),$(document).ready(function(){function v(n,t,i){var u="-webkit-transform",f="translate3d(0,0,0)",r=n.css(u),e=!(r&&r.match(/^\s*none\s*$/i));n.css(u,e?f:r+" "+f);try{return t.apply(this,i)}finally{n.css(u,r)}}function y(n,t,i,r){var s=!1,u,e,f=$.speed(t,i,r),c=this,h;if(!n)return!1;for(h in n)u=n[h],h==="height"?u==="hide"?(this.css("display","none"),s=!0,f.complete()):u==="show"&&(this.css("display",""),s=!0,f.complete()):h==="width"?u==="hide"?(this.css("display","none"),s=!0,f.complete()):u==="show"&&(this.css("display",""),s=!0,f.complete()):h==="left"&&(e=this.css("left").replace("px","")*1,typeof u=="string"&&(u.indexOf("-=")===0?e=e-u.replace("-=","")*1:u.indexOf("+=")===0&&(e=e+u.replace("+=","")*1)),s=!0,this.css("-webkit-perspective",1e3),this.css("-webkit-backface-visibility","hidden"),o(this[0],e,f.duration,"linear",f.complete));return s}function p(t,u,e,o){n&&(e||(e="ease"),f(t,"opacity",u,e),i(t,0),t.addEventListener("webkitTransitionEnd",$.proxy(function(){r(t),t.style.display="none",i(t,1),o&&o()},this),!1))}function d(t,u,e,o){n&&(e||(e="ease"),f(t,"opacity",u,e),i(t,1),t.addEventListener("webkitTransitionEnd",$.proxy(function(){r(t),t.style.display==="none"&&(t.style.display=""),o&&o()},this),!1))}function o(t,i,r,u,f){n&&(s(t,r,u),h(t,i),t.___animationEndHandler=f,t.___internalEndHandler=$.proxy(c,{}),t.addEventListener("webkitTransitionEnd",t.___internalEndHandler,!1))}function i(t,i){var r;n&&(r=t.style||t,r.opacity=i)}function h(t,i){var r;n?(t.___translateX=i,r=t.style||t,r.webkitTransform="translateX("+i+"px)"):t.style.left=i+"px"}function nt(t,i){var r;n?(t.___translateY=i,r=t.style||t,r.webkitTransform="translateY("+i+"px)"):t.style.top=i+"px"}function g(t){var f,u,e,r,i;if(!t)return 0;if(n){f=t.style||t,u=f.webkitTransform;if(typeof u=="string"){e=new RegExp("translate(3d|X|)\\(-*(\\d+)"),r=e.exec(u);if(r){i=parseFloat(r[1]);if(isFinite(i))return i}}}else{i=parseInt($(t).css("left"));if(isFinite(i))return i}return 0}function b(t){var f,u,e,r,i;if(!t)return 0;if(n){f=t.style||t,u=f.webkitTransform;if(typeof u=="string"){e=new RegExp("translate(3d|X|)\\(.*,\\s*-*(\\d+)"),r=e.exec(u);if(r){i=parseFloat(r[1]);if(isFinite(i))return i}}}else{i=parseInt(jQuery(t).css("top"));if(isFinite(i))return i}return 0}function s(n,t,i){i||(i="ease"),f(n,"-webkit-transform",t,i)}function f(t,i,r,u){if(n){var f=t.style;f.webkitTransitionProperty=i,f.webkitTransitionDuration=r+"ms",f.webkitTransitionTimingFunction=u}}function r(t){var r,i;n&&(r=t.style,r.webkitTransitionProperty="none",i=t.___internalEndHandler,i&&(delete t.___internalEndHandler,t.removeEventListener("webkitTransitionEnd",i,!1)))}function c(n){try{var t,i;switch(n.type){case"webkitTransitionEnd":t=n.target,t&&(r(t),t.___animationEndHandler&&(i=t.___animationEndHandler,t.___animationEndHandler=null,i(n)));break}}catch(u){window.console&&window.console.log&&window.console.log("[ew219290] error: "+(u.message?u.message:u)+", event: "+n)}return!0}var u=window.navigator.userAgent,a=u.match(new RegExp("android ((1\\.)|(2\\.([^345]+)))","i")),w=window.WebKitCSSMatrix?!a:!1,l=!!(typeof u=="string"&&u.match(/applewebkit/)),k="ontouchend"in document,t=document.createElement("div"),n,e;t.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;-o-transition:top 1s ease;"),document.body.appendChild(t),n=!!(t.style.transition||t.style.webkitTransition||t.style.MozTransition||t.style.OTransitionDuration),t.parentNode.removeChild(t),t=null,e=jQuery.fn.animate,jQuery.fn.animate=function(n,t,i,r){if(!l||!y.apply(this,arguments))return v.call(this,this,function(){return e.apply(this,arguments)},arguments)}}),function(n){(function(t){"use strict";var i=jQuery,a=function(){function n(){this.mobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.initSelector=":jqmData(role='superpanel')",this.allowResize=!1,this.autoRefresh=!1,this.animationOptions={queue:!1,disabled:!1,duration:250,easing:undefined},this.hScrollerActivating=null,this.hScroller={scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},this.keyboardSupport=!1,this.keyDownInterval=100,this.mouseWheelSupport=!0,this.bubbleScrollingEvent=!0,this.resizableOptions={handles:"all",helper:"ui-widget-content gcui-superpanel-helper"},this.resized=null,this.dragStop=null,this.painted=null,this.scrolling=null,this.scroll=null,this.scrolled=null,this.showRounder=!0,this.vScrollerActivating=null,this.vScroller={scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},this.customScrolling=!1,this.listenContentScroll=!1}return n}(),t=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(n.gcuiWidget),v,r,h;t.superpanel=t;if(i.support.isTouchEnabled&&i.support.isTouchEnabled())r="gcui-superpanel-handle",h="<div class='gcui-superpanel-statecontainer'><div class='gcui-superpanel-contentwrapper-touch'></div></div>",t.prototype=i.extend(!0,{},i.Widget.prototype,{widgetEventPrefix:"gcuisuperpanel",_setOption:function(n,t){var r=this,u=r.options,f=r._fields();n==="animationOptions"||n==="resizableOptions"?t=i.extend(u[n],t):(n==="hScroller"||n==="vScroller")&&(t=i.extend(u[n],t),r.refresh()),i.Widget.prototype._setOption.apply(r,arguments);switch(n){case"allowResize":r._initResizer();break;case"disabled":r._handleDisabledOption(t,r.element);break;case"mouseWheelSupport":case"keyboardSupport":r._bindElementEvents(r,f,r.element,u);break}},_create:function(){var n=this,t=n.options;t.vScroller.dir="v",t.hScroller.dir="h",n._createDom(),n.options.disabled&&n.disable(),n.element.is(":hidden")&&n.element.addVisibilityObserver&&n.element.addVisibilityObserver(function(){n.refresh(),n.element.removeVisibilityObserver&&n.element.removeVisibilityObserver()},"gcuisuperpanel")},_handleDisabledOption:function(n,t){var i=this;n?(i.disabledDiv||(i.disabledDiv=i._createDisabledDiv(t)),i.disabledDiv.appendTo("body")):i.disabledDiv&&(i.disabledDiv.remove(),i.disabledDiv=null)},_createDisabledDiv:function(n){var e=this,t=n?n:e.element,r=t.offset(),f=t.outerWidth(),u=t.outerHeight();return i("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:f,height:u,left:r.left,top:r.top})},_createDom:function(){var n=this,t=n.element;n.paintPanel(),n._initResizer(),n._bindElementEvents()},_applyOverflow:function(n){var t={},f=this.options,u=f.hScroller.scrollBarVisibility,r=f.vScroller.scrollBarVisibility;t["overflow-x"]=u,t["overflow-y"]=r,i.support.isTouchEnabled&&i.support.isTouchEnabled()&&u==="visible"&&r==="visible"&&(t["overflow-x"]="auto",t["overflow-y"]="auto"),n.css(t)},_createAdditionalDom:function(n,t,r){r.attr("tabindex")||(r.attr("tabindex","-1"),t.tabindex=!0);var u=t.stateContainer=i(h),f;n._applyOverflow(t.stateContainer),t.contentWrapper=u.children(),r.contents().each(function(n,r){var u=i(r);if(u.hasClass("gcui-superpanel-header")){t.header=u;return}if(u.hasClass("gcui-superpanel-footer")){t.footer=u;return}t.contentWrapper[0].appendChild(r)}),t.header!==undefined&&r.prepend(t.header),r[0].appendChild(u[0]),t.footer!==undefined&&t.footer.insertAfter(u),n._resetDom(),t.contentWrapper.css("float","left"),t.contentWidth=t.contentWrapper.width(),t.contentHeight=t.contentWrapper.height(),t.contentWrapper.css("float","")},_bindElementEvents:function(){var n=this,t=n.element,f=n.options,e=n.widgetName,r=t.find(".gcui-superpanel-statecontainer"),u=r.scrollTop();r.bind("scroll",function(t,r){var f=i(this).scrollTop();f===u?(n._triggerScroll(i(this).scrollLeft(),"h"),n._updateScrollValue(i(this).scrollLeft(),"h")):(n._triggerScroll(f,"v"),n._updateScrollValue(f,"v"),u=f)}),f.keyboardSupport?n._keyboardBind===undefined&&(n._keyboardBind=!0,t.bind("keydown."+e,n,n._panelKeyDown)):(t.unbind("keydown."+e,n._panelKeyDown),n._keyboardBind=undefined),f.mouseWheelSupport||t.bind("mousewheel",function(n){return n.stopPropagation(),!1})},_setScrollingInterval:function(n,t,i,r){var u=i.options;t.length>0&&(n.internalFuncID=window.setInterval(function(){i._doScrolling(t,i,r)},u.keyDownInterval))},_triggerScroll:function(n,t){var i={position:n,dir:t};this._trigger("scroll",null,i)},_panelKeyDown:function(t){var i=t.data,e=i.options,r,u,f=n.getKeyCodeEnum();if(!e.keyboardSupport||e.disabled)return;r=t.shiftKey,u=t.keyCode,u===f.LEFT?i._doScrolling("left",i,r):u===f.RIGHT?i._doScrolling("right",i,r):u===f.UP?i._doScrolling("top",i,r):u===f.DOWN&&i._doScrolling("bottom",i,r),t.stopPropagation(),t.preventDefault()},_doScrolling:function(n,t,i){var f,u,r,h=t._fields(),s=h.stateContainer[0],e={},o;n==="top"||n==="bottom"?(u="v",r="scrollTop"):(n==="left"||n==="right")&&(u="h",r="scrollLeft"),f=i?t._getLargeChange(u):t._getSmallChange(u),o=s[r],e[r]=n==="top"||n==="left"?o-f:o+f,t._animateTo(e)},_getLargeChange:function(n){var u=this,i=u._fields(),t,r=n=="h"?i.clientWidth:i.clientHeight;return t=r?r:i.stateContainer[n=="h"?"width":"height"]()},_getSmallChange:function(){return this._getLargeChange()/2},_setRounder:function(n,t){var o=this.options.uiCSS.cornerAll,u,i,r,e,f;if(this.options.showRounder){t.addClass(o);if(n._rounderAdded)return;u=GcSpread.Sheets.util.browser;if(u.msie)return;i="",r="",u.webkit?(r="WebkitBorderTopLeftRadius",i="WebkitBorderRadius"):u.mozilla?(r="MozBorderRadiusBottomleft",i="MozBorderRadius"):(r="border-top-left-radius",i="border-radius"),e=t.css(r),f=parseInt(e,10),t.css(i,f+1),n._rounderAdded=!0,n._radiusKey=i}else t.removeClass(o)},_initResizer:function(){var n=this,f=n.options,r=n._fields(),e=r.resizer,t,u;if(!i.fn.resizable)return;!e&&f.allowResize&&(t=f.resizableOptions,u=t.stop,t.stop=function(t){n._resetDom(),n._trigger("resized"),i.isFunction(u)&&u(t)},r.resizer=e=n.element.resizable(t)),!f.allowResize&&r.resizer&&(e.resizable("destroy"),r.resizer=null)},_resetDom:function(){var i=this,f=i.options,r=i.element,n=i._fields(),u=r.width(),t=r.height();n.header!==undefined&&(t-=n.header.outerHeight()),n.footer!==undefined&&(t-=n.footer.outerHeight()),n.stateContainer.length&&(n.stateContainer.css({width:u,height:t}),n.clientWidth=n.stateContainer[0].clientWidth,n.clientHeight=n.stateContainer[0].clientHeight)},_fields:function(){var t=this,i=t.element,r=t.widgetName+"-fields",n=t._fieldsStore;return n===undefined&&(n={},i.data(r,n),t._fieldsStore=n),n},_getScrollOffset:function(n){var o=i(n),f,l,t,a,r,s,c,e,h,u={left:null,top:null};return o.length===0?u:(f=this._fields(),l=f.contentWrapper,t=o.offset(),t.leftWidth=t.left+o.outerWidth(),t.topHeight=t.top+o.outerHeight(),r=l.offset(),r.leftWidth=r.left+f.clientWidth,r.topHeight=r.top+f.clientHeight,e=t.left-r.left,t.left<r.left?u.left=e:t.leftWidth>r.leftWidth&&(h=t.leftWidth-r.left-f.clientWidth,u.left=e<h?e:h),s=t.top-r.top,t.top<r.top?u.top=s:t.topHeight>r.topHeight&&(c=t.topHeight-r.top-f.clientHeight,u.top=s<c?s:c),u)},_initialize:function(n,t,i){var r=i.options.uiCSS;n.initialized=!0,t.addClass(["gcui-superpanel",r.widget,r.content].join(" ")),i._setRounder(i,t),i._createAdditionalDom(i,n,t),i._trigger("painted"),i._initScrollPosition()},_initScrollPosition:function(){var r=this.options,o=r.hScroller,e=r.vScroller,t=o.scrollValue,n=e.scrollValue,i=this._fields(),u=t?this._scrollValueToPx(t,"h"):0,f=n?this._scrollValueToPx(n,"v"):0;t&&i.stateContainer.prop("scrollLeft",u),n&&i.stateContainer.prop("scrollTop",f)},_updateScrollValue:function(n,t){var r=this.scrollPxToValue(n,t),e=this.options,f=t==="h"?"hScroller":"vScroller",u=i.Event("scrollValueChanged");e[f].scrollValue=r,this._trigger("scrollValueChanged",u,{dir:t,value:r})},scrollPxToValue:function(n,t){var f=this.options,c=t==="h"?"width":"height",l=t==="h"?"contentWidth":"contentHeight",i=t==="h"?"hScroller":"vScroller",r=this._fields(),v=r.stateContainer,a=r[l],h=v[c](),u=f[i].scrollMin,o=f[i].scrollMax,s=o-u;return s*n/(a-h)+u},_scrollValueToPx:function(n,t){var f=this.options,c=t==="h"?"width":"height",l=t==="h"?"contentWidth":"contentHeight",i=t==="h"?"hScroller":"vScroller",r=this._fields(),v=r.stateContainer,a=r[l],h=v[c](),u=f[i].scrollMin,o=f[i].scrollMax,s=o-u;return(n-u)*(a-h)/s},_animateTo:function(n){var t=this,f=t.element,r=t.options,i=r.animationOptions,u=t._fields();u.stateContainer.animate(n,i)},destroy:function(){var n=this,u=n.element,e=n.options,t=n._fields(),f,r=e.uiCSS;n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null),t.resizer!==undefined&&t.resizer.resizable("destroy"),u.unbind("."+n.widgetName),u.removeClass(["gcui-superpanel",r.widget,r.content,r.cornerAll].join(" ")),f=t.contentWrapper,f.contents().each(function(n,t){u.append(t)}),t.stateContainer.remove(),i.Widget.prototype.destroy.apply(n,arguments)},doScrolling:function(n,t){this._doScrolling(n,this,t)},paintPanel:function(n){var t=this,r=t.element,i=t._fields();i.initialized||this._initialize(i,r,t)},needToScroll:function(n){var t=this._getScrollOffset(n);return t.top!==null||t.left!==null},scrollChildIntoView:function(n){var t=this._getScrollOffset(n),r=t.left,i=t.top;this.scrollTo(r,i)},getContentElement:function(){return this._fields().contentWrapper},hScrollTo:function(n,t){var i=!t?n:this._scrollValueToPx(n);this._updateScrollValue(i,"h"),this._animateTo({scrollLeft:i})},vScrollTo:function(n,t){var i=!t?n:this._scrollValueToPx(n);this._updateScrollValue(i,"v"),this._animateTo({scrollTop:i})},refresh:function(){var n=this,t=n._fields();n._applyOverflow(t.stateContainer),n._resetDom()},scrollTo:function(n,t,i){var u=!i?n:this._scrollValueToPx(n),r=!i?t:this._scrollValueToPx(t);this._updateScrollValue(u,"h"),this._updateScrollValue(r,"v"),this._animateTo({scrollTop:r,scrollLeft:u})}}),t.prototype.options=i.extend(!0,{},n.gcuiWidget.prototype.options,{mobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='superpanel')",allowResize:!1,animationOptions:{queue:!1,disabled:!1,duration:250,easing:undefined},hScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,firstStepChangeFix:0,scrollMin:0,hoverEdgeSpan:20},keyboardSupport:!1,keyDownInterval:100,mouseWheelSupport:!0,resizableOptions:{handles:"all",helper:"ui-widget-content gcui-superpanel-helper"},resized:null,painted:null,scroll:null,showRounder:!0,vScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,scrollMin:0,firstStepChangeFix:0,hoverEdgeSpan:20}}),i.gcui.registerWidget("superpanel",t.prototype);else{var r="gcui-superpanel-handle",e="gcui-superpanel-hbarcontainer",l="gcui-superpanel-vbarcontainer",u="",h="<div class='gcui-superpanel-statecontainer'><div class='gcui-superpanel-contentwrapper'><div class='gcui-superpanel-templateouterwrapper'></div></div></div>",f="<div class='gcui-superpanel-hbarcontainer {header}'><div class='gcui-superpanel-handle {stateDefault} {cornerAll}'><span class='{icon} {iconVGripSolid}'></span></div><div class='gcui-superpanel-hbar-buttonleft {stateDefault} {cornerBL}'><span class='{icon} {iconArrowLeft}'></span></div><div class='gcui-superpanel-hbar-buttonright {stateDefault} {cornerBR}'><span class='{icon} {iconArrowRight}'></span></div></div>",o="<div class='gcui-superpanel-vbarcontainer {header}'><div class='gcui-superpanel-handle {stateDefault} {cornerAll}'><span class='{icon} {iconHGripSolid}'></span></div><div class='gcui-superpanel-vbar-buttontop {stateDefault} {cornerTR}'><span class='{icon} {iconArrowUp}'></span></div><div class='gcui-superpanel-vbar-buttonbottom {stateDefault} {cornerBR}'><span class='{icon} {iconArrowDown}'></span></div></div>",s="<div class='{stateDefault} gcui-superpanel-button gcui-superpanel-buttonleft'><span class='{icon} {iconCaratLeft}'></span></div><div class='{stateDefault} gcui-superpanel-button gcui-superpanel-buttonright'><span class='{icon} {iconCaratRight}'></span></div>",c="<div class='{stateDefault} gcui-superpanel-button gcui-superpanel-buttontop'><span class='{icon} {iconCaratUp}'></span></div><div class='{stateDefault} gcui-superpanel-button gcui-superpanel-buttonbottom'><span class='{icon} {iconCaratDown}'> </span></div>";t.prototype=i.extend(!0,{},i.Widget.prototype,{widgetEventPrefix:"gcuisuperpanel",_setOption:function(n,t){var r=this,o=r.options,s=r._fields(),e=s.hbarDrag,u=s.vbarDrag,f=s.resizer;n==="animationOptions"?t=i.extend(o.animationOptions,t):n==="hScroller"?(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null&&(r._autoHLarge=!1),t=i.extend(o.hScroller,t),r.refresh()):n==="vScroller"?(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null&&(r._autoVLarge=!1),t=i.extend(o.vScroller,t),r.refresh()):n==="resizableOptions"&&(t=i.extend(r.resizableOptions,t)),i.Widget.prototype._setOption.apply(r,arguments),i.isPlainObject(t)&&(r.options[n]=t);switch(n){case"allowResize":r._initResizer();break;case"disabled":t?(e!==undefined&&e.draggable("disable"),u!==undefined&&u.draggable("disable"),f!==undefined&&f.resizable("disable")):(e!==undefined&&e.draggable("enable"),u!==undefined&&u.draggable("enable"),f!==undefined&&f.resizable("enable"));break;case"mouseWheelSupport":case"keyboardSupport":r._bindElementEvents(r,s,r.element,o);break}return r},_create:function(){var n=this,t=n.options;t.vScroller.dir="v",t.hScroller.dir="h",n._initMarkup(),n.paintPanel(),n._initResizer(),n.options.disabled&&n.disable(),n._detectAutoRefresh(),t.listenContentScroll&&n._listenContentScroll(),n.element.is(":hidden")&&n.element.addVisibilityObserver&&n.element.addVisibilityObserver(function(){n.element.removeVisibilityObserver&&n.element.removeVisibilityObserver(),n.refresh()},"gcuisuperpanel")},_initMarkup:function(){var i=this.options.uiCSS,t=/\{(\w+?)\}/ig,n=function(n,t){return i[t]};u=i.stateActive,f=f.replace(t,n),o=o.replace(t,n),s=s.replace(t,n),c=c.replace(t,n)},_detectAutoRefresh:function(){var t=this,n=i.gcui.superpanel.panels;n===undefined&&(n=[],i.gcui.superpanel.panels=n),n.push(t),t.options.autoRefresh&&(i.gcui.superpanel.setAutoRefreshInterval||(i.gcui.superpanel.setAutoRefreshInterval=t._setAutoRefreshInterval,i.gcui.superpanel.setAutoRefreshInterval()))},_setAutoRefreshInterval:function(){var r=i.gcui.superpanel.autoRereshInterval,t=i.gcui.superpanel.panels,n;n=window.setInterval(function(){window.clearInterval(n);for(var c=t.length,h=!1,u,s,o,f,r,e=0;e<c;e++)u=t[e],s=u.element[0],o=u.options.autoRefresh,o&&(h=!0),f=u.getContentElement(),r=u._paintedMark,o&&f.is(":visible")&&(r===undefined||r.width!==f[0].offsetWidth||r.height!==f[0].offsetHeight||r.mainWidth!==s.offsetWidth||r.mainHeight!==s.offsetHeight)&&u.paintPanel();h&&window.setTimeout(i.gcui.superpanel.setAutoRefreshInterval,0)},r===undefined?500:r)},destroy:function(){var t=this,n=t._fields(),r=t.element,f,e,u=t.options.uiCSS;i.gcui.superpanel.panels=i.grep(i.gcui.superpanel.panels,function(n){return n!==t},!1);if(!n.initialized)return;t._radiusKey&&t.element.css(t._radiusKey,""),n.intervalID!==undefined&&(window.clearInterval(n.intervalID),n.intervalID=undefined),n.resizer!==undefined&&n.resizer.resizable("destroy"),n.hbarContainer!==undefined&&(n.hbarDrag.remove(),n.hbarContainer.unbind("."+t.widgetName)),n.vbarContainer!==undefined&&(n.vbarDrag.remove(),n.vbarContainer.unbind("."+t.widgetName)),r.unbind("."+t.widgetName),n.contentWrapper.unbind("."+t.widgetName),f=n.stateContainer.find(">.gcui-superpanel-button"),f.unbind("."+t.widgetName),e=n.templateWrapper,e.contents().each(function(n,t){r.append(t)}),n.stateContainer.remove(),n.tabindex&&r.removeAttr("tabindex"),r.removeClass(["gcui-superpanel",u.widget,u.content,u.cornerAll].join(" ")),i.Widget.prototype.destroy.apply(t,arguments)},_fields:function(){var t=this,i=t.element,r=t.widgetName+"-fields",n=t._fieldsStore;return n===undefined&&(n={},i.data(r,n),t._fieldsStore=n),n},_hasMode:function(n,t){var r=n.scrollMode.split(",");return r=i.map(r,function(n){return i.trim(n).toLowerCase()}),i.inArray(t.toLowerCase(),r)>-1},_bindElementEvents:function(n,t,i,r){var f=n._hasMode(r.hScroller,"edge"),e=n._hasMode(r.vScroller,"edge"),u=n.widgetName;f||e?n._mousemoveBind===undefined&&(n._mousemoveBind=!0,i.bind("mousemove."+u,n,n._contentMouseMove),i.bind("mouseleave."+u,null,function(){n._clearInterval()})):(i.unbind("mousemove",n._contentMouseMove),n._mousemoveBind=undefined),r.mouseWheelSupport?n._mouseWheelBind===undefined&&(n._mouseWheelBind=!0,i.bind("mousewheel."+u,n,n._panelMouseWheel)):(i.unbind("mousewheel",n._panelMouseWheel),n._mouseWheelBind=undefined),r.keyboardSupport?n._keyboardBind===undefined&&(n._keyboardBind=!0,i.bind("keydown."+u,n,n._panelKeyDown)):(i.unbind("keydown",n._panelKeyDown),n._keyboardBind=undefined)},_dragStop:function(n,t,i){var r={dragHandle:i};t._trigger("dragStop",n,r)},_contentMouseMove:function(n){if(n.data.options.disabled)return;var t=n.data,v=t.options,a=v.hScroller,l=v.vScroller,e=i(n.currentTarget),k=t._fields(),b=t._hasMode(a,"edge"),p=t._hasMode(l,"edge"),c={X:n.pageX,Y:n.pageY},o=e.offset(),u=o.left,f=o.top,s=a.hoverEdgeSpan,h=l.hoverEdgeSpan,w=e.innerHeight(),y=e.innerWidth(),r="";u=c.X-u,f=c.Y-f,t._clearInterval(),b&&(u<s&&(r="left"),u>y-s&&(r="right")),p&&(f<h&&(r="top"),f>w-h&&(r="bottom")),t._setScrollingInterval(k,r,t,!1)},_setScrollingInterval:function(n,t,i,r){var u=i.options;t.length>0&&(n.internalFuncID=window.setInterval(function(){i._doScrolling(t,i,r)},u.keyDownInterval))},_scrollButtonMouseOver:function(n){var t=n.data,u=t.options,r=i(n.currentTarget);if(u.disabled)return;r.hasClass(u.uiCSS.stateDisabled)||(r.bind("mouseout."+t.widgetName,t,t._buttonMouseOut).bind("mousedown."+t.widgetName,t,t._buttonMouseDown).bind("mouseup."+t.widgetName,t,t._buttonMouseUp).addClass(u.uiCSS.stateHover),t._buttonScroll(r,t,"buttonshover"))},_buttonScroll:function(n,t,i){var r="",e=t.options,o=t._fields(),u=t._hasMode(e.hScroller,i),f=t._hasMode(e.vScroller,i);n.hasClass("gcui-superpanel-buttonleft")&&u?r="left":n.hasClass("gcui-superpanel-buttonright")&&u?r="right":n.hasClass("gcui-superpanel-buttontop")&&f?r="top":n.hasClass("gcui-superpanel-buttonbottom")&&f&&(r="bottom"),r.length>0&&(t._clearInterval(),t._doScrolling(r,t,!0),t._setScrollingInterval(o,r,t,!0))},_listenContentScroll:function(){var t=this,f=t.options,n=t._fields(),a=n.hbarContainer,v=n.hbarDrag,c=n.vbarContainer,l=n.vbarDrag,i=n.templateWrapper,r=n.contentWrapper,h=r.width(),e=r.height(),u=i&&i.offset(),y=u&&u.left,p=u&&u.top,s=n.contentWidth,o=n.contentHeight;r.bind("scroll",function(n){var p=i.position(),u=p.left,y=p.top;r.scrollTop(0).scrollLeft(0),i.css({left:u,top:y}),u<=0&&u>h-s&&(t._updateScrollValue(t.scrollPxToValue(-u,"h"),f.hScroller),t._scrollDrag("h",a,v,!0)),y<=0&&y>e-o&&(t._updateScrollValue(t.scrollPxToValue(-y,"v"),f.vScroller),t._scrollDrag("v",c,l,!0))})},_buttonMouseDown:function(n){var t=n.data,r=i(n.currentTarget),u=t.options.uiCSS;if(t.options.disabled)return;r.hasClass(u.stateDisabled)||(r.addClass(u.stateActive),t._buttonScroll(r,t,"buttons"))},_buttonMouseUp:function(n){var t=n.data,r=i(n.currentTarget);r.removeClass(t.options.css.stateActive),t._clearInterval()},_buttonMouseOut:function(n){var t=n.data,r=t.options.uiCSS,u=i(n.currentTarget);u.unbind("mouseout",t._buttonMouseOut).unbind("mousedown",t._buttonMouseDown).unbind("mouseup",t._buttonMouseUp).removeClass(r.stateHover).removeClass(r.stateActive),t._clearInterval()},_updateScrollValue:function(n,t){var r=i.Event("scrollValueChanged");t.scrollValue=n,this._trigger("scrollValueChanged",r,t)},_panelKeyDown:function(t){var i=t.data,e=i.options,u=t.shiftKey,r=t.keyCode,f=n.getKeyCodeEnum();if(!e.keyboardSupport||e.disabled)return;r===f.LEFT?i._doScrolling("left",i,u):r===f.RIGHT?i._doScrolling("right",i,u):r===f.UP?i._doScrolling("top",i,u):r===f.DOWN&&i._doScrolling("bottom",i,u),t.stopPropagation(),t.preventDefault()},_draggingInternal:function(n,t,i,r){var f=i.dir,h=f==="h",c=h?"left":"top",a=n.position[c]-t._getScrollContainerPadding(c),v=t._getTrackLen(f)-r[h?"outerWidth":"outerHeight"](!0),y=a/v,e=i.scrollMax-i.scrollLargeChange+1,u=y*e,s,o,l;u<i.scrollMin&&(u=i.scrollMin),u>e&&(u=e),s={oldValue:i.scrollValue,newValue:u,dir:f};if(!t._scrolling(!0,t,s))return;t.customScroll&&(l=Math.abs(t.customScroll),o=t.scrollPxToValue(l,i.dir)),t._updateScrollValue(o||u,i),t.customScroll=undefined,t._setDragAndContentPosition(!0,!1,f,"dragging")},_dragging:function(n,t,r){var f=r.options,u=i(n.target),o=u.parent();o.hasClass(e)?r._draggingInternal(t,r,f.hScroller,u):r._draggingInternal(t,r,f.vScroller,u)},_panelMouseWheel:function(n,t){var u=n.data,o=u.options,l,r="",c,h=o.hScroller,s=o.vScroller,f;if(!o.mouseWheelSupport||o.disabled)return;l=i(n.srcElement||n.originalEvent.target),c=l.closest("."+e,u.element).size()>0,r=t>0?c?"left":"top":c?"right":"bottom",r.length>0&&u._doScrolling(r,u),f=!1,r==="left"&&(f=!u.hNeedScrollBar||Math.abs(h.scrollValue-h.scrollMin)<.001),r==="right"&&(f=!u.hNeedScrollBar||Math.abs(h.scrollValue-(h.scrollMax-u._getHScrollBarLargeChange()+1))<.001),r==="top"&&(f=!u.vNeedScrollBar||Math.abs(s.scrollValue-s.scrollMin)<.001),r==="bottom"&&(f=!u.vNeedScrollBar||Math.abs(s.scrollValue-(s.scrollMax-u._getVScrollBarLargeChange()+1))<.001),f&&o.bubbleScrollingEvent&&r!=="left"&&r!=="right"||(n.stopPropagation(),n.preventDefault())},_documentMouseUp:function(n){var t=n.data.self,r=n.data.ele;r.removeClass(t.options.uiCSS.stateActive),t._clearInterval(),i(document).unbind("mouseup",t._documentMouseUp)},_scrollerMouseOver:function(n){var t=n.data,f=t.options,r,u=null,o=!1;if(f.disabled)return;r=i(n.srcElement||n.originalEvent.target||n.originalEvent.srcElement),r.hasClass(f.uiCSS.stateDefault)?(u=r,o=!0):r.parent().hasClass(f.uiCSS.stateDefault)?(u=r.parent(),o=!0):(r.hasClass(l)||r.hasClass(e))&&(u=r),u&&(o&&u.addClass(f.uiCSS.stateHover),u.bind("mouseout."+t.widgetName,t,t._elementMouseOut),u.bind("mousedown."+t.widgetName,t,t._elementMouseDown),u.bind("mouseup."+t.widgetName,t,t._elementMouseUp))},_elementMouseUp:function(n){var t=i(n.currentTarget);t.removeClass(u)},_elementMouseDown:function(n){var t=i(n.currentTarget),o=n.data,p,y,f="",h=!1,s=!1,v,a,c;if(o.options.disabled||n.which!==1)return;if(t.hasClass("gcui-superpanel-vbar-buttontop"))f="top",s=!0;else if(t.hasClass("gcui-superpanel-vbar-buttonbottom"))f="bottom",s=!0;else if(t.hasClass("gcui-superpanel-hbar-buttonleft"))f="left",s=!0;else if(t.hasClass("gcui-superpanel-hbar-buttonright"))f="right",s=!0;else if(t.hasClass(r)){t.addClass(u);return}else t.hasClass(e)?(p=t.find("."+r),v=p.offset(),f=n.pageX<v.left?"left":"right",h=!0):t.hasClass(l)&&(y=t.find("."+r),a=y.offset(),f=n.pageY<a.top?"top":"bottom",h=!0);o._clearInterval(),o._doScrolling(f,o,h),c=o._fields(),o._setScrollingInterval(c,f,o,h),s&&t.addClass(u),i(document).bind("mouseup."+o.widgetName,{self:o,ele:t},o._documentMouseUp)},doScrolling:function(n,t){this._doScrolling(n,this,t)},_setScrollerValue:function(n,t,i,r,u,f,e){var c=t.scrollMin,y=f?r:i,s=t.scrollValue,o=0,h,l,p,a,v;s||(s=c);if(u){h=t.scrollMax-r+1;if(Math.abs(s-h)<.001)return e._clearInterval(),!1;l=t.firstStepChangeFix,o=s+y,f||Math.abs(s-c)>=.0001||isNaN(l)||(o+=l),o>h&&(o=h)}else{if(Math.abs(s-c)<.001)return e._clearInterval(),!1;o=s-y,o<0&&(o=c)}return p={oldValue:t.scrollValue,newValue:o,direction:n,dir:t.dir},e._scrolling(!0,e,p)?(e.customScroll&&(v=Math.abs(e.customScroll),a=e.scrollPxToValue(v,t.dir)),e._updateScrollValue(a||o,t),e.customScroll=undefined,!0):!1},_doScrolling:function(n,t,i){var r=t.options,o=r.vScroller,s=r.hScroller,h=t._getVScrollBarSmallChange(),u=t._getVScrollBarLargeChange(),f=t._getHScrollBarLargeChange(),e=t._getHScrollBarSmallChange();if(n==="top"||n==="bottom"){if(!t._setScrollerValue(n,o,h,u,n==="bottom",i,t))return;n="v"}else if(n==="left"||n==="right"){if(!t._setScrollerValue(n,s,e,f,n==="right",i,t))return;n="h"}t._setDragAndContentPosition(!0,!0,n)},_disableButtonIfNeeded:function(n){var i=n._fields(),t=n.options,s=i.buttonLeft,y=i.buttonRight,o=i.buttonTop,a=i.buttonBottom,c,v,r,e,l,h,u,f;i.intervalID>0&&window.clearInterval(i.intervalID),s!==undefined&&(c=n._getHScrollBarLargeChange(),v=t.hScroller.scrollMax-c+1,r=t.hScroller.scrollValue,e=t.hScroller.scrollMin,r===undefined&&(r=e),Math.abs(r-e)<.001||!i.hScrolling?s.addClass(t.uiCSS.stateDisabled):s.removeClass(t.uiCSS.stateDisabled),Math.abs(r-v)<.001||!i.hScrolling?y.addClass(t.uiCSS.stateDisabled):y.removeClass(t.uiCSS.stateDisabled)),o!==undefined&&(l=n._getVScrollBarLargeChange(),h=t.vScroller.scrollMax-l+1,u=t.vScroller.scrollValue,f=t.vScroller.scrollMin,u===undefined&&(u=f),Math.abs(u-f)<.001||!i.vScrolling?o.addClass(t.uiCSS.stateDisabled):o.removeClass(t.uiCSS.stateDisabled),Math.abs(u-h)<.001||!i.vScrolling?a.addClass(t.uiCSS.stateDisabled):a.removeClass(t.uiCSS.stateDisabled))},_clearInterval:function(){var t=this._fields(),n=t.internalFuncID;n>0&&(window.clearInterval(n),t.internalFuncID=-1)},_elementMouseOut:function(n){var r=i(n.currentTarget),t=n.data;r.unbind("mouseout",t._elementMouseOut),r.unbind("mousedown",t._elementMouseDown),r.unbind("mouseup",t._elementMouseUp),r.removeClass(t.options.uiCSS.stateHover)},_getScrollOffset:function(n){var h=i(n),a=this._fields(),f=a.contentWrapper,v=a.templateWrapper,t,e,r,o,l,s,c,u={left:null,top:null};return h.length===0?u:(t=h.offset(),e=v.offset(),t.leftWidth=t.left+h.outerWidth(),t.topHeight=t.top+h.outerHeight(),r=f.offset(),r.leftWidth=r.left+f.outerWidth(),r.topHeight=r.top+f.outerHeight(),s=t.left-e.left,t.left<r.left?u.left=s:t.leftWidth>r.leftWidth&&(c=t.leftWidth-e.left-f.innerWidth(),u.left=s<c?s:c),o=t.top-e.top,t.top<r.top?u.top=o:t.topHeight>r.topHeight&&(l=t.topHeight-e.top-f.innerHeight(),u.top=o<l?o:l),u)},_scrollDrag:function(n,t,i,r){var u=this,y=u.options,f=n==="v",e=f?y.vScroller:y.hScroller,c=e.scrollMin,p=e.scrollMax,o=e.scrollValue===undefined?c:e.scrollValue-c,w=u._getLargeChange(n),s=p-c-w+1,h=-1,a,l,v;o>s&&(o=s),t!==undefined&&(a=u._getTrackLen(n),l=i[f?"outerHeight":"outerWidth"](),v=u._getScrollContainerPadding(f?"top":"left"),h=o/s*(a-l)+v),h<0||i.css(f?"top":"left",h+"px"),u._scrollEnd(r,u,n)},needToScroll:function(n){var t=this._getScrollOffset(n);return t.top!==null||t.left!==null},scrollChildIntoView:function(n){var r=this._getScrollOffset(n),i=r.left,t=r.top;i!==null&&this.hScrollTo(i),t!==null&&this.vScrollTo(t)},hScrollTo:function(n,t){var i=this.options;this._updateScrollValue(!t?this.scrollPxToValue(n,"h"):n,i.hScroller),this._setDragAndContentPosition(!0,!0,"h","nonestop")},vScrollTo:function(n,t){var i=this.options;this._updateScrollValue(!t?this.scrollPxToValue(n,"v"):n,i.vScroller),this._setDragAndContentPosition(!0,!0,"v","nonestop")},scrollPxToValue:function(n,t){var f=this.options,v=t==="h"?"outerWidth":"outerHeight",a=t==="h"?"contentWidth":"contentHeight",o=t==="h"?"hScroller":"vScroller",e=this._fields(),s=e.contentWrapper,p=e[a],y=s[v](),u=f[o].scrollMin,l=f[o].scrollMax,h=l-u,c=t==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange(),r=h-c+1,i=r*(n/(p-y));return i<u&&(i=u),i>r&&(i=r),i},scrollTo:function(n,t,i){this.hScrollTo(n,i),this.vScrollTo(t,i)},refresh:function(){this.paintPanel()},paintPanel:function(n){var t=this,f=t.element,o,e,r,u;return f.is(":visible")?(o=typeof document.activeElement!="unknown"?document.activeElement:undefined,e=t.options,r=t._fields(),r.initialized||t._initialize(r,f,t),t._resetLargeChange(t,r,e),t._bindElementEvents(t,r,f,e),u=r.templateWrapper,u.css({float:"left",left:"0px",top:"0px",width:"auto",height:"auto"}),u.hide(),u.show(),r.contentWidth=u.width(),r.contentHeight=u.height(),u.css("float",""),t._setRounder(t,f),t._setInnerElementsSize(r,f),t._testScroll(t,r,e)===!1?!1:(t._initScrollBars(t,r,e),t._initScrollButtons(t,r,e),t._trigger("painted"),t._paintedMark={date:new Date,mainWidth:f[0].offsetWidth,mainHeight:f[0].offsetHeight,width:r.contentWidth,height:r.contentWidth},o===undefined||n||i(o).focus(),!0)):!1},_resetLargeChange:function(n,t,i){var u;n._autoVLarge&&(i.vScroller.scrollLargeChange=null),n._autoHLarge&&(i.hScroller.scrollLargeChange=null),t.vTrackLen=undefined,t.hTrackLen=undefined,t.vbarContainer&&(u=t.vbarContainer.children("."+r+":eq(0)"),u.detach(),t.vbarContainer.remove(),t.vbarContainer=undefined),t.hbarContainer&&(u=t.hbarContainer.children("."+r+":eq(0)"),u.detach(),t.hbarContainer.remove(),t.hbarContainer=undefined)},_initialize:function(n,t,i){var u=i.options.uiCSS,r;n.initialized=!0,t.addClass(["gcui-superpanel",u.widget,u.content].join(" ")),n.oldHeight=t.css("height"),r=t.css("overflow"),t.css("overflow",""),t.height(t.height()),t.css("overflow",r),i._createAdditionalDom(i,n,t)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(n,t,r,u,f,e,o){var h=u==="h",k="mouseover."+n.widgetName,y=h?"buttonLeft":"buttonTop",p=h?"buttonRight":"buttonBottom",a=e[y],v=e[p],b,w,l;n._hasMode(r,"buttons")||n._hasMode(r,"buttonshover")?(b=h?s:c,a===undefined&&(w=i(b).appendTo(o),w.bind(k,n,n._scrollButtonMouseOver),e[y]=a=o.children(h?".gcui-superpanel-buttonleft":".gcui-superpanel-buttontop"),e[p]=v=o.children(h?".gcui-superpanel-buttonright":".gcui-superpanel-buttonbottom")),l={my:h?"left":"top",of:f,at:h?"left":"top",collision:"none"},i.extend(l,r.decreaseButtonPosition),a.position(l),l={my:h?"right":"bottom",of:f,at:h?"right":"bottom",collision:"none"},i.extend(l,r.increaseButtonPosition),v.position(l)):a!==undefined&&(a.remove(),v.remove(),e[y]=e[p]=undefined)},_initScrollButtons:function(n,t,i){var u=t.contentWrapper,r=t.stateContainer;n._setButtonPosition(n,i,i.hScroller,"h",u,t,r),n._setButtonPosition(n,i,i.vScroller,"v",u,t,r)},_getVScrollBarSmallChange:function(){var n=this.options,t;return n.vScroller.scrollSmallChange||(t=this._getVScrollBarLargeChange(),n.vScroller.scrollSmallChange=t/2),n.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(n){var f=this,a=f.options,l=f._fields(),i=n==="v",t=i?a.vScroller:a.hScroller,w=i?"innerHeight":"innerWidth",p=i?"contentHeight":"contentWidth",y=i?"_autoVLarge":"_autoHLarge",v,c,o,h,u,s,e,r;return t.scrollLargeChange?t.scrollLargeChange:(v=t.scrollMax,c=t.scrollMin,o=v-c,h=l.contentWrapper,u=h[w](),s=l[p],e=u/(s-u),r=(o+1)*e/(1+e),isNaN(r)&&(r=0),t.scrollLargeChange=r,f[y]=!0,t.scrollLargeChange)},_getHScrollBarSmallChange:function(){var n=this.options,t;return n.hScroller.scrollSmallChange||(t=this._getHScrollBarLargeChange(),n.hScroller.scrollSmallChange=t/2),n.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(n,t,r){var w=r.hScroller,nt=w.scrollMax,k=w.scrollMin,d=nt-k,p=r.vScroller,g=p.scrollMax,it=p.scrollMin,tt=g-it,u=t.hbarDrag,f=t.vbarDrag,b,e,s,y,o,a,h,l,v,c;n.hNeedScrollBar&&u.is(":visible")&&(b=n._getHScrollBarLargeChange(),e=n._getTrackLen("h"),s=n._getDragLength(d,b,e,r.hScroller.scrollMinDragLength),u.width(s),y=u.outerWidth(!0)-u.width(),u.width(s-y),o=u.children("span"),o.css("margin-left",(u.width()-o[0].offsetWidth)/2),e>u.outerWidth(!0)?u.show():u.hide(),n._isDragging==!0&&(i(document).trigger("mouseup"),n._isDragging=!1)),n.vNeedScrollBar&&f.is(":visible")&&(a=n._getVScrollBarLargeChange(),h=n._getTrackLen("v"),l=n._getDragLength(tt,a,h,r.vScroller.scrollMinDragLength),f.height(l),v=f.outerHeight(!0)-f.height(),f.height(l-v),c=f.children("span"),c.css("margin-top",(f.height()-c[0].offsetHeight)/2),h>f.outerHeight(!0)?f.show():f.hide(),n._isDragging==!0&&(i(document).trigger("mouseup"),n._isDragging=!1)),n._setDragAndContentPosition(!1,!1,"both")},_getTrackLen:function(n){var f=this,t=f._fields(),i=n+"TrackLen",o=t.hbarContainer,e=t.vbarContainer,u=0,r=0;return t[i]!==undefined?t[i]:(n==="h"&&(r=f._getScrollContainerPadding("h"),u=o.innerWidth()),n==="v"&&(r=f._getScrollContainerPadding("v"),u=e.innerHeight()),t[i]=u-r)},_getScrollContainerPadding:function(n){var r=this,u=r._fields(),t=0,i,f;if(n==="h")t=r._getScrollContainerPadding("left")+r._getScrollContainerPadding("right");else if(n==="v")t=r._getScrollContainerPadding("top")+r._getScrollContainerPadding("bottom");else{i=n==="left"||n==="right"?u.hbarContainer:u.vbarContainer,f=n+"Padding";if(u[f]!==undefined)return t=u[f];i&&i.css&&(t=parseFloat(i.css("padding-"+n))),u[f]=t}return t},_triggerScroll:function(n,t,i){var r={position:n,dir:t,animationOptions:i};this._trigger("scroll",null,r)},_contentDragAnimate:function(n,t,r,u,f,e,o){var s=this,c=s.options,l=n==="v",y=l?c.vScroller:c.hScroller,ct=l?"outerHeight":"outerWidth",lt=l?"innerHeight":"innerWidth",st=l?"contentHeight":"contentWidth",yt=l?"top":"left",rt=y.scrollMin,at=y.scrollMax,ht=at-rt,v=y.scrollValue===undefined?rt:y.scrollValue-rt,vt=s._getLargeChange(n),p=ht-vt+1,tt=s._fields(),pt=tt.contentWrapper,w=tt.templateWrapper,h,a,et,ut,ot,ft,g,d,b,k,nt,it;v>p&&(v=p),h=(tt[st]-pt[lt]())*(v/p),Math.abs(h)<.001&&(h=0),h=Math.round(h),a=-1,r!==undefined&&(t&&u.is(":animated")&&f!=="nonestop"&&u.stop(!0,!1),et=s._getTrackLen(n),ut=u[ct](!0),ot=et-ut,ft=s._getScrollContainerPadding(yt),a=v/p*ot+ft),t&&c.animationOptions&&!c.animationOptions.disabled?(a<0||o==="dragging"||(g=i.extend({},c.animationOptions),g.complete=undefined,d=l?{top:a}:{left:a},u.animate(d,g)),b=i.extend({},c.animationOptions),k=c.animationOptions.complete,b.complete=function(){s._scrollEnd(e,s,n),i.isFunction(k)&&k(arguments)},t&&w.is(":animated")&&f!=="nonestop"&&w.stop(!0,!1),nt=l?{top:-h}:{left:-h},c.customScrolling?s._scrollEnd(e,s,n,v):w.animate(nt,b),s._triggerScroll(h,n,b)):y.scrollBarVisibility!=="hidden"&&(it=l?"top":"left",a<0||o==="dragging"||(u[0].style[it]=a+"px"),c.customScrolling||(w[0].style[it]=-h+"px"),s._triggerScroll(h,n),s._scrollEnd(e,s,n,v))},_setDragAndContentPosition:function(n,t,i,r,u){var e=this,f=e._fields(),h=f.hbarContainer,c=f.hbarDrag,o=f.vbarContainer,s=f.vbarDrag;(i==="both"||i==="h")&&f.hScrolling&&e._contentDragAnimate("h",t,h,c,r,n,u),(i==="both"||i==="v")&&f.vScrolling&&e._contentDragAnimate("v",t,o,s,r,n,u),f.intervalID>0&&window.clearInterval(f.intervalID),f.intervalID=window.setInterval(function(){e._disableButtonIfNeeded(e)},500)},_scrolling:function(n,t,i){var r=!0;return n&&(i.beforePosition=t.getContentElement().position(),t._beforePosition=i.beforePosition,r=t._trigger("scrolling",null,i),t.customScroll=i.customScroll),r},_scrollEnd:function(n,t,i,r){n&&window.setTimeout(function(){var f=t.getContentElement(),u,n;if(!f.is(":visible"))return;u=t.getContentElement().position(),n={dir:i,beforePosition:t._beforePosition,afterPosition:u},isNaN(r)||(n.newValue=r),t._trigger("scrolled",null,n)},0)},_getDragLength:function(n,t,i,r){var e=n/t,u=i/e,f=r;return u<f?u=f:u+1<i||(u=i-1),Math.round(u)},_needScrollbar:function(n,t){var u=this._hasMode(n,"scrollbar"),i=n.scrollBarVisibility;return u&&(i==="visible"||i==="auto"&&t)},_bindBarEvent:function(n,t,r){var f=this;n.bind("mouseover."+f.widgetName,f,f._scrollerMouseOver);if(!i.fn.draggable)return;t.draggable({axis:r==="h"?"x":"y",start:function(n,t){if(f.options.disabled)return!1;f._isDragging=!0},drag:function(n,t){f._dragging(n,t,f)},containment:"parent",stop:function(n){f._dragStop(n,f,r),i(n.target).removeClass(u),f._isDragging=!1}})},_createBarIfNeeded:function(n,t,u,f,e){if(n){var c=this,y,v=c._fields(),w=u+"barContainer",p=u+"barDrag",o=u==="h",s=e[o?"innerHeight":"innerWidth"](),h=v[w]=i(f),l,a;t.append(h),l=h[0][o?"offsetHeight":"offsetWidth"],s=s-l,y={direction:o?"horizontal":"vertical",targetBarLen:l,contentLength:s};if(c._trigger(o?"hScrollerActivating":"vScrollerActivating",null,y)===!1)return!1;a=v[p]=h.find("."+r),c._bindBarEvent(h,a,u),e[o?"height":"width"](s)}},_setScrollbarPosition:function(n,t,i,r,u,f,e,o,s,h,c){var a=h==="h",v,d,k,nt,w,g,p,b,y,l=t.options.uiCSS;f?(v=r[0][a?"offsetHeight":"offsetWidth"],d=t._getScrollContainerPadding(h),k=a?"top":"left",nt=a?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"},w=a?{top:v+"px",left:null}:{left:v+"px"},g=a?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"},p=a?{top:"",left:null}:{left:""},b=i[a?"innerWidth":"innerHeight"](),o===k?(r.css(nt),i.css(w),a?(r.children(".gcui-superpanel-hbar-buttonleft").removeClass(l.cornerBL).addClass(l.cornerTL),r.children(".gcui-superpanel-hbar-buttonright").removeClass(l.cornerBR).addClass(l.cornerTR),r.removeClass(l.cornerBottom).addClass(l.cornerTop)):(r.children(".gcui-superpanel-vbar-buttontop").removeClass(l.cornerTR).addClass(l.cornerTL),r.children(".gcui-superpanel-vbar-buttonbottom").removeClass(l.cornerBR).addClass(l.cornerBL),r.removeClass(l.cornerRight).addClass(l.cornerLeft))):(r.css(g),i.css(p),a?(r.children(".gcui-superpanel-hbar-buttonleft").removeClass(l.cornerTL).addClass(l.cornerBL),r.children(".gcui-superpanel-hbar-buttonright").removeClass(l.cornerBL).addClass(l.cornerBR),r.removeClass(l.cornerTop).addClass(l.cornerBottom)):(r.children(".gcui-superpanel-vbar-buttontop").removeClass(l.cornerTL).addClass(l.cornerTR),r.children(".gcui-superpanel-vbar-buttonbottom").removeClass(l.cornerBL).addClass(l.cornerBR),r.removeClass(l.cornerLeft).addClass(l.cornerRight))),y=0,e&&(y=u[0][a?"offsetWidth":"offsetHeight"],s==="left"?r.css("right","0px"):s==="right"?r.css("left","0px"):s==="top"?r.css("bottom","0px"):s==="bottom"&&r.css("top","0px")),!a&&e&&(y=0),r[a?"width":"height"](b-d),t._enableDisableScrollBar(h,r,!c)):n.css(a?"left":"top","")},_testScroll:function(n,t,i){var u=t.templateWrapper,e=t.contentWrapper,a=t.stateContainer,y=e.innerWidth(),p=e.innerHeight(),b=t.contentWidth,w=t.contentHeight,r,s,l,h,c,v;t.hScrolling=b>y,t.vScrolling=w>p,r=n.hNeedScrollBar=n._needScrollbar(i.hScroller,t.hScrolling);if(n._createBarIfNeeded(r,a,"h",f,e)===!1)return!1;r&&!t.vScrolling&&(u.css("float","left"),t.contentHeight=u.height(),t.vScrolling=t.contentHeight>p-t.hbarContainer[0].offsetHeight,u.css("float","")),s=n.vNeedScrollBar=n._needScrollbar(i.vScroller,t.vScrolling);if(n._createBarIfNeeded(s,a,"v",o,e)===!1)return!1;if(s&&!t.hScrolling){u.css("float","left"),t.contentWidth=u.width(),t.hScrolling=t.contentWidth>y-t.vbarContainer[0].offsetWidth,u.css("float","");if(t.hScrolling&&!r){r=n.hNeedScrollBar=n._needScrollbar(i.hScroller,t.hScrolling);if(n._createBarIfNeeded(r,a,"h",f,e)===!1)return!1}}l=t.hbarContainer,h=t.vbarContainer,c=i.hScroller.scrollBarPosition,v=i.vScroller.scrollBarPosition,n._setScrollbarPosition(u,n,e,l,h,r,s,c,v,"h",t.hScrolling),n._setScrollbarPosition(u,n,e,h,l,s,r,v,c,"v",t.vScrolling)},_enableDisableScrollBar:function(n,t,i){var u=this.options;n==="v"?(t[i?"addClass":"removeClass"]("gcui-superpanel-vbarcontainer-disabled"),t.find("."+u.uiCSS.stateDefault)[i?"addClass":"removeClass"](u.uiCSS.stateDisabled)):n==="h"&&(t[i?"addClass":"removeClass"]("gcui-superpanel-hbarcontainer-disabled"),t.find("."+u.uiCSS.stateDefault)[i?"addClass":"removeClass"](u.uiCSS.stateDisabled)),t.children("."+r)[i?"hide":"show"]()},_initResizer:function(){var n=this,f=n.options,r=n._fields(),e=r.resizer,t,u;if(!i.fn.resizable)return;!e&&f.allowResize&&(t=f.resizableOptions,u=t.stop,t.stop=function(t){n._resizeStop(t,n),i.isFunction(u)&&u(t)},r.resizer=e=n.element.resizable(t)),!f.allowResize&&r.resizer&&(e.resizable("destroy"),r.resizer=null)},_resizeStop:function(n,t){this.options.autoRefresh||t.paintPanel(!0),t._trigger("resized")},_createAdditionalDom:function(n,t,r){r.attr("tabindex")||(r.attr("tabindex","-1"),t.tabindex=!0);var u=t.stateContainer=i(h),f;t.contentWrapper=u.children(),f=t.templateWrapper=t.contentWrapper.children(),r.contents().each(function(n,r){var u=i(r);if(u.hasClass("gcui-superpanel-header")){t.header=u;return}if(u.hasClass("gcui-superpanel-footer")){t.footer=u;return}f[0].appendChild(r)}),t.header!==undefined&&r.prepend(t.header),r[0].appendChild(u[0]),t.footer!==undefined&&t.footer.insertAfter(u)},_setRounder:function(n,t){var u,i,r,e,f;if(this.options.showRounder){t.addClass(this.options.uiCSS.cornerAll);if(n._rounderAdded)return;u=GcSpread.Sheets.util.browser;if(u.msie)return;i="",r="",u.webkit?(r="WebkitBorderTopLeftRadius",i="WebkitBorderRadius"):u.mozilla?(r="MozBorderRadiusBottomleft",i="MozBorderRadius"):(r="border-top-left-radius",i="border-radius"),e=t.css(r),f=parseInt(e,10),t.css(i,f+1),n._rounderAdded=!0,n._radiusKey=i}else t.removeClass(this.options.uiCSS.cornerAll)},_setInnerElementsSize:function(n,t){var o=n.stateContainer,s=n.contentWrapper,e=0,i,u,f,r;n.header!==undefined&&(e+=n.header.outerHeight()),n.footer!==undefined&&(e+=n.footer.outerHeight()),i=o[0].style,u=t.innerHeight()-e,f=t.innerWidth(),i.display="none",i.height=u+"px",i.width=f+"px",r=s[0].style,r.height=u+"px",r.width=f+"px",i.display=""}}),t.prototype.options=i.extend(!0,{},n.gcuiWidget.prototype.options,new a),i.gcui.registerWidget("superpanel",t.prototype)}})(n.superpanel||(n.superpanel={}))}(gcui||(gcui={})),function(n){(function(t){"use strict";function f(n,t){var r=i.extend(!0,{},n,t);return delete r.constructor,r}var i=jQuery,r,u;t.extendWidgetOptions=f,r=function(r){function u(){r.apply(this,arguments),this._dataOffset=0,this._scrollingState={x:null,y:null,index:0},this._windowResizeTimer=0}return __extends(u,r),u.prototype._createWidget=function(t,i){var u=t&&n.data.util.isClassInstance(t.data)&&!(typeof gcuidatasource=="function"&&t.data instanceof gcuidatasource)&&t.data;u&&delete t.data,r.prototype._createWidget.apply(this,arguments),u&&(t.data=u,this.option("data",u))},u.prototype._create=function(){var f=this,u,e,t,r;if(!this.element.is("table"))throw"invalid markup";this._windowResizeTimer=0,this._dataOffset=0,this._scrollingState={x:null,y:null,index:0},this._initialized=!1,this._destroyed=!1,this._rendered=!1,this._eventUID=undefined,this._dataViewWrapper=undefined,this._originalHtml=undefined,this._originalAttr=undefined,this._originalCssText=undefined,this._autoHeight=undefined,this._autoWidth=undefined,this._renderCounter=0,this.$superPanelHeader=undefined,this.$topPagerDiv=undefined,this.$bottomPagerDiv=undefined,this.$groupArea=undefined,this.__uid=undefined,this._dataView=undefined,this.outerDiv=undefined,this.sketchTable=undefined,this.cellFormatter=undefined,this.rowStyleFormatter=undefined,this.cellStyleFormatter=undefined,this._eventUID=n.grid.getUID(),this._spinnerIsActivated=!1,this.deficientFilters={},u="data"in this.options,e=u&&this.options.data,u&&delete this.options.data,this.options=i.extend(!0,{},this.options),u&&(this.options.data=e),window.applyTouchUtilEvents&&(i=window.applyTouchUtilEvents(i)),i.isFunction(window.gcuiASPNetParseOptions)&&window.gcuiASPNetParseOptions(this.options),this._initialized=!1,this._destroyed=!1,this._field("closestCulture",Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default")),this._dataViewWrapper=new n.grid.dataViewWrapper(this),this._originalHtml=this.element.html(),this._originalAttr={},this._originalCssText=this.element[0].style.cssText,this.element.addClass("gcui-gcuigrid-root"),this.element.wrap('<div class="'+this.options.uiCSS.widget+" gcui-gcuigrid "+this.options.uiCSS.content+" "+this.options.uiCSS.cornerAll+'"></div>'),this.outerDiv=this.element.parent(),t=this.element[0].style.height,r=this.element[0].style.width,t&&this.outerDiv.css("height",t),this._autoHeight=t==""||t=="auto",r&&this.outerDiv.css("width",this.element[0].style.width),this._autoWidth=r==""||r=="auto",this.element.css({height:"",width:""}),this.options.disabled&&this.disable(),this.cellFormatter=new n.grid.cellFormatterHelper,this.rowStyleFormatter=new n.grid.rowStyleFormatterHelper(this),this.cellStyleFormatter=new n.grid.cellStyleFormatterHelper(this),this._field("viewRenderBounds",{start:0,end:0}),this._allowVirtualScrolling()&&(this._field("viewRenderBounds").start=this._scrollingState.index,this._serverSideVirtualScrolling()&&(this._dataOffset=this._scrollingState.index)),this.element.addVisibilityObserver&&this.element.addVisibilityObserver(function(){f._initialized&&!f._destroyed&&f.setSize()},"gcuigrid"),this._renderCounter=0},u.prototype._destroy=function(){var t,r=this;try{this._view().dispose(),this._detachEvents(!0),(t=this._field("resizer"))&&t.dispose(),(t=this._field("frozener"))&&t.dispose(),(t=this._field("selectionui"))&&t.dispose(),(t=this._field("dragndrop"))&&t.dispose(),this._dataViewWrapper.dispose(),n.grid.remove$dataByPrefix(this.element,this._data$prefix),this.element.removeVisibilityObserver&&this.element.removeVisibilityObserver(),this.element.insertBefore(this.outerDiv),this.outerDiv.remove(),this.element.html(this._originalHtml),i.each(this._originalAttr,function(n,t){t===undefined?r.element.removeAttr(n):r.element.attr(n,t)}),this.element.removeClass("gcui-gcuigrid-root"),this.element[0].style.cssText=this._originalCssText}finally{this._destroyed=!0}},u.prototype._init=function(){this.$superPanelHeader=null,this.$topPagerDiv=null,this.$bottomPagerDiv=null,this.$groupArea=null,this._field("closestCulture",Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default")),this.options.data||(this._field("thead")||this._field("thead",n.grid.readTableSection(this.element,1)),this._field("tfoot")||this._field("tfoot",n.grid.readTableSection(this.element,3))),this._initialized=this._initialized||!1,this.ensureControl(!0)},u.prototype._setOption=function(n,t){var f=this["_preset_"+n],i=this.options[n],e,u;f!==undefined&&(t=f.apply(this,[t,i])),e=t!==i,r.prototype._setOption.apply(this,[n,t]),e&&(u=this["_postset_"+n],u!==undefined&&u.apply(this,[t,i]))},u.prototype.columns=function(){return this._field("columns")||[]},u.prototype.currentCell=function(t,i,r){var u,e=this._view(),f=this._rows();if(arguments.length===0)return u=this._field("currentCell"),u||this._field("currentCell",u=n.grid.cellInfo.outsideValue),u;else{u=typeof t!="number"?t._clone():new n.grid.cellInfo(t,i);if(!u.isEqual(n.grid.cellInfo.outsideValue)){if(!u._isValid())throw"invalid arguments";u._clip(this._getDataCellsRange());if(u.rowIndex()>=0)if(!(e._getRowInfo(f.item(u.rowIndex())).type&n.grid.rowType.data))return}return u._setGridView(this),this._changeCurrentCell(null,u,{changeSelection:r||!1,setFocus:!1}),this._field("currentCell")}},u.prototype.data=function(){return this._dataViewWrapper.dataView().getSource()},u.prototype.dataView=function(){return this._dataViewWrapper.dataView()},u.prototype.doRefresh=function(t){var r,o;i.isPlainObject(t)||(t={});var f,u=this,h=n.grid.EXPANDO,e=t&&t.virtualScrollData;if(!this._initialized)try{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.getFieldsInfo(),!0,!0)}catch(s){throw s;}finally{this._ownerise(!0),this._initialized=!0}e||(this._rebuildLeaves(),r=this._dataViewWrapper.data(),o=this._dataViewWrapper.dataView(),i.each(this._field("leaves"),function(){this._totalsValue=r.totals?r.totals[this.dataKey]:undefined}),this.sketchTable=[],r.data&&r.data.length?(f=this._field("leaves"),i.each(r.data,function(n,t){u.sketchTable.push(u._buildSketchRow(t,f))})):r.emptyData&&(f=this._field("visibleLeaves"),i.each(r.emptyData,function(n,t){u.sketchTable.push(u._buildSketchRowEmptyDataItem(t,f,n===r.emptyData.length-1))}))),this._onRendering(t),e?this._refreshVirtual(t):this._refresh(t),this._onRendered(t),t&&i.isFunction(t.afterRefresh)&&t.afterRefresh.apply(this,[t])},u.prototype.beginEdit=function(){return this._beginEditInternal(null)},u.prototype.endEdit=function(){return this._endEditInternal(null)},u.prototype.ensureControl=function(t,r){this._loading(),i.isPlainObject(r)||(r={data:null,afterRefresh:null,beforeRefresh:null}),r._gridMarker=!0,this._initialized?this._convertWidgetsToOptions():(this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.isDataLoaded()&&this._dataViewWrapper.getFieldsInfo(),this._dataViewWrapper.isDataLoaded(),!1),this._dataViewWrapper.isOwnDataView()||new n.grid.settingsManager(this).MapDVToWG()),this._ownerise(!0),this._initialized&&r&&i.isFunction(r.beforeRefresh)&&r.beforeRefresh.apply(this),this._field("allowVirtualScrolling",null),t===!0?this._dataViewWrapper.load(r):(this.doRefresh(r),this._loaded())},u.prototype.getCellInfo=function(n){var t=null;return n&&(n=this._findUntilOuterDiv(n,{td:!0,th:!0}))&&(t=this._view().getAbsoluteCellInfo(n)),t},u.prototype.getFilterOperatorsByDataType=function(t){return new n.grid.filterOperatorsCache(this).getByDataType(t||"string")},u.prototype.pageCount=function(){return this._customPagingEnabled()?Math.ceil(this.options.totalRows/this.options.pageSize)||1:this.options.allowPaging?this._dataViewWrapper.dataView().pageCount():1},u.prototype._serverShaping=function(){return!1},u.prototype._pageIndexForDataView=function(){return this.options.pageIndex},u.prototype.setSize=function(n,t){var r=this._view(),e={type:"",hScrollValue:null,vScrollValue:null},f=this.outerDiv,u=this._field("frozener"),o=this._field("visibleLeaves"),s=[];r&&r.getScrollValue&&(e=r.getScrollValue()),(n||n===0)&&(this._autoWidth=!1,f.width(n)),(t||t===0)&&(this._autoHeight=!1,f.height(t)),i.each(o,function(n,t){var f=r.getHeaderCell(n),u=r.getJoinedCols(n);i(f).css("width",""),i.each(u,function(n,t){i(t).css("width","")})}),this._view().updateSplits(e),u&&u.refresh()},u.prototype.selection=function(){var t=this._field("selection");return t||this._field("selection",t=new n.grid.selection(this)),t},u.prototype._onDataViewCurrentPositionChanged=function(n,t){var i=this._currentCellFromDataView(this.currentCell().cellIndex()),r=this.selection();i=this.currentCell(i,null,!0)},u.prototype._resetDataProperties=function(){this.options.pageIndex=0;var n=this._field("viewRenderBounds");n.start=n.end=0},u.prototype._onDataViewLoading=function(){this._activateSpinner(),this._trigger("dataLoading")},u.prototype._onDataViewReset=function(t){new n.grid.settingsManager(this).MapDVToWG(),this._trigger("dataLoaded"),this.doRefresh(t),this._loaded()},u.prototype._onDataViewLoaded=function(){},u.prototype._loading=function(){this._activateSpinner(),this._trigger("loading")},u.prototype._loaded=function(){this._deactivateSpinner(),this._trigger("loaded")},u.prototype._buildSketchRow=function(t,i){for(var f,s,c,l,r=[],o=n.data.Expando.getFrom(t.values,!1),u=o?o[n.grid.EXPANDO]:null,e=0,h=i.length;e<h;e++)f=i[e],n.grid.validDataKey(f.dataKey)&&(s=u&&u.cellsAttributes?u.cellsAttributes[f.dataKey]:{},c=this._dataViewWrapper.getValue(t.values,f.dataKey),r.push({value:this.parse(f,c),__attr:s||{},__style:{}}));return r.originalRowIndex=t.originalRowIndex,r.rowType=n.grid.rowType.data,t.originalRowIndex%2!=0&&(r.rowType|=n.grid.rowType.dataAlt),r.__style={},r.__attr=u&&u.rowAttributes?u.rowAttributes:{},r},u.prototype._buildSketchRowEmptyDataItem=function(t,i,r){for(var u=[],e=i.length,f=0,o=t.length;f<o;f++)u.push({html:t[f],__attr:{colSpan:e>0&&r?e:1},__style:{}});return u.rowType=n.grid.rowType.emptyDataRow,u.__style={},u.__attr={},u},u.prototype._prepareColumnOptions=function(r,u,f,e,o){n.grid.traverse(r,function(n){n.isBand=i.isArray(n.columns)||n.clientType==="c1band",n._originalDataKey=n.dataKey,n._originalHeaderText=n.headerText}),(new n.grid.bandProcessor).getVisibleHeight(r,!0);var h=[],l=this._originalHeaderRowData(),c=this._originalFooterRowData(),a=(u||"").toLowerCase(),s=this;e&&n.grid.columnsGenerator.generate(a,f,r),n.grid.setTraverseIndex(r),n.grid.traverse(r,function(r){r.isBand=i.isArray(r.columns)||r.clientType==="c1band",n.grid.shallowMerge(r,t.c1basefield.prototype.options),r.isBand?r.clientType="c1band":(n.grid.shallowMerge(r,t.c1field.prototype.options),r.groupInfo=r.groupInfo||{},n.grid.shallowMerge(r.groupInfo,t.c1field.prototype.options.groupInfo),r.clientType||(r.clientType="c1field")),r.isLeaf&&!r.isBand&&h.push(r)}),this._field("leaves",h),e&&i.each(h,i.proxy(function(t,r){var u=typeof r.dataKey=="number"?r.dataKey:t;(a==="merge"||r.dynamic===!0)&&r.headerText===undefined&&(s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&l&&u<l.length?r.headerText=i.trim(l[u]):n.grid.validDataKey(r.dataKey)&&(r.headerText=""+r.dataKey)),s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&c&&u<c.length&&(r._footerTextDOM=i.trim(c[u]))},this))},u.prototype._rebuildLeaves=function(){var r=[],u=[],t;this._showRowHeader()&&(t=n.grid.createDynamicField({clientType:"c1basefield",dataIndex:-1,travIdx:-1,parentVis:!0,allowMoving:!1,allowSizing:!1,allowSort:!1,isRowHeader:!0}),t.owner=this,r.push(t)),i.each(this.options.columns,function(n,t){r.push(t)}),this._columnsHeadersTable((new n.grid.bandProcessor).generateSpanTable(r,u)),this._field("leaves",u),this._onLeavesCreated()},u.prototype._onLeavesCreated=function(){var e=this._field("leaves"),f=this._dataViewWrapper.getFieldsInfo(),t,r=0,u=0,o=this;this._field("visibleLeaves",i.grep(e,function(e,o){return e.leavesIdx=o,e.dataIndex=n.grid.validDataKey(e.dataKey)?r++:-1,e.isBand||(t=f[e.dataKey],t&&(e._underlyingDataType=t.type,e._underlyingDataFormatString=t.format),i.isFunction(e.dataParser)&&(e.dataParser=new e.dataParser)),e.parentVis?(e.visLeavesIdx=u++,!0):!1}))},u.prototype._allowVirtualScrolling=function(){var n=this._field("allowVirtualScrolling");return n||(n=this._field("allowVirtualScrolling",!this.options.allowPaging&&this.options.allowVirtualScrolling&&this.options.staticRowIndex<0&&this.options.scrollMode!=="none"&&!this._hasMerging())),n},u.prototype._dragndrop=function(t){typeof t=="undefined"&&(t=!1);var i=this._field("dragndrop");return!i&&t&&this._field("dragndrop",i=new n.grid.uiDragndrop(this)),i},u.prototype._headerRows=function(){return this._view().headerRows()},u.prototype._filterRow=function(){return this._view().filterRow()},u.prototype._rows=function(){return this._view().bodyRows()},u.prototype._localizeFilterOperators=function(t){var u=this,r=new n.grid.filterOperatorsCache(this);i.each(t,function(n,t){if(t.name){var i=r.getByName(t.name);i&&(i.displayName=t.displayName)}})},u.prototype._selectionui=function(t){var i=this._field("selectionui");return!i&&t&&this._field("selectionui",i=new n.grid.uiSelection(this)),i},u.prototype._postset_allowColMoving=function(n,t){var r=this,u;i.each(this.columns(),function(t,i){n?r._dragndrop(!0).attach(i):r._dragndrop(!0).detach(i)}),u=this._field("groupedWidgets"),u&&i.each(u,function(t,i){n?r._dragndrop(!0).attach(i):r._dragndrop(!0).detach(i)})},u.prototype._postset_allowSorting=function(n,t){this.ensureControl(!1)},u.prototype._postset_columns=function(n,t){this._initialized=!1,this.ensureControl(!0)},u.prototype._postset_allowPaging=function(n,t){this.ensureControl(!0)},u.prototype._postset_culture=function(n,t){throw"read-only";},u.prototype._postset_customFilterOperators=function(n,t){var i=this._dataViewWrapper.dataView()},u.prototype._postset_data=function(t,r){this._ownerise(!1),n.grid.traverse(this.options.columns,function(n,t){if(n.dynamic){var r=i.inArray(n,t);r<0||t.splice(r,1)}else n.dataKey=n._originalDataKey,n.headerText=n._originalHeaderText}),this._initialized=!1,this._dataViewWrapper&&this._dataViewWrapper.dispose(),this._dataViewWrapper=new n.grid.dataViewWrapper(this),this.ensureControl(!0)},u.prototype._postset_disabled=function(t,i){var u=this,r=this._view();n.grid.iterateChildrenWidgets(this.outerDiv,function(n,i){i!==u&&i.option("disabled",t)}),r&&r.ensureDisabledState()},u.prototype._postset_groupIndent=function(n,t){this.ensureControl(!1)},u.prototype._postset_groupAreaCaption=function(n,t){var i=this._groupedColumns();!this.$groupArea||i&&i.length||this.$groupArea.html(n||"&nbsp;")},u.prototype._postset_highlightCurrentCell=function(n,t){var i=this.currentCell();i&&i._isValid()&&this._highlightCellPosition(i,n)},u.prototype._preset_pageIndex=function(n,t){if(isNaN(n))throw"out of range";var r=this.pageCount(),u=function(n){return n>r-1&&(n=r-1),n<0&&(n=0),n},i;return n=u(n),this.options.allowPaging&&n!==t&&(i={newPageIndex:n},n=this._onPageIndexChanging(i)?u(i.newPageIndex):t),n},u.prototype._postset_pageIndex=function(n,t){if(this.options.allowPaging){var i={newPageIndex:n};this._customPagingEnabled()?(this._convertWidgetsToOptions(),this._onPageIndexChanged(i)):this.ensureControl(!0,{afterRefresh:function(){this._onPageIndexChanged(i)}})}},u.prototype._preset_pageSize=function(n,t){if(isNaN(n))throw"out of range";return n>0||(n=1),n},u.prototype._postset_pageSize=function(n,t){this._resetDataProperties(),this.options.allowPaging&&!this._customPagingEnabled()&&this.ensureControl(!0)},u.prototype._postset_pagerSettings=function(n,t){this.ensureControl(!1)},u.prototype._postset_scrollMode=function(n,t){this.ensureControl(!1)},u.prototype._postset_selectionMode=function(t,i){var u=this.selection(),r=this.currentCell(),f=this.selection().selectedCells().length();u.beginUpdate(),u.clear(),r&&r._isValid()&&f&&u._selectRange(new n.grid.cellInfoRange(r,r),!1,!1,n.grid.cellRangeExtendMode.none,null),u.endUpdate(),this._view().toggleDOMSelection(t==="none")},u.prototype._postset_showFilter=function(n,t){this.ensureControl(!1)},u.prototype._postset_showGroupArea=function(n,t){this.ensureControl(!1)},u.prototype._postset_showRowHeader=function(n,t){this.ensureControl(!1)},u.prototype._postset_staticRowIndex=function(){this.options.scrollMode!=="none"&&this.ensureControl(!1)},u.prototype._postset_staticColumnIndex=function(){this.options.scrollMode!=="none"&&this.ensureControl(!1)},u.prototype._postset_allowVirtualScrolling=function(n,t){this.ensureControl(!1)},u.prototype._preset_allowVirtualScrolling=function(n,t){if(isNaN(n)||n<0)throw"out of range";return n},u.prototype._activateSpinner=function(){if(!this._spinnerIsActivated){var n=this.options.uiCSS,t=this.outerDiv.append('<div class="gcui-gcuigrid-overlay '+n.overlay+'"></div><span class="gcui-gcuigrid-loadingtext '+n.content+" "+n.cornerAll+'"><span class="'+n.icon+' ui-icon-clock"></span>'+this.options.loadingText+"</span>").find("> .gcui-gcuigrid-loadingtext");t.position({my:"center",at:"center center",of:this.outerDiv,collision:"none"}),this._spinnerIsActivated=!0}},u.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0},u.prototype._deactivateSpinner=function(){if(this._spinnerIsActivated)try{this.outerDiv.find("> .gcui-gcuigrid-overlay, > .gcui-gcuigrid-loadingtext").remove()}finally{this._spinnerIsActivated=!1}},u.prototype._columnWidgetsFactory=function(n,t){var r,u=t.clientType;!u&&t.isBand&&(u="c1band"),t=i.extend({},t,{disabled:this.options.disabled});try{i.data(n[0],"gcuigridowner",this);switch(u){case"c1basefield":r=n.c1basefield(t);break;case"c1band":r=n.c1band(t);break;default:r=n.c1field(t)}}finally{i.removeData(n[0],"gcuigridowner")}return r},u.prototype._convertWidgetsToOptions=function(){this._initialized&&this._mergeWidgetsWithOptions&&(this._ownerise(!1),this._widgetsToOptions(),this._ownerise(!0))},u.prototype._field=function(t,i){return n.grid.dataPrefix(this.element,this._data$prefix,t,i)},u.prototype._removeField=function(n){var t=this._data$prefix+n;this.element.removeData(t)},u.prototype._prepareTotalsRequest=function(t){var u=this._field("leaves"),r,f;return!u||!this.options.showFooter?[]:r=i.map(u,function(i,r){return!i.isBand&&n.grid.validDataKey(i.dataKey)&&i.aggregate&&i.aggregate!=="none"?t?[{column:i,aggregate:i.aggregate}]:[{dataKey:i.dataKey,aggregate:i.aggregate}]:null})},u.prototype._widgetsToOptions=function(){var t=n.grid.flatten(this.options.columns);i.each(this.columns(),function(n,r){delete r.options.columns;var u=t[r.options.travIdx];i.extend(!0,u,r.options),u.filterValue=r.options.filterValue,u.filterOperator=r.options.filterOperator})},u.prototype._recreateColumnWidgets=function(){i.each(this.columns(),function(n,t){t.destroy()});var s=[],e=this._headerRows(),t,u,h,r,c,o,f;if(e&&e.length())for(t=[],n.grid.traverse(this.options.columns,function(n){n.parentVis&&t.push(n)}),u=0,h=t.length;u<h;u++)r=t[u],c=e.item(r.thY),o=n.grid.rowAccessor.getCell(c,r.thX),f=this._columnWidgetsFactory(i(o),r),s.push(f.data(n.grid.widgetName(f)));this._field("columns",s)},u.prototype._groupedColumns=function(n){var t;n=!(t=this._field("groupedColumns"))||n;if(n){t=[];var f=this._field("leaves")||[],r=!1,u=function(n){return n.groupInfo&&n.groupInfo.position&&n.groupInfo.position!=="none"};i.each(f,function(n,i){u(i)?(r=r||i.groupedIndex===undefined,r||t.push(i)):delete i.groupedIndex}),r?i.each(f,function(n,i){u(i)&&(i.groupedIndex=t.length,t.push(i))}):(t.sort(function(n,t){return n.groupedIndex-t.groupedIndex}),i.each(t,function(n,t){t.groupedIndex=n})),this._field("groupedColumns",t)}return t||[]},u.prototype._ownerise=function(t){if(t){var i=this;n.grid.traverse(this.options.columns,function(n){n.owner=i;var t,r,u;if(t=n.groupInfo){t.owner=n;if(t.expandInfo)for(r=0,u=t.expandInfo.length;r<u;r++)t.expandInfo[r].owner=t}})}else n.grid.traverse(this.options.columns,function(n){delete n.owner;var t,i,r;if(t=n.groupInfo){delete t.owner;if(t.expandInfo)for(i=0,r=t.expandInfo.length;i<r;i++)delete t.expandInfo[i].owner}})},u.prototype._ensureRenderBounds=function(n){var t=this._totalRowsCount();return n.start<0&&(n.start=0),n.start=Math.min(n.start,t-1),n.end<0&&(n.end=0),n.end=Math.min(n.end,t-1),n},u.prototype._refresh=function(t){(new n.grid.grouper).group(this,this.sketchTable,this._field("leaves")),(new n.grid.merger).merge(this.sketchTable,this._field("visibleLeaves"));var i=this._field("viewRenderBounds");this._ensureRenderBounds(i),this.options.scrollMode!=="none"?this._field("view",new n.grid.fixedView(this,this._field("viewRenderBounds"))):this._field("view",new n.grid.flatView(this,this._field("viewRenderBounds"))),this._render(),this._ownerise(!1),this._recreateColumnWidgets(),this._ownerise(!0),this.options.allowPaging&&(this.$topPagerDiv&&this.$topPagerDiv.gcuipager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5),this.$bottomPagerDiv&&this.$bottomPagerDiv.gcuipager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5))},u.prototype._refreshVirtual=function(n){var t=n.virtualScrollData,i={top:0,bottom:0};t.data&&(i=this._processVirtualData(t)),this._updateRowInfos(t,i),this._renderVirtualIntoView(t)},u.prototype._updateRowInfos=function(n,t){var r=this._field("viewRenderBounds"),s=this._view(),e=n.newBounds,h=this._view().bodyRows(),f,u,o,i;switch(n.mode){case"reset":break;case"overlapBottom":for(f={start:e.start-r.start,end:r.end-r.start},o=e.start-r.start,u=f.start;u<=f.end;u++)i=s._getRowInfo(h.item(u),!1),i.sectionRowIndex-=o,i.dataItemIndex+=t.top,s._setRowInfo(i.$rows,i);break;case"overlapTop":for(f={start:r.start-r.start,end:e.end-r.start},o=r.start-e.start,u=f.start;u<=f.end;u++)i=s._getRowInfo(h.item(u),!1),i.sectionRowIndex+=o,i.dataItemIndex+=t.top,s._setRowInfo(i.$rows,i);break}},u.prototype._renderVirtualIntoView=function(t){var e=this._field("viewRenderBounds"),u=this._view(),o=function(t){return t.rowType&n.grid.rowType.data?t.originalRowIndex:-1},f,i,r,s;switch(t.mode){case"reset":for(u._clearBody(),i=t.newBounds.start;i<=t.newBounds.end;i++)r=this.sketchTable[i-this._dataOffset],u._insertBodyRow(r,-1,o(r),i);u._rebuildOffsets();break;case"overlapBottom":for(f={start:t.newBounds.start,end:e.end},i=0;i<f.start-e.start;i++)u._removeBodyRow(0,!1);for(i=f.end+1;i<=t.newBounds.end;i++)r=this.sketchTable[i-this._dataOffset],u._insertBodyRow(r,-1,o(r),i);break;case"overlapTop":for(f={start:e.start,end:t.newBounds.end},i=0;i<e.end-t.newBounds.end;i++)u._removeBodyRow(f.end-f.start+1,!1);for(s=0,i=t.newBounds.start;i<e.start;i++)r=this.sketchTable[i-this._dataOffset],u._insertBodyRow(r,s++,o(r),i);break;default:break}},u.prototype._processVirtualData=function(n){var r=this._dataViewWrapper,e=r.dataView().getSource(),u,s=this._field("leaves"),t,h,o,i=0,f={top:0,bottom:0},l,c=this._serverSideVirtualScrollingMargin();switch(n.mode){case"reset":for(this.sketchTable.splice(0,this.sketchTable.length),r._unsafeSplice(0,e.length),this._dataOffset=n.request.index,t=0;t<n.data.length;t++)r._unsafePush(u=n.data[t]),this.sketchTable.push(this._buildSketchRow(r._wrapDataItem(u,t),s));break;case"overlapBottom":for(t=0;t<n.data.length;t++)r._unsafePush(u=n.data[t]),this.sketchTable.push(this._buildSketchRow(r._wrapDataItem(u,e.length-1),s));f.bottom=n.data.length;break;case"overlapTop":for(t=n.data.length-1;t>=0;t--)r._unsafeSplice(0,0,u=n.data[t]),this.sketchTable.splice(0,0,this._buildSketchRow(r._wrapDataItem(u,t),s));this._dataOffset=n.request.index,f.top=n.data.length;break}for(h=this._ensureRenderBounds({start:n.newBounds.start,end:n.newBounds.end}),o={start:this._dataOffset,end:this._dataOffset+e.length-1},i=o.end-h.end-c,i>0&&(f.bottom-=i,r._unsafeSplice(e.length-i,i),this.sketchTable.splice(this.sketchTable.length-i,i)),i=h.start-o.start-c,i>0&&(f.top-=i,r._unsafeSplice(0,i),this.sketchTable.splice(0,i),this._dataOffset+=i),t=0;t<this.sketchTable.length;t++)this.sketchTable[t].originalRowIndex=t;return r._refreshSilent(),f},u.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===!0},u.prototype._isMobileEnv=function(){return this._isMobile},u.prototype._render=function(){var u=this._view(),n=this.options,r=this.options.uiCSS,t;u.render(),t=this.outerDiv,n.scrollMode!=="none"&&(t=this.outerDiv.find("div.gcui-gcuigrid-scroller:first")),this.$superPanelHeader=null,this.$topPagerDiv&&(this.$topPagerDiv.data("gcui-gcuipager")&&this.$topPagerDiv.gcuipager("destroy"),this.$topPagerDiv.remove()),this.$topPagerDiv=null,this._needToCreatePagerItem()&&(n.pagerSettings.position==="top"||n.pagerSettings.position==="topAndBottom")&&(this.$topPagerDiv||(t.prepend(this.$superPanelHeader=i('<div class="gcui-superpanel-header"></div>')),this.$superPanelHeader.prepend(this.$topPagerDiv=i('<div class="gcui-gcuigrid-header '+r.header+" "+r.cornerTop+'"></div>')))),n.showGroupArea?this._processGroupArea(t):this.$groupArea=null,this.$bottomPagerDiv&&(this.$bottomPagerDiv.data("gcui-gcuipager")&&this.$bottomPagerDiv.gcuipager("destroy"),this.$bottomPagerDiv.remove()),this.$bottomPagerDiv=null,this._needToCreatePagerItem()&&(n.pagerSettings.position==="bottom"||n.pagerSettings.position==="topAndBottom")&&(this.$bottomPagerDiv||t.append(this.$bottomPagerDiv=i('<div class="gcui-gcuigrid-footer gcui-superpanel-footer '+r.stateDefault+" "+r.cornerBottom+'"></div>')))},u.prototype._processGroupArea=function(n){var t=this,u=this._groupedColumns(),r=[];this.$groupArea=i('<div class="'+this.options.uiCSS.content+" "+this.options.uiCSS.helperClearFix+'"></div>'),u.length>0?i.each(u,function(n,u){var f=i('<a href="#"></a>').appendTo(t.$groupArea);try{i.data(f[0],"gcuigridowner",t),f.c1groupedfield(i.extend({},{allowMoving:u.allowMoving,allowSort:u.allowSort,dataIndex:u.dataIndex,headerText:u.headerText,isBand:u.isBand,isLeaf:u.isLeaf,linearIdx:u.linearIdx,parentIdx:u.parentIdx,sortDirection:u.sortDirection,travIdx:u.travIdx,groupedIndex:u.groupedIndex},{disabled:t.options.disabled}))}finally{i.removeData(f[0],"gcuigridowner")}r.push(f.data("gcui-c1groupedfield"))}):this.$groupArea.addClass("gcui-gcuigrid-group-area").css("padding",0).html(this.options.groupAreaCaption||"&nbsp;"),this._field("groupedWidgets",r),this.$superPanelHeader||n.prepend(this.$superPanelHeader=i('<div class="gcui-superpanel-header"></div>')),this.$superPanelHeader.prepend(this.$groupArea),this._dragndrop(!0).attachGroupArea(this.$groupArea)},u.prototype._pagerSettings2PagerWidgetSettings=function(){return i.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:i.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:i.proxy(this._onPagerWidgetPageIndexChanged,this)})},u.prototype._showRowHeader=function(){return this.options.showRowHeader===!0&&this.options.staticColumnsAlignment!=="right"},u.prototype._attachEvents=function(){var t=this._view(),r=t.focusableElement(),n=this;r.bind("keydown."+this.widgetName,i.proxy(this._onKeyDown,this)),r.bind("keypress."+this.widgetName,i.proxy(this._onKeyPress,this)),i.each(t.subTables(),function(t,r){var u=r.element();u&&(u.tHead&&i(u.tHead).bind("click."+n.widgetName,i.proxy(n._onClick,n)),u.tBodies.length&&i(u.tBodies[0]).bind("click."+n.widgetName,i.proxy(n._onClick,n)).bind("dblclick."+n.widgetName,i.proxy(n._onDblClick,n)).bind("mousemove."+n.widgetName,i.proxy(n._onMouseMove,n)).bind("mouseout."+n.widgetName,i.proxy(n._onMouseOut,n)))}),i(window).bind("resize."+this.widgetName+"."+this._eventUID,i.proxy(this._onWindowResize,this))},u.prototype._detachEvents=function(n){var r=this._view(),u=this,t;this._windowResizeTimer=0,i(window).unbind("resize."+this.widgetName+"."+this._eventUID),r&&(t=r.focusableElement(),t.unbind("keydown."+this.widgetName),t.unbind("keypress."+this.widgetName),i.each(r.subTables(),function(){var n=this.element();n&&(n.tHead&&i(n.tHead).unbind("."+u.widgetName),n.tBodies.length&&i(n.tBodies[0]).unbind("."+u.widgetName))}))},u.prototype._handleSort=function(t,r){var o=this.options.columns,e=t.travIdx,f,u;t&&this.options.allowSorting&&(f=t.sortDirection==="none"?"ascending":t.sortDirection==="ascending"?"descending":"ascending",u={column:t,sortDirection:f,sortCommand:t.dataKey+" "+(f==="ascending"?"asc":"desc")},this._onColumnSorting(u)&&(t.sortDirection=u.sortDirection,r?t.sortOrder=this._customSortOrder++:(this._customSortOrder=1e3,i.each(this.columns(),function(n,t){t.options.sortOrder=0,t.options.travIdx===e||t.options.groupInfo&&t.options.groupInfo.position!=="none"||(t.options.sortDirection="none")}),n.grid.traverse(o,function(n){n.sortOrder=0,n.travIdx===e||n.groupInfo&&n.groupInfo.position!=="none"||(n.sortDirection="none")})),u={column:t,sortDirection:t.sortDirection,sortCommand:t.dataKey+" "+(t.sortDirection==="ascending"?"asc":"desc")},this._customPagingEnabled()?(this._convertWidgetsToOptions(),this._onColumnSorted(u)):this.ensureControl(!0,{afterRefresh:function(){this._onColumnSorted(u)}})))},u.prototype._handleDragnDrop=function(t,r,u,f,e){var s=n.grid.getColumnByTravIdx(this.options.columns,t),o=n.grid.getColumnByTravIdx(this.options.columns,r),c=f?"groupArea":"columns",h=e?"groupArea":"columns";e?this._onColumnGrouping({drag:s.found,drop:o?o.found:null,dragSource:c,dropSource:h,at:u})&&this.ensureControl(!0,{beforeRefresh:function(){if(o)switch(u){case"left":s.found.groupedIndex=o.found.groupedIndex-.5;break;case"right":s.found.groupedIndex=o.found.groupedIndex+.5;break}else s.found.groupedIndex=0;f||i.extend(!0,s.found,{groupInfo:{position:"header"}})},afterRefresh:function(){this._onColumnGrouped({drag:s.found,drop:o?o.found:null,dragSource:c,dropSource:h,at:u})}}):this._onColumnDropping({drag:s.found,drop:o.found,at:u})&&this.ensureControl(!1,{beforeRefresh:function(){s.at.splice(s.found.linearIdx,1);switch(u){case"left":s.at===o.at&&s.found.linearIdx<o.found.linearIdx?o.at.splice(o.found.linearIdx-1,0,s.found):o.at.splice(o.found.linearIdx,0,s.found);break;case"right":s.at===o.at&&s.found.linearIdx<o.found.linearIdx?o.at.splice(o.found.linearIdx,0,s.found):o.at.splice(o.found.linearIdx+1,0,s.found);break;case"center":o.found.columns.push(s.found);break}n.grid.setTraverseIndex(this.options.columns)},afterRefresh:function(){this._onColumnDropped({drag:s.found,drop:o.found,at:u})}})},u.prototype._handleFilter=function(t,i,r){var e=new n.grid.filterOperatorsCache(this).getByName(i),u,o,f;e&&(e.arity>1?(u=this.parse(t.options,r),o=u!==null&&(n.grid.getDataType(t.options)==="string"||!isNaN(u))):o=!0,o&&(f={column:t.options,operator:e.name,value:u},this._onColumnFiltering(f)&&(t.options.filterValue=f.value,t.options.filterOperator=f.operator,this._resetDataProperties(),this._customPagingEnabled()?(this._convertWidgetsToOptions(),this._onColumnFiltered({column:t.options})):this.ensureControl(!0,{afterRefresh:function(){this._onColumnFiltered({column:t.options})}}))))},u.prototype._handleUngroup=function(t){var u=n.grid.getColumnByTravIdx(this.options.columns,t),r;u&&u.found&&(r=u.found,this._onColumnUngrouping({column:r})&&this.ensureControl(!0,{beforeRefresh:function(){delete r.groupedIndex,i.extend(!0,r,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:r})}}))},u.prototype._onVirtualScrolling=function(n,t,r,u,f,e){this.ensureControl(this._serverSideVirtualScrolling(),{virtualScrollData:{newBounds:n,request:t,mode:r,data:e},afterRefresh:function(n){var t=this._field("viewRenderBounds");i.extend(t,n.virtualScrollData.newBounds),this._view()._adjustRowsHeights(),f(u)}})},u.prototype._handleVirtualScrolling=function(n,t){var e=this._field("viewRenderBounds"),i=this._ensureRenderBounds({start:n,end:n+this.options.pageSize-1}),f=this._ensureRenderBounds({start:this._dataOffset,end:this._dataOffset+this._dataViewWrapper.dataView().count()-1}),r=null,u;i.start>e.end||i.end<e.start?u="reset":i.start>e.start?u="overlapBottom":i.start<e.start&&(u="overlapTop");if(this._serverSideVirtualScrolling())switch(u){case"reset":r={index:n,maxCount:this.options.pageSize};break;case"overlapBottom":i.end>f.end&&(r={index:f.end+1,maxCount:this.options.pageSize});break;case"overlapTop":i.start<f.start&&(r={index:Math.max(0,f.start-this.options.pageSize),maxCount:0},r.maxCount=f.start-r.index);break}u!=="none"&&this._onVirtualScrolling(i,r,u,n,t)},u.prototype._serverSideVirtualScrolling=function(){return!1},u.prototype._serverSideVirtualScrollingMargin=function(){return this.options.pageSize*2},u.prototype._onColumnDropping=function(n){return this._trigger("columnDropping",null,n)},u.prototype._onColumnDropped=function(n){this._trigger("columnDropped",null,n)},u.prototype._onColumnGrouping=function(n){return this._trigger("columnGrouping",null,n)},u.prototype._onColumnGrouped=function(n){this._trigger("columnGrouped",null,n)},u.prototype._onColumnUngrouping=function(n){return this._trigger("columnUngrouping",null,n)},u.prototype._onColumnUngrouped=function(n){this._trigger("columnUngrouped",null,n)},u.prototype._onColumnFiltering=function(n){return this._trigger("filtering",null,n)},u.prototype._onColumnFiltered=function(n){this._trigger("filtered",null,n)},u.prototype._onFilterOperatorsListShowing=function(n){this._trigger("filterOperatorsListShowing",null,n)},u.prototype._onColumnSorting=function(n){return this._trigger("sorting",null,n)},u.prototype._onColumnSorted=function(n){this._trigger("sorted",null,n)},u.prototype._onCurrentCellChanged=function(t,i){var h=this.options,r=this.currentCell(),s=this._gridDataRowIndexToDataView(r.rowIndex()),f;this._dataViewWrapper.currentPosition(s),h.scrollMode!=="none"&&r&&!r.isEqual(n.grid.cellInfo.outsideValue)&&this._view().scrollTo(r),this._trigger("currentCellChanged"),f=t&&(t.type||"").toLowerCase()||"";if(i.changeSelection){var u=this.selection(),e=this.options.selectionMode.toLowerCase(),o=i.selectionExtendMode||n.grid.cellRangeExtendMode.none;u.beginUpdate();if(f){if(r._isValid())switch(f){case"click":t.shiftKey&&(u._multipleRangesAllowed()||e==="singlerange")||u._startNewTransaction(r),t.shiftKey&&t.ctrlKey?u._clearRange(new n.grid.cellInfoRange(r,r),o):u._selectRange(new n.grid.cellInfoRange(u._anchorCell(),r),t.ctrlKey,t.shiftKey,o,null);break;case"keydown":t.shiftKey&&(u._multipleRangesAllowed()||e==="singlerange")||u._startNewTransaction(r),u._selectRange(new n.grid.cellInfoRange(u._anchorCell(),r),!1,t.shiftKey,n.grid.cellRangeExtendMode.none,null);break}}else u.clear(),r._isValid()&&(u._startNewTransaction(r),u._selectRange(new n.grid.cellInfoRange(r,r),!1,!1,n.grid.cellRangeExtendMode.none,null));u.endUpdate()}f==="click"&&this._editBySingleClick()&&this._beginEditInternal(t)},u.prototype._onPageIndexChanging=function(n){return this._trigger("pageIndexChanging",null,n)},u.prototype._onPageIndexChanged=function(n){this._trigger("pageIndexChanged",null,n)},u.prototype._onPagerWidgetPageIndexChanging=function(n,t){t.handled=!0},u.prototype._onPagerWidgetPageIndexChanged=function(n,t){this._setOption("pageIndex",t.newPageIndex)},u.prototype._onRendering=function(t){var r=this._view(),i;this._rendered=!1,t.virtualScrollData?(this.selection().clear(),this.options.highlightCurrentCell&&this._highlightCellPosition(this.currentCell(),!1)):(r&&r.dispose(),this._detachEvents(!1),this.element.detach(),this.element.empty(),this.outerDiv.empty(),this.outerDiv.append(this.element),this._field("selectionui")&&(this._field("selectionui").dispose(),this._field("selectionui",null)),this._field("resizer")&&(this._field("resizer").dispose(),this._field("resizer",null)),this._field("frozener")&&(this._field("frozener").dispose(),this._field("frozener",null))),i=(this._field("currentCell")||n.grid.cellInfo.outsideValue)._clone(),i._setGridView(null),this._field("currentCellPrev",i),this._field("currentCell",null),this._trigger("rendering")},u.prototype._onRendered=function(t){var f=this._view(),r,u,e=this.selection().selectedCells().length()>0;this._rendered=!0,this._field("selection",null),this._setAttr(f.focusableElement(),"tabIndex",0),r=this._field("currentCellPrev"),r=this._currentCellFromDataView(r.cellIndex()),r._isEdit(!1),!r._isValid()&&this.options.showSelectionOnRender&&(r=this._getFirstDataRowCell(0)),this.currentCell(r,null,!0),t.virtualScrollData||(this._attachEvents(),this._selectionui(!0),u=new n.grid.uiResizer(this),i.each(this.columns(),function(n,t){var i=t.options;i.visible&&i.parentVis&&i.isLeaf&&u.addElement(t)}),this._field("resizer",u),f.updateSplits(this._scrollingState),this.options.scrollMode!=="none"&&this._field("frozener",new n.grid.uiFrozener(this))),this._renderCounter++,this._trigger("rendered")},u.prototype._onClick=function(t){var o;if(!this._canInteract()||!t.target)return;var s=this._view(),e=this._findUntilOuterDiv(t.target,{td:!0,th:!0}),u,r,f=n.grid.cellRangeExtendMode.none,h,c;if(e){if(i(t.target).hasClass("gcui-gcuigrid-grouptogglebtn"))return this._onGroupBtnClick(t),t.stopPropagation(),!1;u=i(e).closest("tr");if(!u.length)return;r=s.getAbsoluteCellInfo(e),(u.hasClass("gcui-gcuigrid-datarow")||u.hasClass("gcui-gcuigrid-headerrow"))&&((r.cellIndex()<0||r.rowIndex()<0)&&(r.rowIndex()<0?(r=this._getFirstDataRowCell(r.cellIndex()),f=n.grid.cellRangeExtendMode.column):(r=new n.grid.cellInfo(0,r.rowIndex()),f=n.grid.cellRangeExtendMode.row)),this._changeCurrentCell(t,r,{changeSelection:!0,setFocus:!i(t.target).is(":focus"),selectionExtendMode:f})),o={cell:r},this._trigger("cellClicked",null,o)}},u.prototype._onDblClick=function(n){this._editBySingleClick()||this._beginEditInternal(n)},u.prototype._onGroupBtnClick=function(t){if(!this._canInteract())return;var o=i(t.target).closest("tr"),e=n.grid.groupHelper,f=e.getGroupInfo(o[0]),u,r;f&&(u=e.getColumnByGroupLevel(this._field("leaves"),f.level),u&&(r=u.groupInfo.expandInfo[f.index],r.isExpanded?r.collapse():r.expand(t.shiftKey),this.setSize()))},u.prototype._onKeyDown=function(t){var v,y,f,o,l,s,c,b,a;if(!this._canInteract())return!0;var h=t.target.tagName.toLowerCase(),p=!1,u,e=this.currentCell(),w,r=n.getKeyCodeEnum();if((h==="input"||h==="option"||h==="select"||h==="textarea")&&i(t.target).closest("tr.gcui-gcuigrid-datarow").length===0)return!0;if(this.options.allowEditing)if((t.which===r.ESCAPE||t.which===113)&&e._isValid()&&e._isEdit())return this._endEditInternal(t),!1;else if(t.which===113)return this._beginEditInternal(t),!1;if(!this.options.allowKeyboardNavigation||t.which===r.TAB)return!0;f=0,this._allowVirtualScrolling?(f=this._scrollingState.index,v=new n.grid.cellInfo(e.cellIndex(),e.rowIndex()+f),y=this._getDataCellsRange(!0)):(v=e,y=this._getDataCellsRange(!1)),o=!1,l=!1;switch(t.which){case r.DOWN:case r.PAGE_DOWN:o=!0;case r.UP:case r.PAGE_UP:l=!0;case r.LEFT:case r.RIGHT:case r.HOME:case r.END:case r.TAB:u=this._getNextCurrencyPos(y,v,t.keyCode,t.shiftKey),p=this._canMoveToAnotherCell(t.target,t.which);break}return p?(s=this._getDataCellsRange(!1),c=this,this._allowVirtualScrolling()&&o&&u.rowIndex>s.bottomRight().rowIndex()+f||l&&u.rowIndex-f<s.topLeft().rowIndex()?(a=u.rowIndex,o&&(a-=s._height()),this._view().vsUI.scrollTo(a,function(){c._changeCurrentCell(t,new n.grid.cellInfo(u.cellIndex,u.rowIndex-c._scrollingState.index),{changeSelection:!0,setFocus:!0}),i(c._view().focusableElement()).focus()})):this._changeCurrentCell(t,new n.grid.cellInfo(u.cellIndex,u.rowIndex-f),{changeSelection:!0,setFocus:!0}),!1):!0},u.prototype._onKeyPress=function(n){if(this._canInteract()&&this.options.allowEditing){var f=n.which,e=this.currentCell(),t,r,u;if(f&&e._isValid()&&!e._isEdit()){t=n.target.tagName.toLowerCase();if(t!=="input"&&t!=="option"&&t!=="select"&&t!=="textarea"){r=i(n.target).closest(".gcui-gcuigrid-table");if(r.length){u=i.map(this._view().subTables(),function(n,t){return n.element()});if(i.inArray(r[0],u)>=0)if(i.gcuiutil.charValidator.isPrintableChar(String.fromCharCode(f)))return this._beginEditInternal(n),!1}}}}},u.prototype._onMouseMove=function(t){var e=this._view(),l=this._field("frozener"),s,o,h,r,f,u,c=n.grid.renderState;if(!this.options.highlightOnHover||!this._canInteract()||l&&l.inProgress())return;s=this._findUntilOuterDiv(t.target,{td:!0,th:!0});if(s){o=i(s).closest("tr");if(!o.length||!(o.hasClass("gcui-gcuigrid-datarow")||o.hasClass("gcui-gcuigrid-headerrow")))return;h=e.getAbsoluteCellInfo(s),r=this._field("hoveredRow"),h.rowIndex()!==r&&(r!==undefined&&(f=this._rows().item(r),f&&(u=e._getRowInfo(f),e._changeRowRenderState(u,c.hovered,!1),this.rowStyleFormatter.format(u))),r=h.rowIndex(),this._field("hoveredRow",r),r<0||(f=this._rows().item(r),f&&(u=e._getRowInfo(f),e._changeRowRenderState(u,c.hovered,!0),this.rowStyleFormatter.format(u))))}},u.prototype._onMouseOut=function(t){if(!this._canInteract())return;if(i(t.relatedTarget).closest(".gcui-gcuigrid-data").length===0){var e=this._field("hoveredRow"),u,r,f=this._view();e<0||(u=this._rows().item(e),u&&(r=f._getRowInfo(u),f._changeRowRenderState(r,n.grid.renderState.hovered,!1),this.rowStyleFormatter.format(r)))}},u.prototype._onWindowResize=function(n){var t=this;this._windowResizeTimer>0&&(window.clearTimeout(this._windowResizeTimer),this._windowResizeTimer=0),this._windowResizeTimer!==-1&&(this._windowResizeTimer=window.setTimeout(function(){t._windowResizeTimer=-1;try{!t._destroyed&&t._initialized&&t.element.parent().length&&t.setSize()}finally{t._windowResizeTimer=0}},50))},u.prototype._fieldResized=function(n,t,i){var r,u;t<0&&(t=0),i>0||(i=1),r={column:n.options,oldWidth:t,newWidth:i},this._trigger("columnResizing",null,r)!==!1&&((isNaN(r.newWidth)||r.newWidth<0)&&(r.newWidth=1),n.option("width",r.newWidth),u={column:n.options},this._trigger("columnResized",null,u))},u.prototype._changeCurrentCell=function(t,r,u){var f=this.currentCell(),s=this._getDataCellsRange(),h,c,o=this.options.highlightCurrentCell,e;if(s._isValid()&&s._containsCellInfo(r)||r.isEqual(n.grid.cellInfo.outsideValue))if(f.cellIndex()!==r.cellIndex()||f.rowIndex()!==r.rowIndex()){h={cellIndex:r.cellIndex(),rowIndex:r.rowIndex(),oldCellIndex:f.cellIndex(),oldRowIndex:f.rowIndex()};if(this._trigger("currentCellChanging",null,h))c=!1,(!this.options.allowEditing||!f._isEdit()||(c=this._endEditInternal(null)))&&(s._containsCellInfo(f)&&(o&&this._highlightCellPosition(f,!1),(e=f.tableCell())&&i(e).removeAttr("tabIndex")),f=r._clone(),f._setGridView(this),o&&this._highlightCellPosition(f,!0),(e=f.tableCell())&&(i(e).attr("tabIndex",0),u.setFocus&&!f._isEdit()),this._field("currentCell",f),this._onCurrentCellChanged(t,u));else return!1}else o&&this._highlightCellPosition(f,!0),(e=f.tableCell())&&i(e).attr("tabIndex",0),t&&!f._isEdit()&&this._editBySingleClick()&&this._beginEditInternal(t);return!0},u.prototype._highlightCellPosition=function(t,r){if(t&&t._isValid()){var o=t.cellIndexAbs(),c=t.rowIndexAbs(),h=n.grid.renderState,f=this._view(),e,u,s;u=f.getHeaderCell(o),u&&(e=f._getRowInfo(this._headerRows().item(t.column().thY)),u=i(u),s=f._changeCellRenderState(u,h.current,r),this.cellStyleFormatter.format(u,o,t.column(),e,s)),u=f.getJoinedRows(c,0),u&&(e=f._getRowInfo(u),f._changeRowRenderState(e,h.current,r),this.rowStyleFormatter.format(e)),u=f.getCell(o,c),u&&(u=i(u),s=f._changeCellRenderState(u,h.current,r),this.cellStyleFormatter.format(u,o,t.column(),e,s))}},u.prototype._beginEditInternal=function(t){if(this._canInteract()&&this.options.allowEditing){var r=this.currentCell().column(),i;if(r&&!r.readOnly)return i=(new n.grid.cellEditorHelper).currentCellEditStart(this,t),i,i}return!1},u.prototype._endEditInternal=function(t){if(this._canInteract()&&this.options.allowEditing){var i=(new n.grid.cellEditorHelper).currentCellEditEnd(this,t);return i&&!this._allowVirtualScrolling()&&this._view().ensureHeight(this.currentCell().rowIndex()),i}return!1},u.prototype._onViewInsertEmptyRow=function(n,t,i,r,u){return null},u.prototype._onViewCreateEmptyCell=function(n,t,i){return null},u.prototype._onViewCellRendered=function(n,t,i,r){},u.prototype._onViewRowRendered=function(n){},u.prototype._getDataParser=function(t){return t.dataParser||n.data.defaultParsers[t.dataType]||n.data.defaultParsers.string},u.prototype.parse=function(t,r){var f=n.grid.getDataType(t),u=n.grid.getDataType(t);return i.isFunction(r)&&(r=r()),r=n.data.convert(r,f,u,{culture:this._field("closestCulture"),format:t.dataFormatString||t._underlyingDataFormatString,nullString:this.options.nullString,parser:t.dataParser})},u.prototype.toStr=function(t,i){var f=this._dataViewWrapper.dataView(),r=n.grid.getDataType(t),u="string";return i=n.data.convert(i,r,u,{culture:this._field("closestCulture"),format:t.dataFormatString||t._underlyingDataFormatString,nullString:this.options.nullString,parser:t.dataParser})},u.prototype.parseFailed=function(n,t,i,r){return t},u.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]},u.prototype._canInteract=function(){return!this.options.disabled},u.prototype._canMoveToAnotherCell=function(t,r){var h=t.tagName.toLowerCase(),s,f,u,o,e;switch(h){case"input":return i(t).hasClass("gridinput")?(e=t,e.type==="text"?(s=e.value.length,f=new n.grid.domSelection(e).getSelection(),u=n.getKeyCodeEnum(),o=r===u.UP||r===u.DOWN||r===u.PAGE_DOWN||r===u.PAGE_UP||f.length===0&&(f.start===0&&(r===u.LEFT||r===u.HOME)||f.end>=s&&(r===u.RIGHT||r===u.END))):!0):!1;case"textarea":case"select":return!1}return!0},u.prototype._editBySingleClick=function(){var n=(this.options.editingInitOption||"").toLowerCase();switch(n){case"click":case"doubleclick":break;case"auto":default:n=this._isMobileEnv()?"click":"doubleclick";break}return n==="click"},u.prototype._getDataToAbsOffset=function(){var i=0,n=0,t=this._headerRows();return this._showRowHeader()&&i++,t&&(n+=t.length()),this._filterRow()&&n++,{x:i,y:n}},u.prototype._gridDataRowIndexToDataView=function(t){var r=-1,u=n.grid.rowType,i;return t<0?r:(i=this._view()._getRowInfo(this._rows().item(t)),i.type&n.grid.rowType.data?i.dataItemIndex:-1)},u.prototype._currentCellFromDataView=function(t){var r=this._dataViewWrapper.currentPosition(),i=new n.grid.cellInfo(t,this._dataViewDataRowIndexToGrid(r),null);return i.rowIndex()<0?i.cellIndex(-1):i.cellIndex()<0&&i.cellIndex(0),i},u.prototype._dataViewDataRowIndexToGrid=function(t){var o=n.grid.rowType,e=this._view(),f=this._rows(),r,u,i;if(t<0)return-1;for(r=0,u=f.length();r<u;r++){i=e._getRowInfo(f.item(r));if(i.type&o.data&&i.dataItemIndex===t)return i.sectionRowIndex}return-1},u.prototype._getDataCellsRange=function(t){var f=0,u=0,i=this._field("visibleLeaves").length-1,r=t||!this._rendered?this._totalRowsCount()-1:this._rows().length()-1;return this._showRowHeader()&&i--,(i<0||r<0)&&(f=u=i=r=-1),new n.grid.cellInfoRange(new n.grid.cellInfo(f,u,null),new n.grid.cellInfo(i,r,null))},u.prototype._getDataItem=function(n){return this.dataView().item(n)},u.prototype._getFirstDataRowCell=function(t){for(var u,o=this._view(),r=this._rows(),e=n.grid.rowType,i=0,f=r.length();i<f;i++){u=o._getRowInfo(r.item(i));if(u.type&e.data)return new n.grid.cellInfo(t,i)}return n.grid.cellInfo.outsideValue},u.prototype._getNextCurrencyPos=function(t,i,r,u){var e=i.cellIndex(),f=i.rowIndex(),s,o=n.getKeyCodeEnum();switch(r){case o.PAGE_UP:this._reverseKey&&f===t.topLeft().rowIndex()?f=t.bottomRight().rowIndex():(f-=this._pageSizeKey,f<(s=t.topLeft().rowIndex())&&(f=s));break;case o.PAGE_DOWN:this._reverseKey&&f===t.bottomRight().rowIndex()?f=t.topLeft().rowIndex():(f+=this._pageSizeKey,f>(s=t.bottomRight().rowIndex())&&(f=s));break;case o.END:e=this._reverseKey&&e===t.bottomRight().cellIndex()?t.topLeft().cellIndex():t.bottomRight().cellIndex();break;case o.HOME:e=this._reverseKey&&e===t.topLeft().cellIndex()?t.bottomRight().cellIndex():t.topLeft().cellIndex();break;case o.LEFT:e>t.topLeft().cellIndex()?e--:this._reverseKey&&(e=t.bottomRight().cellIndex());break;case o.UP:f>t.topLeft().rowIndex()?f--:this._reverseKey&&(f=t.bottomRight().rowIndex());break;case o.RIGHT:e<t.bottomRight().cellIndex()?e++:this._reverseKey&&(e=t.topLeft().cellIndex());break;case o.ENTER:case o.DOWN:f<t.bottomRight().rowIndex()?f++:this._reverseKey&&(f=t.topLeft().rowIndex());break;case o.TAB:!1&&(u?(e--,e<t.topLeft().cellIndex()&&(e=t.bottomRight().cellIndex(),f--,f<t.topLeft().rowIndex()&&(f=t.bottomRight().rowIndex()))):(e++,e>t.bottomRight().cellIndex()&&(e=t.topLeft().cellIndex(),f++,f>t.bottomRight().rowIndex()&&(f=t.topLeft().rowIndex()))));break}return{cellIndex:e,rowIndex:f}},u.prototype._findUntilOuterDiv=function(n,t){for(var i=n,f,r,u=null;i;i=i.parentNode){r=i.nodeName.toLowerCase();if(r){if(i===this.outerDiv[0]){f=i;break}t[r]&&(u=i)}}return f?u:null},u.prototype._getStaticIndex=function(n){var t,i=this._getDataCellsRange();return this._hasSpannedCells()?-1:(t=n?Math.min(this.options.staticRowIndex,i.bottomRight().rowIndex()):Math.min(this.options.staticColumnIndex,i.bottomRight().cellIndex()),t<-1&&(t=-1),t)},u.prototype._getStaticOffsetIndex=function(n){var t=0;return n?this._showRowHeader()&&t++:(t=this._columnsHeadersTable().length,this.options.showFilter&&t++),t},u.prototype._getRealStaticColumnIndex=function(){var i,t,f=this._getStaticOffsetIndex(!0),r=this._getStaticIndex(!1),n,u;n=r+f;if(r>=0){for(i=this._field("visibleLeaves"),t=i.length,u=n;n<t;n++)if(i[n].parentIdx===-1){n>u&&n--;break}n<t||(n=t-1)}return n},u.prototype._getRealStaticRowIndex=function(){var n=this._getStaticOffsetIndex(!1);return this._getStaticIndex(!0)+n},u.prototype._hasMerging=function(){var r=this._field("leaves"),n,u,i,t=!1;if(r)for(n=0,u=r.length;n<u&&!t;n++)i=r[n],t=t||i.parentVis&&i.rowMerge!=="none";return t},u.prototype._hasGrouping=function(){for(var r=this._field("leaves"),t,i=!1,n=0,u=r.length;n<u&&!i;n++)t=r[n],i=t.groupInfo&&t.groupInfo.position!=="none";return i},u.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()},u.prototype._columnsHeadersTable=function(n){return arguments.length&&this._field("columnsHeadersTable",n),this._field("columnsHeadersTable")},u.prototype._view=function(){return this._field("view")},u.prototype._originalFooterRowData=function(){var n=this._field("tfoot");return n&&n.length?n[0]:null},u.prototype._originalHeaderRowData=function(){var n=this._field("thead");return n&&n.length?n[0]:null},u.prototype._setAttr=function(n,t,r){var u=this;return n===this.element?arguments.length===2?(i.each(t,function(t,i){t in u._originalAttr||(u._originalAttr[t]=n.attr(t))}),n.attr(t)):(t in this._originalAttr||(this._originalAttr[t]=n.attr(t)),n.attr(t,r)):arguments.length===3?n.attr(t,r):n.attr(t);return this},u.prototype._totalRowsCount=function(){return this.sketchTable.length},u.prototype._trackScrollingPosition=function(n,t){this._scrollingState.x=n,this._scrollingState.y=t},u.prototype._trackScrollingIndex=function(n){this._scrollingState.index=n},u.prototype._uid=function(){return this.__uid===undefined&&(this.__uid=n.grid.getUID()),"gcuigrid"+this.__uid},u}(n.gcuiWidget),t.gcuigrid=r,r.prototype.widgetEventPrefix="gcuigrid",r.prototype._data$prefix="gcuigrid",r.prototype._customSortOrder=1e3,r.prototype._reverseKey=!1,r.prototype._pageSizeKey=10,r.prototype._mergeWidgetsWithOptions=!0,u=function(){function n(){this.mobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.allowColMoving=!1,this.allowColSizing=!1,this.allowEditing=!1,this.allowKeyboardNavigation=!0,this.allowPaging=!1,this.allowSorting=!1,this.allowVirtualScrolling=!1,this.cellStyleFormatter=undefined,this.columns=[],this.columnsAutogenerationMode="merge",this.culture="",this.customFilterOperators=[],this.data=null,this.editingInitOption="auto",this.ensureColumnsPxWidth=!1,this.filterOperatorsSortMode="alphabeticalCustomFirst",this.groupAreaCaption="Drag a column here to group by that column.",this.groupIndent=10,this.highlightCurrentCell=!1,this.highlightOnHover=!0,this.loadingText="Loading...",this.nullString="",this.pageIndex=0,this.pageSize=10,this.pagerSettings={mode:"numeric",pageButtonCount:10,position:"bottom"},this.readAttributesFromData=!1,this.rowStyleFormatter=undefined,this.scrollMode="none",this.selectionMode="singleRow",this.showFilter=!1,this.showFooter=!1,this.showGroupArea=!1,this.showSelectionOnRender=!0,this.showRowHeader=!1,this.staticColumnIndex=-1,this.staticColumnsAlignment="left",this.staticRowIndex=-1,this.totalRows=-1,this.afterCellEdit=null,this.afterCellUpdate=null,this.beforeCellEdit=null,this.beforeCellUpdate=null,this.cellClicked=null,this.columnDragging=null,this.columnDragged=null,this.columnDropping=null,this.columnDropped=null,this.columnGrouping=null,this.columnGrouped=null,this.columnResizing=null,this.columnResized=null,this.columnUngrouping=null,this.columnUngrouped=null,this.currentCellChanging=null,this.currentCellChanged=null,this.filterOperatorsListShowing=null,this.filtering=null,this.filtered=null,this.groupAggregate=null,this.groupText=null,this.invalidCellValue=null,this.pageIndexChanging=null,this.pageIndexChanged=null,this.selectionChanged=null,this.sorting=null,this.sorted=null,this.dataLoading=null,this.dataLoaded=null,this.loading=null,this.loaded=null,this.rendering=null,this.rendered=null}return n}(),r.prototype.options=n.grid.extendWidgetOptions(n.gcuiWidget.prototype.options,new u),i.gcui.registerWidget("gcuigrid",r.prototype)})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var u=jQuery,i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype._create=function(){var t=u.data(this.element[0],"gcuigridowner");this._field("owner",t),n.grid.widgetName(this.element[0],this.widgetFullName),this._destroyed=!1,this.element.addClass(t.options.uiCSS.widget+" gcui-c1basefield "+t.options.uiCSS.stateDefault),this.options.disabled&&this.disable(),t.options.allowColMoving&&t._dragndrop(!0).attach(this)},i.prototype._init=function(){this.element.wrapInner("<div class='gcui-gcuigrid-innercell'></div>"),this._refreshHeaderCell()},i.prototype.destroy=function(){try{t.prototype.destroy.apply(this,arguments)}finally{this._destroyed=!0}},i.prototype._destroy=function(){if(this._isDestroyed())return;var t=this._owner();t&&t._dragndrop(!1)&&t._dragndrop(!1).detach(this),n.grid.remove$dataByPrefix(this.element,this._data$prefix),this.element.removeClass(t.options.uiCSS.widget+" gcui-c1basefield "+t.options.uiCSS.stateDefault).html(this.element.find(".gcui-gcuigrid-headertext").html())},i.prototype._field=function(t,i){return n.grid.dataPrefix(this.element,this._data$prefix,t,i)},i.prototype._removeField=function(n){var t=this._data$prefix+n;this.element.removeData(t)},i.prototype._setOption=function(n,i){var e=this["_preset_"+n],f=this.options[n],o,u,r;e!==undefined&&(i=e.apply(this,[i,f])),o=i!==f,t.prototype._setOption.apply(this,[n,i]),o&&(this.options.groupedIndex!==undefined&&(r=this._owner()._field("groupedWidgets")[this.options.groupedIndex],r&&n in r.options&&r._setOption(n,i)),u=this["_postset_"+n],u!==undefined&&u.apply(this,[i,f]))},i.prototype._postset_allowMoving=function(n,t){},i.prototype._preset_clientType=function(n,t){throw"read-only";},i.prototype._postset_headerText=function(n,t){this._refreshHeaderCell()},i.prototype._postset_visible=function(n,t){this._owner().ensureControl(!1)},i.prototype._postset_width=function(t,i){var u=this._owner(),r;u&&(this.options.ensurePxWidth=!0,r=n.grid.getColumnByTravIdx(u.options.columns,this.options.travIdx),r&&(r.found.width=t,r.found.ensurePxWidth=!0),u.setSize())},i.prototype._owner=function(){return this._field("owner")},i.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing},i.prototype._canDrag=function(){return this.options.allowMoving===!0},i.prototype._canDropTo=function(t){return n.grid.isChildOf(this._owner().options.columns,t,this)?!1:!0},i.prototype._createHeaderContent=function(n){return n.html(this.options.headerText||"&nbsp;")},i.prototype._decorateHeaderContent=function(n){return n.wrapInner('<span class="gcui-gcuigrid-headertext" />')},i.prototype._refreshHeaderCell=function(){var n=this.element.children(".gcui-gcuigrid-innercell").empty();this._createHeaderContent(n),this._decorateHeaderContent(n)},i.prototype._isDestroyed=function(){return this._destroyed},i}(n.gcuiWidget),r;t.c1basefield=i,i.prototype._data$prefix="c1basefield",r=function(){function n(){this.allowMoving=!0,this.allowSizing=!0,this.cellFormatter=undefined,this.dataKey=undefined,this.ensurePxWidth=undefined,this.footerText=undefined,this.headerText=undefined,this.textAlignment=undefined,this.visible=!0,this.width=undefined}return n}(),t.c1basefield_options=r,i.prototype.options=n.grid.extendWidgetOptions(n.gcuiWidget.prototype.options,new r),u.gcui.registerWidget("c1basefield",i.prototype)})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,u=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._create=function(){t.prototype._create.apply(this,arguments);var n=this._owner();this.element.addClass(n.options.uiCSS.widget+" gcui-c1field")},r.prototype._destroy=function(){if(this._isDestroyed())return;var n=this._owner();this.element.find("*").unbind("."+this.widgetName);if(this.$filterEditor){this.$filterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType(this.options)){case"date":this.$filterEditor.data("gcui-inputdate")&&this.$filterEditor.gcuiinputdate("destroy");break;case"mask":this.$filterEditor.data("gcui-inputmask")&&this.$filterEditor.gcuiinputmask("destroy");break;case"numberCurrency":case"numberNumber":case"numberPercent":this.$filterEditor.data("gcui-inputnumber")&&this.$filterEditor.gcuiinputnumber("destroy");break}this.$filterEditor=null}this.element.removeClass(n.options.uiCSS.widget+" gcui-c1field"),this._removeDropDownFilterList(),t.prototype._destroy.apply(this,arguments)},r.prototype._init=function(){t.prototype._init.apply(this,arguments),this.$filterEditor=null;var n=this._owner();this.filterRow=n._filterRow(),n.options.showFilter&&this.options.showFilter&&this.options.dataIndex>=0&&this._prepareFilterCell()},r.prototype._postset_aggregate=function(n,t){this._owner().ensureControl(!1)},r.prototype._postset_allowSort=function(n,t){this._refreshHeaderCell()},r.prototype._postset_dataType=function(n,t){throw"read-only";},r.prototype._postset_dataParser=function(n,t){this._owner().ensureControl(!1)},r.prototype._postset_dataFormatString=function(n,t){this._owner().ensureControl(!1)},r.prototype._postset_filterOperator=function(n,t){this._owner().ensureControl(!0)},r.prototype._postset_filterValue=function(n,t){this._owner().ensureControl(!0)},r.prototype._postset_groupInfo=function(n,t){this._owner().ensureControl(!0)},r.prototype._postset_rowMerge=function(n,t){this._owner().ensureControl(!1)},r.prototype._postset_showFilter=function(n,t){this._owner().ensureControl(!1)},r.prototype._postset_sortDirection=function(n,t){this.options.sortOrder=0,this._owner().ensureControl(!0)},r.prototype._postset_width=function(n,i){t.prototype._postset_width.apply(this,arguments)},r.prototype._canDropTo=function(n){return t.prototype._canDropTo.apply(this,arguments)?this.options.groupedIndex!==undefined&&n instanceof i.gcui.c1groupedfield?!1:!0:!1},r.prototype._canSort=function(){var n=this._owner();return n&&n.options.allowSorting&&this.options.allowSort&&this.options.dataIndex>=0},r.prototype._decorateHeaderContent=function(n){if(this._canSort()){var r=this._owner(),u=n.wrapInner('<a class="gcui-gcuigrid-headertext" href="#" role="button" />').children("a");u.bind("click."+this.widgetName,this,i.proxy(this._onHrefClick,this));switch(this.options.sortDirection){case"ascending":n.append(i('<span class="gcui-gcuigrid-sort-icon '+r.options.uiCSS.icon+" "+r.options.uiCSS.iconArrowUp+'">ascending</span>'));break;case"descending":n.append(i('<span class="gcui-gcuigrid-sort-icon '+r.options.uiCSS.icon+" "+r.options.uiCSS.iconArrowDown+'">descending</span>'));break}}else t.prototype._decorateHeaderContent.apply(this,arguments)},r.prototype._prepareFilterCell=function(){var s=this.options.visLeavesIdx,r=this._owner(),e=null,t,f,o=this,h,u=n.grid.HTML5InputSupport.getDefaultInputType(r._isMobileEnv(),this.options);if(s>=0){r=this._owner();if(this.filterRow)e=i(n.grid.rowAccessor.getCell(this.filterRow,s));else throw"exception";this.$filterEditor=e.find("input"),e.bind(i.support.selectstart?"selectstart":"mousedown",function(n){n.stopPropagation()}),t=r.parse(this.options,n.grid.filterHelper.getSingleValue(this.options.filterValue));if(t===null||t==="undefined")switch(n.grid.getDataType(this.options)){case"boolean":t=!1;break;case"number":case"currency":case"datetime":t=0;break;default:t=""}f={culture:r.options.culture,disabled:r.options.disabled,decimalPlaces:function(n){var t=/^(n|p|c){1}(\d*)$/.exec(n);if(t&&t[2])return parseInt(t[2],10);return t=/^(d){1}(\d*)$/.exec(n),t?0:2}(this.options.dataFormatString)};switch(h=this._getInputEditorType(this.options)){case"date":u==="text"?this.$filterEditor.gcuiinputdate(i.extend(f,{date:t,dateFormat:this.options.dataFormatString||undefined,showTrigger:!0})):this._createHtmlEditor(this.$filterEditor,u,n.grid.HTML5InputSupport.toStr(t||new Date,u));break;case"mask":this.$filterEditor.gcuiinputmask({text:t+""});break;case"numberCurrency":this.$filterEditor.gcuiinputnumber(i.extend(f,{type:"currency",value:t}));break;case"numberNumber":u==="text"?this.$filterEditor.gcuiinputnumber(i.extend(f,{value:t})):this._createHtmlEditor(this.$filterEditor,u,n.grid.HTML5InputSupport.toStr(t,u));break;case"numberPercent":this.$filterEditor.gcuiinputnumber(i.extend(f,{type:"percent",value:t*100}));break;default:throw n.grid.stringFormat('Unsupported editor type: "{0}"',h);}e.find(".gcui-gcuigrid-filter-trigger").attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(n){o.options.disabled||i(this).addClass(r.options.uiCSS.stateHover)}).bind("mouseleave."+this.widgetName,function(n){o.options.disabled||i(this).removeClass(r.options.uiCSS.stateHover+" "+r.options.uiCSS.stateActive)}).bind("mouseup."+this.widgetName,this,function(n){o.options.disabled||i(this).removeClass(r.options.uiCSS.stateActive)}).bind("mousedown."+this.widgetName,{column:this},this._onFilterBtnClick).bind("click."+this.widgetName,function(n){n.preventDefault()})}},r.prototype._createHtmlEditor=function(n,t,i){return n.wrap('<span class="gcuigrid-input-wrapper"></span').attr("type",t).val(i)},r.prototype._onFilterBtnClick=function(t){var r=t.data.column,a=8,u=r._owner(),l,v,s,f,y,p,h,c,e,o=n.grid.HTML5InputSupport.getDefaultInputType(u._isMobileEnv(),r.options);if(r.options.disabled)return!1;if(r.$dropDownFilterList)return r._removeDropDownFilterList(),!1;t.target.focus(),l=n.grid.filterHelper.getSingleOperatorName(r.options.filterOperator).toLowerCase(),v=u.getFilterOperatorsByDataType(n.grid.getDataType(r.options)),s={operators:i.extend(!0,[],v),column:r.options},u._onFilterOperatorsListShowing(s),f=[],s.operators&&i.each(s.operators,function(n,t){f.push({label:t.displayName||t.name,value:t.name,selected:t.name.toLowerCase()===l})}),r.$dropDownFilterList=i('<div class="gcui-gcuigrid-filterlist"></div').appendTo(document.body).gcuilist({autoSize:!0,maxItemsCount:a,selected:function(t,i){var f,e;switch(e=r._getInputEditorType(r.options)){case"date":f=o==="text"?r.$filterEditor.gcuiinputdate("option","date")||new Date:n.grid.HTML5InputSupport.parse(r.$filterEditor.val(),o)||new Date;break;case"mask":f=r.$filterEditor.gcuiinputmask("option","text");break;case"numberNumber":if(o!=="text"){f=n.grid.HTML5InputSupport.parse(r.$filterEditor.val(),o)||0;break}case"numberCurrency":case"numberPercent":f=r.$filterEditor.gcuiinputnumber("option","value"),e==="numberPercent"&&(f/=100);break}r._removeDropDownFilterList(),u._handleFilter(r,i.item.value,f)}}),i.ui&&i.fn.zIndex&&(e=u.outerDiv.zIndex(),e&&e++),r.$dropDownFilterList.css("z-index",Math.max(e||0,9999)),r.$dropDownFilterList.gcuilist("setItems",f).gcuilist("renderList"),h=r.$dropDownFilterList.width()|150,r.$dropDownFilterList.width(f.length>a?h+20:h).gcuilist("refreshSuperPanel").position({of:i(this),my:"left top",at:"left bottom"}),r.$dropDownFilterList.$button=i(this),c=r.$dropDownFilterList.eventUID=n.grid.getUID(),i(document).bind("mousedown."+r.widgetName+"."+c,{column:r},r._onDocMouseDown)},r.prototype._onDocMouseDown=function(n){var t=i(n.target),u=t.parents(".gcui-gcuigrid-filterlist:first"),r=t.is(".gcui-gcuigrid-filter-trigger")?t:t.parents(".gcui-gcuigrid-filter-trigger:first");r.length&&r[0]===n.data.column.$dropDownFilterList.$button[0]||u.length&&u[0]===n.data.column.$dropDownFilterList[0]||n.data.column._removeDropDownFilterList()},r.prototype._onHrefClick=function(n){if(n.data.options.disabled)return!1;if(n.data.options.allowSort){var t=n.data._owner();t._handleSort(n.data.options,n.ctrlKey)}return!1},r.prototype._removeDropDownFilterList=function(){if(this.$dropDownFilterList){var n=this.$dropDownFilterList.eventUID;this.$dropDownFilterList.remove(),this.$dropDownFilterList=null,i(document).unbind("mousedown."+this.widgetName+"."+n,this._onDocMouseDown)}},r.prototype._getInputEditorType=function(t){switch(n.grid.getDataType(t)){case"number":return t.dataFormatString&&t.dataFormatString.indexOf("p")===0?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"mask"}},r}(t.c1basefield),r;t.c1field=u,r=function(n){function t(){n.apply(this,arguments),this.aggregate="none",this.allowSort=!0,this.dataType=undefined,this.inputType=undefined,this.dataParser=undefined,this.dataFormatString=undefined,this.filterOperator="nofilter",this.filterValue=undefined,this.groupInfo={expandInfo:[],level:undefined,groupSingleRow:!0,collapsedImageClass:i.gcui.uiCSS.iconArrowRight,expandedImageClass:i.gcui.uiCSS.iconArrowRightDown,position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined},this.readOnly=!1,this.rowMerge="none",this.showFilter=!0,this.sortDirection="none",this.valueRequired=!1}return __extends(t,n),t}(t.c1basefield_options),t.c1field_options=r,u.prototype.options=n.grid.extendWidgetOptions(t.c1basefield.prototype.options,new r),i.gcui.registerWidget("c1field",i.gcui.c1basefield,u.prototype)})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var r=jQuery,i=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._create=function(){n.prototype._create.apply(this,arguments);var t=this._owner();this.element.addClass(t.options.uiCSS.widget+" gcui-c1band")},t.prototype._canDropTo=function(t){return n.prototype._canDropTo.apply(this,arguments)?!(t instanceof r.gcui.c1groupedfield):!1},t}(t.c1basefield),u;t.c1band=i,u=function(n){function t(){n.apply(this,arguments),this.columns=[]}return __extends(t,n),t}(t.c1field_options),i.prototype.options=n.grid.extendWidgetOptions(t.c1basefield.prototype.options,new u),r.gcui.registerWidget("c1band",r.gcui.c1basefield,i.prototype)})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._create=function(){var t=i.data(this.element[0],"gcuigridowner");this._field("owner",t),n.grid.widgetName(this.element[0],this.widgetFullName),this._destroyed=!1,this.element.addClass("gcui-gcuigrid-group-button "+t.options.uiCSS.stateDefault+" "+t.options.uiCSS.cornerAll),this.options.disabled&&this.disable(),t.options.allowColMoving&&t._dragndrop(!0).attach(this)},r.prototype._init=function(){this._refreshHeaderCell()},r.prototype.destroy=function(){try{t.prototype.destroy.apply(this,arguments)}finally{this._destroyed=!0}},r.prototype._destroy=function(){if(this._isDestroyed())return;this.element.find("*").unbind("."+this.widgetName);var t=this._owner();t&&t._dragndrop(!1)&&t._dragndrop(!1).detach(this),n.grid.remove$dataByPrefix(this.element,this._data$prefix)},r.prototype._field=function(t,i){return n.grid.dataPrefix(this.element,this._data$prefix,t,i)},r.prototype._removeField=function(n){var t=this._data$prefix+n;this.element.removeData(t)},r.prototype._setOption=function(n,i){var f=this["_preset_"+n],r=this.options[n],e,u;f!==undefined&&(i=f.apply(this,[i,r])),e=i!==r,t.prototype._setOption.apply(this,[n,i]),e&&(u=this["_postset_"+n],u!==undefined&&u.apply(this,[i,r]))},r.prototype._postset_headerText=function(n,t,i){this._refreshHeaderCell()},r.prototype._postset_allowSort=function(n,t,i){this._refreshHeaderCell()},r.prototype._owner=function(){return this._field("owner")},r.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing},r.prototype._canDrag=function(){return this.options.allowMoving===!0},r.prototype._canDropTo=function(t){return t instanceof i.gcui.c1groupedfield?n.grid.isChildOf(this._owner().options.columns,t,this)?!1:!0:!1},r.prototype._canSort=function(){var n=this._owner();return n&&n.options.allowSorting&&this.options.allowSort&&this.options.dataIndex>=0},r.prototype._refreshHeaderCell=function(){var n=this._owner().options.uiCSS,t=i('<span class="gcui-gcuigrid-group-button-close '+n.stateDefault+" "+n.cornerAll+'"><span class="'+n.icon+" "+n.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.html(this.options.headerText||"").prepend(t).bind("click."+this.widgetName,this,i.proxy(this._onHrefClick,this));if(this._canSort())switch(this.options.sortDirection){case"ascending":this.element.append(i('<span class="gcui-gcuigrid-group-button-sort '+n.icon+" "+n.iconArrowUp+'"></span>'));break;case"descending":this.element.append(i('<span class="gcui-gcuigrid-group-button-sort '+n.icon+" "+n.iconArrowDown+'"></span>'));break}},r.prototype._onCloseClick=function(n){var t=n.data.options;return t.disabled||n.data._owner()._handleUngroup(n.data.options.travIdx),!1},r.prototype._onHrefClick=function(t){var u=t.data._owner(),r=t.data.options,i;return!r.disabled&&r.allowSort&&(i=n.grid.search(u.columns(),function(n){return n.options.travIdx===r.travIdx}),i=i.found?i.found.options:n.grid.getColumnByTravIdx(u.options.columns,r.travIdx).found,i&&u._handleSort(i,t.ctrlKey)),!1},r.prototype._isDestroyed=function(){return this._destroyed},r}(n.gcuiWidget);t.c1groupedfield=r,r.prototype._data$prefix="c1groupedfield",r.prototype.options=i.extend(!0,{},n.gcuiWidget.prototype.options,{uiCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},allowMoving:!0,allowSort:!0,headerText:undefined,sortDirection:"none"}),i.gcui.registerWidget("c1groupedfield",r.prototype)})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";function h(n){var t=[];return r(n,t),t}function r(n,t){var f,e,i,u;if(n)for(f=0,e=n.length;f<e;f++)i=n[f],i.options&&(i=i.options),u=i.columns,u&&u.length?r(u,t):t.push(i)}function l(n,t){var r,f,i,u=null;if(n&&t>=0)for(r=0,f=n.length;r<f&&!u;r++){i=n[r],i.options&&(i=i.options);if(i.travIdx===t)return{found:i,at:n};i.columns&&(u=this.getColumnByTravIdx(i.columns,t))}return u}function v(n,t,i){t.options&&(t=t.options),i.options&&(i=i.options);if(i.isBand&&t.parentIdx>=0){if(t.parentIdx===i.travIdx)return!0;if(t.parentIdx>i.travIdx)for(var r=this.flatten(n);;){t=r[t.parentIdx];if(t.travIdx===i.travIdx)return!0;if(t.parentIdx===-1)break}}return!1}function a(n){var t=[];return f(n,t),t}function f(n,t){var r,u,i;if(n)for(r=0,u=n.length;r<u;r++)i=n[r],i.isLeaf&&t.push(i),i.columns&&f(i.columns,t)}function o(n){return u(n,0,-1)}function u(n,t,i){var f,e,r;if(n)for(f=0,e=n.length;f<e;f++)r=n[f],r.options&&(r=r.options),r.linearIdx=f,r.travIdx=t++,r.parentIdx=i,r.columns&&(t=u(r.columns,t,t-1));return t}function e(t){var i=[];return n.grid.traverse(t,function(n){i.push(n)}),i}function s(t,r){var f,e,u;if(t&&i.isFunction(r))for(f=0;f<t.length;f++){u=t[f],u.options&&(u=u.options),e=t.length,r(u,t);if(t.length!==e){f--;continue}u.columns&&n.grid.traverse(u.columns,r)}}var i=jQuery,c=function(){function t(){}return t.prototype.generateSpanTable=function(n,t){this._height=this._width=this._inc=this._shift=0,this._table=[],this._traverseList=[],this._savedXPos=[];return this._generateSpanTable(n,t,!0)},t.prototype._generateSpanTable=function(t,i,r){var u,f,e=this;for(this._height=this.getVisibleHeight(t,r),i=i||[],n.grid.traverse(t,function(n){n.isLeaf&&i.push(n),e._traverseList.push(n)}),this._width=i.length,u=0;u<this._height;u++)for(this._table[u]=[],f=0;f<this._width;f++)this._table[u][f]={column:null,colSpan:0,rowSpan:0};return this._setTableValues(t,0,0),this._table},t.prototype.getVisibleHeight=function(n,t){var u,e,o,f,r=0;if(i.isArray(n))for(u=0,e=n.length;u<e;u++)f=this.getVisibleHeight(n[u],t),r=Math.max(r,f);else{o=n.visible===undefined?!0:n.visible,n.parentVis=o&&t;if(n.isBand){for(u=0,e=n.columns.length;u<e;u++)f=this.getVisibleHeight(n.columns[u],n.parentVis),r=Math.max(r,f);if(!n.parentVis)return r;n.isLeaf=r===0,r++}else n.isLeaf=!0,n.parentVis&&(r=1)}return r},t.prototype._getVisibleParent=function(n){while(n){n=this._traverseList[n.parentIdx];if(n&&(n.parentVis||n.parentVis===undefined))return n}return null},t.prototype._setTableValues=function(n,t,r){var u,o,s,f,h,e;if(i.isArray(n))for(u=0,o=n.length;u<o;u++)this._setTableValues(n[u],t,r);else{if(n.travIdx===undefined)throw"undefined travIdx";s=r+this._shift,n.parentVis&&(f=s+this._inc,this._table[t][f].column=n,this._savedXPos[n.travIdx]=f);if(n.isBand)for(u=0,o=n.columns.length;u<o;u++)this._setTableValues(n.columns[u],t+1,r);n.parentVis?this._shift-s==0?(this._table[t][this._savedXPos[n.travIdx]].rowSpan=this._height-t,this._shift++):this._table[t][this._savedXPos[n.travIdx]].colSpan=this._shift-s:!n.isBand&&this._height>0&&(e=this._getVisibleParent(n),h=e?e.isLeaf:!1,h&&this._inc++,t<this._height||(t=this._height-1),f=r+this._shift+this._inc,this._table[t][f].column=n,h||(e&&this._savedXPos[e.travIdx]===f&&this._shiftTableElements(f,t),this._inc++))}},t.prototype._shiftTableElements=function(n,t){for(var i=0;i<t;i++)this._table[i][n+1]=this._table[i][n],this._table[i][n]={column:null,colSpan:0,rowSpan:0},this._table[i][n+1].column&&this._savedXPos[this._table[i][n+1].column.travIdx]++},t}();t.bandProcessor=c,t.getAllLeaves=h,t.getColumnByTravIdx=l,t.isChildOf=v,t.getLeaves=a,t.setTraverseIndex=o,t.flatten=e,t.traverse=s})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(t){this._dvFilteringSettings=undefined,this._dvPagingSettings=undefined,this._dvSortingSettings=undefined,this._wgFilteringSettings=undefined,this._wgPagingSettings=undefined,this._wgSortingSettings=undefined;if(!t)throw"exception";this._grid=t,this._dataView=t._dataViewWrapper.dataView(),this._filterCache=new n.grid.filterOperatorsCache(t)}return t.prototype.compareSettings=function(){var t=!0,r,i,u,f;t=(r=this.DVPagingSettings())===(i=this.WGPagingSettings()),!t&&r&&i&&(t=r.pageSize===i.pageSize&&r.pageIndex===i.pageIndex);if(t){t=(r=this.DVSortingSettings())===(i=this.WGSortingSettings());if(!t&&r&&i&&(f=r.length)===i.length)for(t=!0,u=0;u<f&&t;u++)t=r[u].dataKey===i[u].dataKey&&r[u].sortDirection===i[u].sortDirection}return t&&(r=this.DVFilteringSettings(),i=this.WGFilteringSettings(),t=n.grid.compareObj(r,i)),t},t.prototype.DVFilteringSettings=function(){function r(n,t){var u;i.each(n,function(n,f){typeof f=="string"?u=f:i.isArray(f)?r(f,t):(t.filterValue.push(f.value),t.filterOperator.push({name:f.originalOperator||f.operator,condition:u}))})}if(this._dvFilteringSettings===undefined){var n=[],t=this._dataView.filter();t&&i.each(t,function(t,u){var f={dataKey:t};i.isArray(u)?(f.filterValue=[],f.filterOperator=[],r(u,f)):i.isPlainObject(u)?(f.filterValue=u.value,f.filterOperator=u.originalOperator||u.operator||"Equals"):(f.filterValue=u,f.filterOperator="Equals"),n.push(f)}),this._dvFilteringSettings=n.length?n:null}return this._dvFilteringSettings},t.prototype.DVPagingSettings=function(){var t,i;return this._dvPagingSettings===undefined&&(t=n.grid.asPagedDataView(this._dataView),t&&(i=t.pageSize(),this._dvPagingSettings=i>0?{pageSize:t.pageSize(),pageIndex:t.pageIndex()}:null)),this._dvPagingSettings},t.prototype.DVSortingSettings=function(){var t,r;return this._dvSortingSettings===undefined&&(t=[],!0&&(r=n.data.sorting.compile(this._dataView.sort()).normalized,r&&i.each(r,function(n,i){i!==null&&t.push({dataKey:typeof i=="string"?i:i.property,sortDirection:i.asc||i.asc===undefined?"ascending":"descending"})})),this._dvSortingSettings=t.length?t:null),this._dvSortingSettings},t.prototype.WGFilteringSettings=function(){if(this._wgFilteringSettings===undefined){var t=[],r=this._grid._field("leaves"),u=this;r&&i.each(r,function(i,r){if(n.grid.validDataKey(r.dataKey)&&r.filterOperator){var e=n.grid.deepExtend({},{foo:r.filterValue}).foo,o=n.grid.deepExtend({},{foo:r.filterOperator}).foo,f=n.grid.filterHelper.verify(o,e,r.dataType,u._filterCache);f&&t.push({owner:r,dataKey:r.dataKey,filterValue:f.filterValue,filterOperator:f.filterOperator})}}),this._wgFilteringSettings=t.length?t:null}return this._wgFilteringSettings},t.prototype.WGPagingSettings=function(){return this._wgPagingSettings===undefined&&(this._wgPagingSettings=this._grid.options.allowPaging?{pageSize:this._grid.options.pageSize,pageIndex:this._grid.options.pageIndex}:null),this._wgPagingSettings},t.prototype.WGSortingSettings=function(){if(this._wgSortingSettings===undefined){var r={},t=[],e=this._grid._groupedColumns(!0),o=this._grid._field("leaves")||[],f=function(t){return!t.isBand&&t.allowSort&&n.grid.validDataKey(t.dataKey)},u=0;this._grid.options.allowSorting&&(i.each(e,function(n,t){f(t)&&(t.sortDirection==="none"&&(t.sortDirection="ascending"),r[t.dataKey]={dataKey:t.dataKey,sortDirection:t.sortDirection,sortOrder:u++})}),u++,i.each(o,function(n,t){f(t)&&(t.sortDirection==="ascending"||t.sortDirection==="descending")&&(r[t.dataKey]||(r[t.dataKey]={dataKey:t.dataKey,sortDirection:t.sortDirection,sortOrder:(t.sortOrder||0)+u}))}),i.each(r,function(n,i){t.push(i)}),t.sort(function(n,t){return n.sortOrder-t.sortOrder}),i.each(t,function(n,t){delete t.sortOrder})),this._wgSortingSettings=t.length?t:null}return this._wgSortingSettings},t.prototype.MapWGToDV=function(){var u=this,t={},r,f;return this._mapPagingParams()&&(r=this.WGPagingSettings())?(t.pageIndex=r.pageIndex,t.pageSize=r.pageSize):t.pageSize=-1,this._mapSortingParams()&&(t.sort=[],(r=this.WGSortingSettings())&&(t.sort=[],i.each(r,function(n,i){t.sort.push({property:i.dataKey,asc:i.sortDirection==="ascending"})}))),this._grid.deficientFilters={},this._mapFilteringParams()&&(i.each(this._grid._field("leaves"),function(t,i){n.grid.validDataKey(i.dataKey)&&i.filterOperator===undefined^i.filterValue===undefined&&(u._grid.deficientFilters[i.dataKey]={filterOperator:i.filterOperator,filterValue:i.filterValue})}),t.filter={},(r=this.WGFilteringSettings())&&(t.filter=this._convertFilterToDV(r)),i.isEmptyObject(t.filter)&&(t.filter=null)),t},t.prototype.MapDVToWG=function(){var r,t={},f=this._mapSortingParams(),s=this._mapPagingParams(),e=this._mapFilteringParams(),u=n.grid.asPagedDataView(this._dataView),o=this;i.each(this._grid._field("leaves"),function(n,i){f&&(i.sortOrder=0,i.sortDirection="none"),e&&(i.filterOperator="nofilter",i.filterValue=undefined),t[i.dataKey]=i}),s&&u&&(this._grid.options.pageSize=u.pageSize(),this._grid.options.pageIndex=u.pageIndex()),f&&(r=this.DVSortingSettings())&&i.each(r,function(n,i){var r;(r=t[i.dataKey])&&(r.sortDirection=i.sortDirection,r.sortOrder=n)}),e&&((r=this.DVFilteringSettings())&&i.each(r,function(n,r){var u;(u=t[r.dataKey])&&(u.filterValue=r.filterValue,u.filterOperator=r.filterOperator,i.isPlainObject(u.filterOperator)&&(u.filterOperator=u.filterOperator.name),delete o._grid.deficientFilters[u.dataKey])}),i.each(this._grid.deficientFilters,function(n,i){t[n].filterOperator=i.filterOperator,t[n].filterValue=i.filterValue}))},t.prototype._mapPagingParams=function(){return this._grid.options.allowPaging&&!this._grid._customPagingEnabled()&&!this._grid._serverShaping()},t.prototype._mapSortingParams=function(){return this._grid.options.allowSorting&&!this._grid._serverShaping()},t.prototype._mapFilteringParams=function(){return!this._grid._serverShaping()},t.prototype.makeProxyFilter=function(t,r,u,f){var s;u=u.toLowerCase();var c=this,l=t.dataType==="datetime",e={originalOperator:undefined,property:r,operator:u,value:f},o=this._filterCache.getByNameInt(u),h=n.data.filtering.ops[u];return u!=="nofilter"&&(o.isCustom||l)&&(e.originalOperator=e.operator,o.isCustom?(e.operator=i.extend(!0,{},o.op),e.operator.apply=e.operator.operator):(e.operator=i.extend(!0,{},h),s=t.inputType?n.grid.TimeUnitConverter.convertInputType(t.inputType):n.grid.TimeUnitConverter.convertFormatString(t.dataFormatString||"d"),e.operator.apply=function(i,r){return i instanceof Date||(i=c._grid.parse(t,i)),r instanceof Date||(r=c._grid.parse(t,r)),n.grid.TimeUnitConverter.cutDate(i,s),n.grid.TimeUnitConverter.cutDate(r,s),h.apply(i,r)})),e},t.prototype._convertFilterToDV=function(n){var t={},r=this;return i.each(n,function(n,u){var l=u.dataKey,f=[],h="and",c,o,s,e;if(!i.isPlainObject(u))return;o=u.filterOperator,s=u.filterValue;if(o==null)return;i.isArray(o)||(o=[o]),i.isArray(s)||(s=[s]);if(o.length!=s.length)throw"The number of filter operators must match the number of filter values";if(o.length==0)return;i.each(o,function(n,t){function v(){e.length>1?e.splice(0,0,"or"):e=e[0]}function a(){h==null&&(h=c,f.splice(0,0,c))}var o;typeof t=="string"&&(t={name:t});if(!i.isPlainObject(t)||!t.name)throw"Invalid filter operator";o=s[n],i.isArray(o)||(o=[o]),e=i.map(o,function(n){return r.makeProxyFilter(u.owner,l,t.name,n)}),h=null,c=t.condition||"or",f.length>1&&h!=c?(v(),f=[f,e],a()):e.length!=1&&f.length>1&&h!="or"?(v(),f.push(e),a()):(f=f.concat(e),a())}),i.each(f,function(n,t){i.isArray(t)&&t.length==2&&(f[n]=t[1])}),f.length==2&&typeof(f[0]==="string")&&f.shift(),f.length==1&&(f=f[0]),t[l]=f}),t},t}();t.settingsManager=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";function e(n){return n&&"pageCount"in n?n:null}function f(n){return n&&"commitEdit"in n?n:null}var i=jQuery,u=function(){function t(n){this._domSource=null,this._ignoreAllEvents=!1,this._ignoreChangeEvent=!1,this._ignoreCurrentChangedEvent=!1,this._sharedDataItems=null,this._userData=null,this._totals=null,this._changeTimer=0,this._toDispose=[],this._isOwnDataView=!1,this._isGCDataSource=!1,this._isDynamicDataSource=!1,this._grid=n,this._createDataViewWrapper()}return t.prototype.data=function(){var i=this._getDataViewInst(),t=n.grid.asPagedDataView(i);return{data:this._getSharedDataItems(),totalRows:t!=null?t.totalItemCount():(i.getSource()||[]).length,totals:this._getTotals(),emptyData:this.isBoundedToDOM()?this._domSource.emptyData:null}},t.prototype.dataView=function(){return this._getDataViewInst()},t.prototype.dispose=function(){var n=this._getDataViewInst();this._propChangeListener.dispose(),i.each(this._toDispose,function(n,t){t.dispose()}),n&&this._isOwnDataView&&n.dispose(),this._grid._dataView=null},t.prototype.ignoreChangeEvent=function(n){if(arguments.length)this._ignoreChangeEvent=n===!0;else return this._ignoreChangeEvent},t.prototype.ignoreCurrentChangedEvent=function(n){if(arguments.length)this._ignoreCurrentChangedEvent=n===!0;else return this._ignoreCurrentChangedEvent},t.prototype.isDataLoaded=function(){var n=this._getDataViewInst();return n.isLoaded()},t.prototype.isOwnDataView=function(){return this._isOwnDataView},t.prototype.getFieldsInfo=function(){var n=this._getDataViewInst();return this._propDescriptorsToFieldsInfo(n.getProperties())},t.prototype._propDescriptorsToFieldsInfo=function(n){var t={};return n&&i.each(n,function(n,i){if(i.name==="$$hash")return;t[i.name]={name:i.name,type:i.type||"string"}}),t},t.prototype.isBoundedToDOM=function(){return this._domSource!==null},t.prototype.load=function(t){var i,u,f,r;this._userData=t,i=this._getDataViewInst(),i||(this._createDataViewWrapper(),i=this._getDataViewInst()),this._onDataViewLoading(),u=new n.grid.settingsManager(this._grid),this._needToLoad(u)?(f=u.MapWGToDV(),r=!1,this._isGCDataSource&&!this._isDynamicDataSource&&i.isLoaded()&&(r=!0),this.ignoreCurrentChangedEvent(!0),i.refresh(f,r)):this.isDataLoaded()&&(this._onDataViewLoaded(),this._onDataViewReset())},t.prototype.currentPosition=function(n){var t=this._getDataViewInst();if(!arguments.length)return t.currentPosition();this.ignoreCurrentChangedEvent(!0);try{t.currentPosition(n)}finally{this.ignoreCurrentChangedEvent(!1)}},t.prototype.getValue=function(n,t){var i=this._getDataViewInst();return typeof t=="number"&&(t=t+""),i.getProperty(n,t)},t.prototype.setValue=function(n,t,i){var r=this._getDataViewInst();this.ignoreChangeEvent(!0);try{typeof t=="number"&&(t=t+""),r.setProperty(n,t,i)}finally{this.ignoreChangeEvent(!1)}},t.prototype.makeDirty=function(){this._propChangeListener.removeAll(),this._totals=null,this._sharedDataItems=null},t.prototype._createDataViewWrapper=function(){var e,t=this._grid.options.data,r=this._getDataViewInst(),u=!1,f;if(r)return;t||(this._domSource=this._processDOM(this._grid.element,this._grid.options.readAttributesFromData),t=this._domSource.items),u=typeof gcuidatasource!="undefined"&&t instanceof gcuidatasource,this._isOwnDataView=i.isArray(t)||u,this._isGCDataSource=!!(this._isOwnDataView&&u),this._isDynamicDataSource=!!(this._isOwnDataView&&u&&t.dynamic),this._isOwnDataView?(!this._domSource&&this._grid.options.readAttributesFromData&&this._moveAttributesToExpando(t),f=this.isBoundedToDOM()&&n.grid.getTableSection(this._grid.element,n.grid.rowScope.body),r=n.grid.GridDataView.create(n.data.asDataView(this._parseOwnData(t,f)))):r=t,this._grid._dataView=r,this._toDispose.push(r.isLoading.subscribe(i.proxy(this._onDataViewLoadingInternal,this))),this._toDispose.push(r.isLoaded.subscribe(i.proxy(this._onDataViewLoadedInternal,this))),this._toDispose.push(r.subscribe(i.proxy(this._onDataViewChangeInternal,this))),this._toDispose.push(r.currentPosition.subscribe(i.proxy(this._onDataViewCurrentChangedInternal,this))),this._propChangeListener=new n.grid.propChangeListener(i.proxy(this._onPropertyChanged,this))},t.prototype._parseOwnData=function(t,r){var e=this;if(t&&t.length){var u=i.extend(!0,[],this._grid.options.columns),s=n.data.ArrayDataViewBase._getProps(t[0])||[],o=this._propDescriptorsToFieldsInfo(s),f=[];this._grid._prepareColumnOptions(u,"merge",o,!0,!0),n.grid.traverse(u,function(t){n.grid.validDataKey(t.dataKey)&&f.push(t)}),u.length&&i.each(t,function(t,i){n.grid.dataViewWrapper._parseDataItem(e._grid,i,r&&r.rows[t],f)})}return t},t._parseDataItem=function(t,r,u,f){return i.each(f,function(i,f){var s,e,o;n.grid.getDataType(f)!=="string"&&n.grid.validDataKey(f.dataKey)&&(s=r[f.dataKey],e=t.parse(f,s),isNaN(e)&&(o=null,u&&(o=u.cells[f.dataKey]),e=t.parseFailed(f,s,r,o)),r[f.dataKey]=e)}),r},t.prototype._getDataViewInst=function(){return this._grid._dataView},t.prototype._needToLoad=function(n){var t=this._getDataViewInst();return this._isDynamicDataSource||this._isGCDataSource&&!t.isLoaded()?!0:this._isOwnDataView&&!this._isGCDataSource&&this.isDataLoaded()?!0:this.isDataLoaded()||t.isLoading()?!n.compareSettings():!0},t.prototype._validateSettings=function(n){if(!this._isOwnDataView&&this._grid.options.allowPaging&&(n.DVPagingSettings()||{}).pageSize!==(n.WGPagingSettings()||{}).pageSize)throw"The pageSize option of the external dataView can't be changed.";},t.prototype._onDataViewLoadingInternal=function(n){if(this._ignoreAllEvents)return;n&&(this._userData||this._onDataViewLoading())},t.prototype._onDataViewLoadedInternal=function(n){if(this._ignoreAllEvents)return;n&&this._onDataViewLoaded()},t.prototype._onDataViewChangeInternal=function(n){var t=this;if(this._ignoreAllEvents||this._ignoreChangeEvent)return;if(n.changes){if(n.length&&n[0].entityState()==="detached")return;i.each(n.changes,function(n,i){switch(i.changeType){case"remove":t._propChangeListener.remove(i.index);break;case"add":t._propChangeListener.insert(i.index,i.element);break}})}this._onDataViewChange.apply(this,arguments)},t.prototype._onDataViewCurrentChangedInternal=function(){if(this._ignoreAllEvents||this._ignoreCurrentChangedEvent)return;this._onDataViewCurrentChanged.apply(this,arguments)},t.prototype._onDataViewReset=function(){try{this.ignoreCurrentChangedEvent(!1),this.makeDirty(),this._grid._onDataViewReset(this._userData)}finally{this._userData=null}},t.prototype._onPropertyChanged=function(n){var t=this;this._changeTimer>0&&(window.clearTimeout(this._changeTimer),this._changeTimer=0),this._changeTimer!=-1&&(this._changeTimer=window.setTimeout(function(){t._changeTimer=-1,t._grid._destroyed||t._onDataViewChange(),t._changeTimer=0},100))},t.prototype._onDataViewChange=function(n){this._onDataViewReset()},t.prototype._onDataViewCurrentChanged=function(n,t){this._grid._onDataViewCurrentPositionChanged(n,t)},t.prototype._onDataViewLoading=function(){this._grid._onDataViewLoading()},t.prototype._onDataViewLoaded=function(){this._grid._onDataViewLoaded()},t.prototype._getSharedDataItems=function(){var r,u,i,n,t;if(!this._sharedDataItems)for(r=this._getDataViewInst(),u=r.count(),this._sharedDataItems=[],i=!0,n=0;n<u;n++)t=r.item(n),i&&(this._propChangeListener.insert(n,t)||n!==0||(i=!1)),this._sharedDataItems.push(this._wrapDataItem(t,n));return this._sharedDataItems||(this._sharedDataItems=[]),this._sharedDataItems},t.prototype._getTotals=function(){if(!this._totals){var n=this._getDataViewInst();this._totals=this._prepareTotals(n,this._grid._prepareTotalsRequest(!0))}return this._totals||(this._totals={}),this._totals},t.prototype._prepareTotals=function(t,i){if(!i||i.length===0)return{};for(var u,s,e=[],o={},r=0,f=i.length;r<f;r++)e.push(new n.grid.tally);for(r=0,f=t.count();r<f;r++)for(u=0,s=e.length;u<s;u++)e[u].add(this._grid.parse(i[u].column,this.getValue(r,i[u].column.dataKey)));for(r=0,f=e.length;r<f;r++)o[i[r].column.dataKey]=e[r].getValueString(i[r].column);return o},t.prototype._processDOM=function(t,r){var u={items:[],emptyData:[],header:n.grid.readTableSection(t,n.grid.rowScope.head)};return n.grid.getTableSectionLength(t,2)===1&&i(n.grid.getTableSectionRow(t,2,0)).hasClass("gcui-gcuigrid-emptydatarow")?u.emptyData=n.grid.readTableSection(t,n.grid.rowScope.body):u.items=n.grid.readTableSection(t,n.grid.rowScope.body,r),u},t.prototype._moveAttributesToExpando=function(t){i.each(t,function(t,r){var f=n.data.Expando.getFrom(r,!0),u;u=f[n.grid.EXPANDO]={cellsAttributes:{},rowAttributes:{}},r.rowAttributes&&(u.rowAttributes=r.rowAttributes,delete r.rowAttributes),i.each(r,function(n,t){i.isArray(t)&&(u.cellsAttributes[n]=t[1],r[n]=t[0])})})},t.prototype._wrapDataItem=function(n,t){return{values:n,originalRowIndex:t}},t.prototype._refreshSilent=function(){var n=this._getDataViewInst();if(n)try{this._ignoreAllEvents=!0,n.refresh()}finally{this._ignoreAllEvents=!1}},t.prototype._unsafeReplace=function(t,i){var r=this._getDataViewInst();r instanceof n.grid.GridDataView||"operation is not supported",r._unsafeReplace(t,i)},t.prototype._unsafeSplice=function(t,i,r){var u=this._getDataViewInst();u instanceof n.grid.GridDataView||"operation is not supported",arguments.length===2?u._unsafeSplice(t,i):u._unsafeSplice(t,i,r)},t.prototype._unsafePush=function(t){var i=this._getDataViewInst();i instanceof n.grid.GridDataView||"operation is not supported",i._unsafePush(t)},t}(),r;t.dataViewWrapper=u,t.asPagedDataView=e,t.asEditableDataView=f,r=function(){function n(n){this._subscriptions=[],this._callback=n}return n.prototype.insert=function(n,t){var r=null,u=this;return i.each(t,function(n,t){u._isValidPropName(n)&&t&&i.isFunction(t.subscribe)&&(r=r||[],r.push(t.subscribe(u._callback)))}),r?(this._subscriptions.length<n&&(this._subscriptions.length=n),this._subscriptions.splice(n,0,r),!0):!1},n.prototype.remove=function(n){var t=this._subscriptions[n];t&&i.each(t,function(n,i){i.dispose(),t[n]=null}),this._subscriptions[n]=null,this._subscriptions.splice(n,1)},n.prototype.removeAll=function(){var n,t;while(n=this._subscriptions.length)this.remove(n-1);this._subscriptions=[]},n.prototype.dispose=function(){this.removeAll()},n.prototype._isValidPropName=function(n){return n&&typeof n=="string"?n.match(/^entityState|jQuery/)===null:!0},n}(),t.propChangeListener=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,u=function(){function r(t,i,r,u,f){this.cr=new n.grid.cellRange(-1,-1),this.isExpanded=!1,this._value=-1,this._sum=-1,this._position="none",this._hasHeaderOrFooter=!0,t!==undefined&&(this.isExpanded=t),i!==undefined&&(this.cr=i),r!==undefined&&(this._sum=r),u!==undefined&&(this._position=u),f!==undefined&&(this._hasHeaderOrFooter=f)}return r.prototype.isSubRange=function(n){return this.cr.r1>=n.cr.r1&&this.cr.r2<=n.cr.r2},r.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2},r.prototype.getHeaderImageClass=function(n){var i=this.owner;return i?n?i.expandedImageClass||t.c1field.prototype.options.groupInfo.expandedImageClass:i.collapsedImageClass||t.c1field.prototype.options.groupInfo.collapsedImageClass:null},r.prototype.collapse=function(){var t,f,r,i,u;(t=this.owner)&&(f=t.owner)&&(r=f.owner)&&(i=r._field("leaves"),n.grid.groupHelper.isParentExpanded(i,this.cr,t.level)&&t.position!=="footer"&&t.outlineMode!=="none"&&(u=n.grid.groupHelper.getGroupedColumnsCount(i),this._collapse(r._rows(),i,this,u,r._field("viewRenderBounds").start)))},r.prototype.expand=function(t){var u,e,i,r,f;(u=this.owner)&&(e=u.owner)&&(i=e.owner)&&(r=i._field("leaves"),n.grid.groupHelper.isParentExpanded(r,this.cr,u.level)&&(f=n.grid.groupHelper.getGroupedColumnsCount(r),this._expand(i._rows(),r,this,f,t,!0,i._field("viewRenderBounds").start)))},r.prototype._collapse=function(t,i,r,u,f){var c=r.owner,a=r.cr.r1,v=r.cr.r2,e,l,h,o,s;switch(c.position){case"header":case"headerAndFooter":this._toggleRowVisibility(t.item(r.cr.r1-f),undefined,!1),a++;break}for(e=a;e<=v;e++)this._toggleRowVisibility(t.item(e-f),!1);for(r.isExpanded=!1,this._updateHeaderIcon(t,r,f),e=c.level+1;e<=u;e++)for(h=n.grid.groupHelper.getChildGroupRanges(i,r.cr,e-1),s=0,l=h.length;s<l;s++){o=h[s],o.isExpanded=!1;switch(o.owner.position){case"header":case"headerAndFooter":this._toggleRowVisibility(t.item(o.cr.r1-f),undefined,!1);break}this._updateHeaderIcon(t,o,f)}},r.prototype._expand=function(t,i,r,u,f,e,o){var p=r.owner,c=r.cr.r1,a=r.cr.r2,s,v,h,l,y;switch(p.position){case"header":this._toggleRowVisibility(t.item(c-o),!0,e||f),c++;break;case"footer":this._toggleRowVisibility(t.item(a-o),!0),a--;break;case"headerAndFooter":this._toggleRowVisibility(t.item(c-o),!0,e||f),e&&this._toggleRowVisibility(t.item(a-o),!0),c++,a--;break}if(e)r.isExpanded=!0,this._updateHeaderIcon(t,r,o);else return;if(r.owner.level===u)for(s=c;s<=a;s++)this._toggleRowVisibility(t.item(s-o),!0);else{h=n.grid.groupHelper.getChildGroupRanges(i,r.cr,r.owner.level);if(h.length&&c!==h[0].cr.r1)for(s=c;s<h[0].cr.r1;s++)this._toggleRowVisibility(t.item(s-o),!0);if(f)for(s=0,v=h.length;s<v;s++)l=h[s],this._expand(t,i,l,u,f,!0,o);else for(s=0,v=h.length;s<v;s++)l=h[s],y=l.owner.position==="footer"||l.owner.outlineMode==="none"?!0:!1,this._expand(t,i,l,u,!1,y,o)}},r.prototype._toggleRowVisibility=function(n,t,i){n&&(n[0]&&(t!==undefined&&(n[0].style.display=t?"":"none",n[0]["aria-hidden"]=t?"false":"true"),i!==undefined&&(n[0]["aria-expanded"]=i?"true":"false")),n[1]&&(t!==undefined&&(n[1].style.display=t?"":"none",n[1]["aria-hidden"]=t?"false":"true"),i!==undefined&&(n[1]["aria-expanded"]=i?"true":"false")))},r.prototype._updateHeaderIcon=function(n,t,r){if(t.owner.position!=="footer"){var u=n.item(t.cr.r1-r);u&&i.each(u,function(n,r){if(r){var u=i(r).find("div.gcui-gcuigrid-grouptogglebtn:first-child");u&&u.length&&(u.toggleClass(t.getHeaderImageClass(!t.isExpanded),!1),u.toggleClass(t.getHeaderImageClass(t.isExpanded),!0))}})}},r}(),r;t.groupRange=u,r=function(){function t(){this._groupRowIdx=0}return t.prototype.group=function(n,t,r){var f=this,e,u;this._grid=n,this._data=t,this._leaves=r,this._groupRowIdx=0,i.each(r,function(n,t){t.groupInfo&&(delete t.groupInfo.level,delete t.groupInfo.expandInfo)}),e=this._grid._groupedColumns(!0),u=1,i.each(e,function(n,t){f._groupRowIdx=0,t.groupInfo&&t.groupInfo.position&&t.groupInfo.position!=="none"&&t.dataIndex>=0&&(t.groupInfo.level=u,t.groupInfo.expandInfo=[],f._processRowGroup(t,u++))}),delete this._grid,delete this._data,delete this._leaves},t.prototype._processRowGroup=function(t,r){var l,u,c,y,v,f,h,o,s,e,p=0,a=!0;for(i.each(this._leaves,function(n,t){if(t.parentVis)return p=n,!1}),l=0;l<this._data.length;l++){if(!(this._data[l].rowType&n.grid.rowType.data))continue;u=this._getGroupCellRange(l,t,r),c=!0,y=t.groupInfo.outlineMode==="startCollapsed";if(y||n.grid.groupHelper.isParentCollapsed(this._leaves,u,r)){if(t.groupInfo.groupSingleRow===!1&&u.r1===u.r2)continue;c=!1}if(r&&this._grid.options.groupIndent)for(v=u.r1;v<=u.r2;v++)this._addIndent(this._data[v][p],r);a=!(t.groupInfo.groupSingleRow===!1&&u.r1===u.r2);switch(t.groupInfo.position){case"header":for(f=this._addGroupRange(t.groupInfo,u,c,a),e=u.r1;e<=u.r2;e++)this._data[e].__attr["aria-level"]=r+1,c||(this._data[e].__style.display="none",this._data[e].__attr["aria-hidden"]=!0);if(!a)break;this._updateByGroupRange(f,r),h=n.grid.groupHelper.isParentCollapsed(this._leaves,f.cr,r),o=this._buildGroupRow(f,u,!0,h),this._data.splice(u.r1,0,o),o.__attr["arial-level"]=r,o.__attr["aria-expanded"]=c,h&&(o.__style.display="none",o.__attr["aria-hidden"]=!0),l=u.r2+1;break;case"footer":f=this._addGroupRange(t.groupInfo,u,!0,a);if(!a)break;this._updateByGroupRange(f,r),s=this._buildGroupRow(f,u,!1,!1),s.__attr["aria-level"]=r,this._data.splice(u.r2+1,0,s),l=u.r2+1,h=n.grid.groupHelper.isParentCollapsed(this._leaves,f.cr,r),h&&(s.__style.display="none",s.__attr["aria-hidden"]=!0);break;case"headerAndFooter":for(f=this._addGroupRange(t.groupInfo,u,c,a),e=u.r1;e<=u.r2;e++)this._data[e].__attr["aria-level"]=r+1,c||(this._data[e].__style.display="none",this._data[e].__attr["aria-hidden"]=!0);if(!a)break;this._updateByGroupRange(f,r),h=n.grid.groupHelper.isParentCollapsed(this._leaves,f.cr,r),o=this._buildGroupRow(f,u,!0,h),s=this._buildGroupRow(f,u,!1,!1),this._data.splice(u.r2+1,0,s),s.__attr["aria-level"]=r,(h||!c)&&(s.__style.display="none",s.__attr["aria-hidden"]=!0),this._data.splice(u.r1,0,o),o.__attr["aria-level"]=r,o.__attr["aria-expanded"]=c,h&&(o.__style.display="none",o.__attr["aria-hidden"]=!0),l=u.r2+2;break;default:throw n.grid.stringFormat('Unknown Position value: "{0}"',t.groupInfo.position);}this._groupRowIdx++}},t.prototype._buildGroupRow=function(t,i,r,u){var s=t.owner,e=s.owner,p=e.owner,c=[],v="",y="",o,h,f,b,k,l,w,a;for(c.__style={},c.__attr={},c.__attr.id=(r?"GH":"GF")+this._groupRowIdx+"-"+s.level,c.rowType=r?n.grid.rowType.groupHeader:n.grid.rowType.groupFooter,e.dataIndex<0||(o=this._data[i.r1][e.dataIndex].value)===null||(v=p.toStr(e,o)),this._grid._showRowHeader()&&c.push({html:"&nbsp;"}),h={html:"",__attr:{},__style:{}},r&&s.outlineMode!=="none"&&(h.html=t.isExpanded?'<div class="'+p.options.uiCSS.icon+" "+t.getHeaderImageClass(!0)+' gcui-gcuigrid-grouptogglebtn">&nbsp;</div>':'<div class="'+p.options.uiCSS.icon+" "+t.getHeaderImageClass(!1)+' gcui-gcuigrid-grouptogglebtn">&nbsp;</div>'),c.push(h),e.aggregate&&e.aggregate!=="none"&&(y=this._getAggregate(i,e,e,r,v)),f=r?s.headerText:s.footerText,f==="custom"?(b={data:this._data,column:e,groupByColumn:s.owner,groupText:v,text:"",groupingStart:i.r1,groupingEnd:i.r2,isGroupHeader:r,aggregate:y},this._grid._trigger("groupText",null,b)&&(f=b.text)):((f===undefined||f===null)&&(r&&(f="{1}: {0}"),(y||y===0)&&(f=f?f+" {2}":"{2}")),f=n.grid.stringFormat(f,v,e&&e.headerText?e.headerText:"",y.toString())),f||(f="&nbsp;"),h.html+="<span>"+f+"</span>",this._addIndent(h,s.level-1),k=1,l=this._grid._showRowHeader()?1:0,w=!0;l<this._leaves.length;l++){o=this._leaves[l];if(o.parentVis){if(w){w=!1;continue}if(o.dynamic!==!0&&o.aggregate&&o.aggregate!=="none")break;k++}}for(;l<this._leaves.length;l++)o=this._leaves[l],o.parentVis&&(a=this._getAggregate(i,o,s.owner,r,v),a||a===0||(a="&nbsp;"),c.push({html:a.toString(),__attr:{groupInfo:{leafIndex:o.leavesIdx,purpose:n.grid.groupRowCellPurpose.aggregateCell}}}));return h.__attr.colSpan=k,h.__attr.groupInfo={leafIndex:e.leavesIdx,purpose:n.grid.groupRowCellPurpose.groupCell},c},t.prototype._getAggregate=function(t,i,r,u,f){var o="",s,h,e;if(!i.aggregate||i.aggregate==="none")return o;if(i.aggregate==="custom")s={data:this._data,column:i,groupByColumn:r,groupText:f,text:"",groupingStart:t.r1,groupingEnd:t.r2,isGroupHeader:u},this._grid._trigger("groupAggregate",null,s)&&(o=s.text);else{for(h=new n.grid.tally,e=t.r1;e<=t.r2;e++)h.add(this._data[e][i.dataIndex].value);o=h.getValueString(i)}return o},t.prototype._getGroupCellRange=function(t,i,r){var h=i.leavesIdx,u=new n.grid.cellRange(t,h),s=n.grid.groupHelper.getParentGroupRange(this._leaves,u,r),e,f,o;if(this._data[t].rowType&n.grid.rowType.data)for(e=this._data[t][i.dataIndex].value,e instanceof Date&&(e=e.getTime()),u.r2=t,o=this._data.length-1;u.r2<o;u.r2++){if(!(this._data[u.r2+1].rowType&n.grid.rowType.data)||s&&u.r2+1>s.cr.r2)break;f=this._data[u.r2+1][i.dataIndex].value,f instanceof Date&&(f=f.getTime());if(e!==f)break}return u},t.prototype._addGroupRange=function(t,i,r,u){var f=null,o=n.grid.groupHelper.getChildGroupIndex(i,t.expandInfo),h,s,c,e;return o>=0&&o<t.expandInfo.length?f=t.expandInfo[o]:(h=new n.grid.cellRange(i.r1,i.r1,i.r2,i.r2),s=t.position==="footer"||!u?!0:r&&t.outlineMode!=="startCollapsed",f=new n.grid.groupRange(s,h,-1,t.position,u),f.owner=t,t.expandInfo.push(f)),f&&u&&(c=i.r1,e=i.r2,t.position==="headerAndFooter"&&(e+=2),t.position!=="headerAndFooter"&&e++,f.cr.r2=e),f},t.prototype._updateByGroupRange=function(n,t){for(var r,s,f,i,e,u=0,o=this._leaves.length;u<o;u++){r=this._leaves[u].groupInfo;if(r&&r.level<t)for(s=r.expandInfo?r.expandInfo.length:0,f=0;f<s;f++)i=r.expandInfo[f],e=n.position==="headerAndFooter"?2:1,i.cr.r1<n.cr.r1||i.cr.r1===n.cr.r1&&i.position==="footer"||(i.cr.r1+=e),i.cr.r2<n.cr.r1||(i.cr.r2+=e)}},t.prototype._addIndent=function(n,t){var i;t>0&&(i=this._grid.options.groupIndent)&&(n.__style.paddingLeft=i*t+"px")},t}(),t.grouper=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var r=jQuery,i=function(){function t(){}return t._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$"),t.getGroupInfo=function(t){if(t){var i=n.grid.groupHelper._getGroupInfoRegExp.exec(t.id),f,u,r;if(i)return f=parseInt(i[3],10),u=parseInt(i[2],10),r=i[1]==="H",{level:f,index:u,isHeader:r,toString:function(){return(r?"GH":"GF")+u+"-"+f}}}return null},t.getColumnByGroupLevel=function(n,t){for(var i,r=0,u=n.length;r<u;r++){i=n[r];if(i.groupInfo&&i.groupInfo.level===t)return i}return null},t.getGroupedColumnsCount=function(n){for(var r=0,t,i=0,u=n.length;i<u;i++)t=n[i].groupInfo,t&&(t.position==="header"||t.position==="headerAndFooter"||t.position==="footer")&&r++;return r},t.getChildGroupIndex=function(n,t){var r=0,f=t.length-1,i,u;while(r<=f){i=(f-r>>1)+r,u=t[i].cr.r1-n.r1;if(u===0)return i;u<0?r=i+1:f=i-1}return r},t.getParentGroupIndex=function(t,i){var r=n.grid.groupHelper.getChildGroupIndex(t,i);return r>0&&r--,r<i.length?r:-1},t.getChildGroupRanges=function(t,i,r){var h=[],f,e,u,c,o,s=n.grid.groupHelper.getColumnByGroupLevel(t,r+1);if(s)for(f=s.groupInfo.expandInfo,o=n.grid.groupHelper.getChildGroupIndex(i,f),u=o,c=f.length;u<c;u++){e=f[u];if(e.cr.r2>i.r2)break;else h.push(e)}return h},t.getParentGroupRange=function(t,i,r){var f,u,e;r===undefined&&(r=65535);if(r-2>=0)for(f=t.length-1;f>=0;f--){u=t[f].groupInfo;if(!u||!u.expandInfo||u.level<0||u.level!==r-1)continue;e=n.grid.groupHelper.getParentGroupIndex(i,u.expandInfo);if(e>=0)return u.expandInfo[e]}return null},t.isParentCollapsed=function(t,i,r){var f,u;if(r===1)return!1;for(f=r;f>1;f--){u=n.grid.groupHelper.getParentGroupRange(t,i,f);if(u&&!u.isExpanded)return!0;i=u.cr}return!1},t.isParentExpanded=function(t,i,r){var f,u;if(r===1)return!0;for(f=r;f>1;f--){u=n.grid.groupHelper.getParentGroupRange(t,i,f);if(u&&u.isExpanded)return!0;i=u.cr}return!1},t}();t.groupHelper=i})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var u=jQuery,r=function(){function n(n,t,i,r){switch(arguments.length){case 2:this.r1=this.r2=n,this.c1=this.c2=t;break;case 4:this.r1=n,this.r2=i,this.c1=t,this.c2=r;break;default:this.r1=0,this.r2=0,this.c1=0,this.c2=0}}return n.prototype.isSingleCell=function(){return this.r1===this.r2&&this.c1===this.c2},n}(),i;t.cellRange=r,i=function(){function t(){}return t.prototype.merge=function(n,t){this._leaves=t,this._data=n;for(var i,r=0,u=this._leaves.length;r<u;r++)i=this._leaves[r],i.dataIndex<0||i.isBand||i.rowMerge!=="free"&&i.rowMerge!=="restricted"||this._mergeColumn(i);delete this._data,delete this._leaves},t.prototype._mergeColumn=function(t){for(var o=t.dataIndex,i,e,u,r=0,f=this._data.length;r<f;r++){if(!(this._data[r].rowType&n.grid.rowType.data))continue;i=this._getCellRange(r,t);if(i.r1!==i.r2)for(e=i.r2-i.r1+1,this._data[i.r1][o].__attr.rowSpan=e,u=i.r1+1;u<=i.r2;u++)this._data[u][o].visible=!1;r=i.r2}},t.prototype._getCellRange=function(t,i){var o=i.dataIndex,r=new n.grid.cellRange(t,o),h=(this._data[t][o].value||"").toString(),c=this._data.length,u,f,e,s;for(r.r2=t;r.r2<c-1;r.r2++){u=this._data[r.r2+1];if(!(u.rowType&n.grid.rowType.data)||(u[o].value||"").toString()!==h)break}return f=i.leavesIdx,f>0&&i.rowMerge==="restricted"&&(e=this._leaves[f-1],e.dataIndex<0||(s=this._getCellRange(t,e),r.r1=Math.max(r.r1,s.r1),r.r2=Math.min(r.r2,s.r2))),r},t}(),t.merger=i})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";function d(t,r){var u,e,f;if(i.isArray(t)&&i.isArray(r)){if(t.length===r.length){for(f=!0,u=0,e=t.length;u<e&&f;u++)f=n.grid.compareObj(t[u],r[u]);return f}}else if(i.isPlainObject(t)&&i.isPlainObject(r)){for(u in t)if(t.hasOwnProperty(u))if(!n.grid.compareObj(t[u],r[u]))return!1;for(u in r)if(r.hasOwnProperty(u))if(!n.grid.compareObj(t[u],r[u]))return!1;return!0}else t instanceof Date&&(t=t.getTime()),r instanceof Date&&(r=r.getTime());return t===r}function g(n){for(var r=[],t,u,i=0;i<arguments.length-1;i++)r[i]=arguments[i+1];if(!n)return"";for(t=0,u=r.length;t<u;t++)n=n.replace(new RegExp("\\{"+t+"\\}","gm"),r[t]);return n}function nt(n){return n&&!(n<0)||n===0}function ut(n){return n&&n instanceof Date?!isNaN(n.getTime()):!1}function st(n){return n.dataType||n._underlyingDataType||"string"}function ht(n,t){n&&t&&n.find(".ui-widget").each(function(n,r){return i.each(i(r).data(),function(i,r){r.widgetName&&t(n,r)}),!0})}function ct(n,t){var r=[];i.each(n.data(),function(n){n.indexOf(t)===0&&r.push(n)}),i.each(r,function(t,i){n.removeData(i)})}function et(n){return i.extend(!0,{},t.c1basefield.prototype.options,t.c1field.prototype.options,{dynamic:!0,isLeaf:!0,isBand:!1,parentIdx:-1},n)}function ot(n,t){if(n){var u=n.nodeType?i(n):n,r=u.offset();if(r)return t?{top:r.top,left:r.left,width:u[0].clientWidth||0,height:u[0].clientHeight||0}:{top:r.top,left:r.left,width:u.outerWidth(),height:u.outerHeight()}}return null}function h(t,i,r){i===undefined&&(i=3);if(t&&i!==0){if(!r&&t.nodeType===3)return t.nodeValue;if(t.nodeType===1){switch(t.type){case"button":case"text":case"textarea":case"select-one":return t.value;case"checkbox":return t.checked.toString()}var f="",e=0,u;while(u=t.childNodes[e++])f+=n.grid._getDOMText(u,i-1);return f}}return""}function c(n,t,r,u){var o=n.jquery||i.isArray(n),f,h,s,e=t+r;if(arguments.length===3)return o?i.data(n[0],e):i.data(n,e);else{if(o){for(f=0,h=n.length;f<h;f++)s=i.data(n[f],e,u);return s}return i.data(n,e,u)}}function l(n,t){if(t&&n){var i,u,r;for(i in t)t.hasOwnProperty(i)&&(u=t[i],r=typeof u,(r==="string"||r==="boolean"||r==="number")&&n[i]===undefined&&(n[i]=u))}}function e(n){return n&&typeof n=="object"&&!(n instanceof Date)}function o(n,t){var r,u,f=i.isFunction(t);for(r in n)if(n.hasOwnProperty(r)){u=f?t(n[r]):n[r]===t;if(u===!0)return{at:r,found:n[r]}}return{at:null,found:null}}function s(n,t){if(n){for(var e=0,o={},i,r,u=0,f=n.attributes.length;u<f;u++)r=n.attributes[u].name,!r||t&&t(r)||(i=n.getAttribute(r),r==="style"&&(i=typeof i=="object"?i.cssText:i),i||r!=="class"||(i=n.getAttribute("className")),i&&typeof i!="function"&&(o[r]=i,e++));if(e)return o}return null}function a(t,r){var e,f,u,s,o;if(t){typeof r=="object"||i.isFunction(r)||(r={});for(e in t){f=t[e],u=r[u];if(f===r)continue;f&&(i.isPlainObject(f)||(s=i.isArray(f)))?(s?(s=!1,o=u&&i.isArray(u)?u:[]):o=u&&i.isPlainObject(u)?u:{},r[e]=n.grid.deepExtend(f,o)):r[e]=f}}return r}function w(n,t){return n&&n.jquery&&(n=n[0]),n?arguments.length===1?i.data(n,"gcuigridwidgetName"):i.data(n,"gcuigridwidgetName",t):undefined}function k(n,t,i){return n>t&&n<t+i}function v(t,i,r,u,f,e){return n.grid.isOverAxis(t,r,f)&&n.grid.isOverAxis(i,u,e)}function p(){return"uid"+f++}var i=jQuery,y,b,ft,tt,it,rt,r,u,f;t.EXPANDO="__gcuigrid",function(n){n._map=[],n.header=1,n.data=2,n.dataAlt=4,n.filter=8,n.groupHeader=16,n.groupFooter=32,n.footer=64,n.emptyDataRow=128}(t.rowType||(t.rowType={})),y=t.rowType,function(n){n._map=[],n.none=0,n.rendering=1,n.current=2,n.hovered=4,n.selected=8}(t.renderState||(t.renderState={})),b=t.renderState,function(n){n._map=[],n.table=0,n.head=1,n.body=2,n.foot=3}(t.rowScope||(t.rowScope={})),ft=t.rowScope,function(n){n._map=[],n.none=0,n.column=1,n.row=2}(t.cellRangeExtendMode||(t.cellRangeExtendMode={})),tt=t.cellRangeExtendMode,function(n){n._map=[],n.createIfNull=0,n.createAlways=1,n.dispose=2}(t.objectMode||(t.objectMode={})),it=t.objectMode,function(n){n._map=[],n.groupCell=0,n.aggregateCell=1}(t.groupRowCellPurpose||(t.groupRowCellPurpose={})),rt=t.groupRowCellPurpose,t.compareObj=d,t.stringFormat=g,t.validDataKey=nt,t.validDate=ut,t.getDataType=st,t.iterateChildrenWidgets=ht,t.remove$dataByPrefix=ct,r=function(){function n(n){this._dom=n}return n.prototype.getSelection=function(){var t=0,n=0,i;return this._dom.selectionStart!==undefined?(t=this._dom.selectionStart,n=this._dom.selectionEnd):document.selection&&(i=document.selection.createRange().duplicate(),n=i.text.length,t=Math.abs(i.moveStart("character",-this._dom.value.length)),n+=t),{start:t,end:n,length:n-t}},n.prototype.setSelection=function(n){if(this._dom.selectionStart!==undefined)this._dom.setSelectionRange(n.start,n.end);else{var t=this._dom.createTextRange();t.collapse(!0),t.moveStart("character",n.start),t.moveEnd("character",n.end),t.select()}},n.prototype.toggleSelection=function(n){var t=i(this._dom),r="onselectstart"in this._dom;n?r?t.unbind(".gcuigrid-disableSelection"):t.css({MozUserSelect:"",WebkitUserSelect:""}):r?t.bind("selectstart.gcuigrid-disableSelection",function(n){n.preventDefault()}):t.css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})},n}(),t.domSelection=r,t.createDynamicField=et,t.bounds=ot,t._getDOMText=h,t.dataPrefix=c,t.shallowMerge=l,t.isCustomObject=e,t.search=o,t.getAttributes=s,t.deepExtend=a,t.widgetName=w,u=function(){function t(){}return t._requiresExtendedSupport={date:"",datetime:"","datetime-local":"",month:"",time:""},t.isExtendSupportRequired=function(t){return t=(t||"").toLowerCase(),t in n.grid.HTML5InputSupport._requiresExtendedSupport},t.getDefaultInputType=function(t,i){var r=i.inputType;if(!r){r="text";if(t)switch(n.grid.getDataType(i)){case"number":case"currency":r="number";break;case"datetime":r="datetime";break}}return r},t.toStr=function(t,i){var r=t;i=(i||"").toLowerCase();if(n.grid.HTML5InputSupport.isExtendSupportRequired(i))switch(i){case"datetime":r=t?r=Globalize.format(t,"yyyy-MM-ddTHH:mm:ssZ"):"";break;case"datetime-local":r=t?r=Globalize.format(t,"yyyy-MM-ddTHH:mm:ss"):"";break;case"date":r=t?r=Globalize.format(t,"yyyy-MM-dd"):"";break;case"month":r=t?r=Globalize.format(t,"yyyy-MM"):"";break;case"time":r=t?r=Globalize.format(t,"HH:mm:ss"):"";break}else r=t+"";return r},t.parse=function(t,i){var r,u=function(t){return t=new Date(t),n.grid.validDate(t)||(t=null),t};i=(i||"").toLowerCase();if(n.grid.HTML5InputSupport.isExtendSupportRequired(i))switch(i){case"datetime":r=Globalize.parseDate(t,"yyyy-MM-ddTHH:mm:ssZ")||Globalize.parseDate(t,"yyyy-MM-ddTHH:mmZ")||u(t);break;case"datetime-local":r=Globalize.parseDate(t,"yyyy-MM-ddTHH:mm:ss")||Globalize.parseDate(t,"yyyy-MM-ddTHH:mm")||u(t);break;case"date":r=Globalize.parseDate(t,"yyyy-MM-dd")||u(t);break;case"month":r=Globalize.parseDate(t,"yyyy-MM");break;case"time":r=Globalize.parseDate(t,"HH:mm:ss")||Globalize.parseDate(t,"HH:mm");break;case"number":r=parseFloat(t)}else r=t;return r},t.extend=function(n,t,i){if(n){i=(i||"").toLowerCase();switch(i){case"date":n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate());break;case"month":n.setFullYear(t.getFullYear(),t.getMonth());break;case"time":n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());break;default:n=t}}else n=t;return n},t}(),t.HTML5InputSupport=u,t.isOverAxis=k,t.isOver=v,f=0,t.getUID=p,i.extend(i.gcui.gcuigrid,{rowType:n.grid.rowType,renderState:n.grid.renderState,bounds:n.grid.bounds})})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){(function(n){n._map=[],n.Millisecond=1,n.Second=2,n.Minute=4,n.Hour=8,n.Day=16,n.Month=32,n.Year=64,n.DATE=n.Year|n.Month|n.Day,n.TIME=n.Hour|n.Minute|n.Second|n.Millisecond,n.ALL=n.DATE|n.TIME})(t.TimeUnit||(t.TimeUnit={}));var i=t.TimeUnit,r=function(){function t(){}return t.convertInputType=function(t){var r=n.grid.TimeUnitConverter.convertInputTypeToFormatString(t);return n.grid.TimeUnitConverter.convertFormatString(r)},t.convertInputTypeToFormatString=function(n){switch((n||"").toLowerCase()){case"datetime":case"datetime-local":return"f";case"date":return"d";case"month":return"Y";case"time":return"t"}return""},t.convertFormatString=function(n){var t=0,f,u,r,e;if(n){if(n.length===1)switch(n[0]){case"t":return i.Hour|i.Minute;case"T":return i.TIME;case"d":case"D":return i.DATE;case"Y":return i.Month|i.Year;case"M":return i.Month|i.Day;case"S":return i.ALL}for((f=n.indexOf("'"))<0||(u=n.lastIndexOf("'"))<0||f===u||(n=n.substr(0,f)+n.substring(u+1,n.length-1)),r=0,e=n.length;r<e;r++)switch(n[r]){case"d":t|=i.Day;break;case"M":t|=i.Month;break;case"y":t|=i.Year;break;case"m":t|=i.Minute;break;case"h":case"H":t|=i.Hour;break;case"s":t|=i.Second;break;case"f":t|=i.Millisecond;break}}return t||i.ALL},t.cutDate=function(n,t){return n&&(t=~t,t&i.Millisecond&&n.setMilliseconds(0),t&i.Second&&n.setSeconds(0),t&i.Minute&&n.setMinutes(0),t&i.Hour&&n.setHours(0),t&i.Day&&n.setDate(1),t&i.Month&&n.setMonth(0),t&i.Year&&n.setFullYear(0)),n},t}();t.TimeUnitConverter=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,u=function(){function n(){}return n.NoFilterOp={applicableTo:null,name:"NoFilter",arity:1,operator:function(){return!0}},n}(),f=function(){function t(t){this._cache={};var r=this;this._grid=t,this._addOperator(null,u.NoFilterOp),i.each(n.data.filtering.ops,function(n,t){r._addOperator(n,t)}),i.each(t.options.customFilterOperators,function(n,t){r._addOperator(null,t,!0)})}return t.prototype.getByName=function(n){var t=this.getByNameInt(n);return t?t.op:null},t.prototype.getByNameInt=function(n){return this._cache[(n||"").toLowerCase()]},t.prototype.getByDataType=function(n){var t=[],r;i.each(this._cache,function(r,u){var f=u.op;f.applicableTo&&i.inArray(n,f.applicableTo)<0||t.push(u)});switch(this._grid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":t.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":t.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":t.sort(this._sortAlphaEmbeddedFirst);break;case"none":break;default:break}return r=i.map(t,function(n,t){return n.op})},t.prototype._addOperator=function(n,t,i){typeof i=="undefined"&&(i=!1),n&&!t.name&&(t.name=n),n=(n||t.name).toLowerCase(),this._cache[n]||(this._cache[n]={op:t,isCustom:i===!0})},t.prototype._sortAlpha=function(n,t){var r=n.op.name.toLowerCase(),i=t.op.name.toLowerCase();if(r!==i){if(r==="nofilter")return-1;if(i==="nofilter")return 1}return r===i?0:r<i?-1:1},t.prototype._sortAlphaEmbeddedFirst=function(n,t){var r=n.op.name.toLowerCase(),i=t.op.name.toLowerCase();if(r!==i){if(r==="nofilter")return-1;if(i==="nofilter")return 1}if(n.isCustom!==t.isCustom){if(n.isCustom)return 1;if(t.isCustom)return-1}return r===i?0:r<i?-1:1},t.prototype._sortAlphaCustomFirst=function(n,t){var r=n.op.name.toLowerCase(),i=t.op.name.toLowerCase();if(r!==i){if(r==="nofilter")return-1;if(i==="nofilter")return 1}if(n.isCustom!==t.isCustom){if(n.isCustom)return-1;if(t.isCustom)return 1}return r===i?0:r<i?-1:1},t}(),r;t.filterOperatorsCache=f,r=function(){function t(){}return t.marker="_gcuigrid",t.getSingleValue=function(n){return i.isArray(n)&&(n=n[0],i.isArray(n)&&(n=n[0])),n},t.getSingleOperatorName=function(n){return i.isArray(n)&&(n=n[0]),n.name||n||""},t.verify=function(t,r,u,f){if(t)if(i.isArray(t)){var e,h,o=[],s=[];for(i.isArray(r)||(r=[r]),e=0,h=t.length;e<h;e++)n.grid.filterHelper._verifySingleOp(t[e],r[e],u,f)&&(o.push({name:t[e].name||t[e],condition:t[e].condition||"or"}),s.push(r?r[e]:undefined));if(o.length)return{filterOperator:o,filterValue:s}}else if(n.grid.filterHelper._verifySingleOp(t,r,u,f))return{filterOperator:t,filterValue:r};return null},t._verifySingleOp=function(t,r,u,f){if(t&&(t=t.name||t)){var e;t=(t||"").toLowerCase();if((t!=="nofilter"||r!==undefined)&&(e=f.getByName(t)))if(e.applicableTo===null||i.inArray(u||"string",e.applicableTo)>=0)if(e.arity===1||e.arity>1&&n.grid.filterHelper.getSingleValue(r)!==undefined)return!0}return!1},t}(),t.filterHelper=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";function e(t,i){t&&!t.nodeType&&(t=t[0]);if(t)switch(i){case n.grid.rowScope.head:return t.tHead;case n.grid.rowScope.body:if(t.tBodies)return t.tBodies[0]||null;break;case n.grid.rowScope.foot:return t.tFoot;default:return t}return null}function u(n,t){var i;return n&&!n.nodeType&&(n=n[0]),n&&(i=this.getTableSection(n,t))?i.rows.length:0}function f(n,t,i){var r;return n&&!n.nodeType&&(n=n[0]),n&&(r=this.getTableSection(n,t))?r.rows[i]||null:null}function r(t,i,r){var e,v,u,l,f,s,y,a,c=[],p=function(n){return n=n.toLowerCase(),n==="rowspan"||n==="colspan"},h;t&&!t.nodeType&&(t=t[0]);if(t&&(h=this.getTableSection(t,i)))for(e=0,v=h.rows.length;e<v;e++){for(f=h.rows[e],s=[],r&&(y=n.data.Expando.getFrom(s,!0),a=y[n.grid.EXPANDO]={cellsAttributes:{},rowAttributes:n.grid.getAttributes(f)||{}}),u=0,l=f.cells.length;u<l;u++)s[u]=o.trim(f.cells[u].innerHTML),r&&(a.cellsAttributes[u]=n.grid.getAttributes(f.cells[u],p)||{});c[e]=s}return c}var o=jQuery,i;t.getTableSection=e,t.getTableSectionLength=u,t.getTableSectionRow=f,t.readTableSection=r,i=function(){function t(n,t,i,r){this._width=0,this._table=n,this._offsets=[],r&&this.ensureColGroup(),i&&this.ensureTBody(),t||this._buildOffsets()}return t.prototype.element=function(){return this._table},t.prototype.width=function(){return this._width},t.prototype.getCellIdx=function(n,t){return n<this._width?this._offsets[t][n].cellIdx:-1},t.prototype.getColumnIdx=function(n,t){if(typeof n!="number"){var i=n;n=i.cellIndex,t=i.parentNode.rowIndex}return n<this._width?this._offsets[t][n].colIdx:-1},t.prototype.clearSection=function(t){var i,r,u=n.grid.getTableSection(this._table,t);switch(t){case n.grid.rowScope.body:i=this.getSectionLength(n.grid.rowScope.table),r=i+this.getSectionLength(t)-1;break;case n.grid.rowScope.foot:i=this.getSectionLength(n.grid.rowScope.table)+this.getSectionLength(n.grid.rowScope.head),r=i+this.getSectionLength(t)-1;break;default:i=0,r=this.getSectionLength(t)-1}while(u.rows.length)u.deleteRow(0);this._offsets.splice(i,r-i+1)},t.prototype.getSectionLength=function(t){return n.grid.getTableSectionLength(this._table,t)},t.prototype.getSectionRow=function(t,i){return n.grid.getTableSectionRow(this._table,i,t)},t.prototype.forEachColumnCellNatural=function(n,t,i){for(var f,u,r=0,e=this._table.rows.length;r<e;r++){f=this._table.rows[r];if(n<f.cells.length){u=t(f.cells[n],r,i);if(u!==!0)return u}}return!0},t.prototype.forEachColumnCell=function(n,t,i){for(var o,u,f,r=0,e=this._offsets.length;r<e;r++){o=this._table.rows[r],u=this.getCellIdx(n,r);if(u>=0){f=t(o.cells[u],r,i);if(f!==!0)return f}}return!0},t.prototype.forEachRowCell=function(n,t,i){for(var f=this._table.rows[n],u,r=0,e=f.cells.length;r<e;r++){u=t(f.cells[r],r,i);if(u!==!0)return u}return!0},t.prototype.colGroupTag=function(){var n=this._table.getElementsByTagName("colgroup");return n&&n[0]||null},t.prototype.colTags=function(){var n=this.colGroupTag();return n&&n.getElementsByTagName("col")||[]},t.prototype.ensureTBody=function(){return this._table.tBodies&&this._table.tBodies[0]||this._table.appendChild(document.createElement("tbody"))},t.prototype.ensureTHead=function(){return this._table.tHead&&this._table.tHead[0]||this._table.createTHead()},t.prototype.ensureTFoot=function(){return this._table.tFoot&&this._table.tFoot[0]||this._table.createTFoot()},t.prototype.ensureColGroup=function(){var n=this._table.getElementsByTagName("colgroup");return n&&n[0]||this._table.appendChild(document.createElement("colgroup"))},t.prototype.appendCol=function(n){var t=this.ensureColGroup();return n&&t.appendChild(n)||t.appendChild(document.createElement("col"))},t.prototype.removeOffset=function(n){n>=0&&n<this._offsets.length&&((n<0||!n&&n!==0)&&(n=this._offsets.length-1),this._offsets.splice(n,1))},t.prototype.insertOffset=function(n){var i,t;if(this._width>0){for(i=[],t=0;t<this._width;t++)i.push({cellIdx:t,colIdx:t});(n<0||!n&&n!==0)&&(n=this._offsets.length),this._offsets.splice(n,0,i)}},t.prototype.rebuildOffsets=function(){this._offsets=[],this._width=0,this._buildOffsets()},t.prototype._buildOffsets=function(){for(var r=[],t,o,i,n,c,f,e,s,u=0,h=this._table.rows.length;u<h;u++){for(t=[],this._offsets[u]=t,o=this._table.rows[u],i=0,n=0,c=o.cells.length;i<c;i++,n++){for(f=o.cells[i];r[n]>1;n++)r[n]--,t[n]={cellIdx:-1,colIdx:-1};for(r[n]>1||(r[n]=f.rowSpan),t[n]={cellIdx:i,colIdx:-1},t[i].colIdx=n,e=f.colSpan;e>1;e--)t[++n]={cellIdx:-1,colIdx:-1}}for(s=r.length;n<s;n++)r[n]--,t[n]={cellIdx:-1,colIdx:-1};this._width=Math.max(this._width,s)}},t}(),t.htmlTableAccessor=i})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,u=function(){function t(n,t,i,r){typeof i=="undefined"&&(i=null),typeof r=="undefined"&&(r=!1),this.__isEdit=!1,this._grid=i,r?(this._cia=n,this._ria=t):(this._ci=n,this._ri=t)}return t.outsideValue=new t(-1,-1,null,!0),t.prototype.cellIndexAbs=function(n){if(arguments.length===0)return this._ensureCia(),this._cia;this._ci=undefined,this._cia=n},t.prototype.rowIndexAbs=function(n){if(arguments.length===0)return this._ensureRia(),this._ria;this._ri=undefined,this._ria=n},t.prototype.cellIndex=function(n){if(arguments.length===0)return this._ensureCi(),this._ci;this._cia=undefined,this._ci=n},t.prototype.column=function(){return this._grid&&this._isValid()?this._grid._field("visibleLeaves")[this.cellIndexAbs()]:null},t.prototype.container=function(){var t=this.tableCell(),n;if(t){n=i(t).children("div.gcui-gcuigrid-innercell");if(n)return n}return null},t.prototype.isEqual=function(n){return n&&n.rowIndex()===this.rowIndex()&&n.cellIndex()===this.cellIndex()},t.prototype.row=function(){var n=null,t=null;return this._grid&&(n=this._grid._view().rows().item(this.rowIndexAbs()),n&&n.length&&(t=this._grid._view()._getRowInfo(n))),t},t.prototype.rowIndex=function(n){if(arguments.length===0)return this._ensureRi(),this._ri;this._ria=undefined,this._ri=n},t.prototype.tableCell=function(){return this._grid&&this._isValid()?this._grid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs()):null},t.prototype.value=function(t){var i,r,u;if(this._grid&&this._isValid()){r=this._grid._view()._getRowInfo(this._grid._rows().item(this.rowIndex()));if(r.type&n.grid.rowType.data){i=this.column();if(arguments.length===0)return u=this._grid._dataViewWrapper.getValue(r.data,i.dataKey),this._grid.parse(i,u);else{t=this._grid.parse(i,t);if(t===null&&i.valueRequired||n.grid.getDataType(i)!=="string"&&isNaN(t))throw"invalid value";this._grid._dataViewWrapper.setValue(r.dataItemIndex,i.dataKey,t)}}}},t.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()},t.prototype._clip=function(n,t){typeof t=="undefined"&&(t=!1);var r=!1,i;return t?(this.cellIndexAbs()<(i=n.topLeft().cellIndexAbs())&&(r=!0,this._cia=i,this._ci=undefined),this.cellIndexAbs()>(i=n.bottomRight().cellIndexAbs())&&(r=!0,this._cia=i,this._ci=undefined),this.rowIndexAbs()<(i=n.topLeft().rowIndexAbs())&&(r=!0,this._ria=i,this._ri=undefined),this.rowIndexAbs()>(i=n.bottomRight().rowIndexAbs())&&(r=!0,this._ria=i,this._ri=undefined)):(this.cellIndex()<(i=n.topLeft().cellIndex())&&(r=!0,this._ci=i,this._cia=undefined),this.cellIndex()>(i=n.bottomRight().cellIndex())&&(r=!0,this._ci=i,this._cia=undefined),this.rowIndex()<(i=n.topLeft().rowIndex())&&(r=!0,this._ri=i,this._ria=undefined),this.rowIndex()>(i=n.bottomRight().rowIndex())&&(r=!0,this._ri=i,this._ria=undefined)),r},t.prototype._clone=function(){return new n.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._grid)},t.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0},t.prototype._isEdit=function(n){if(!arguments.length)return this.__isEdit;this.__isEdit=n},t.prototype._setGridView=function(n){this._grid=n},t.prototype._ensureCia=function(){if(this._cia===undefined){if(this._ci===null)throw"relative index value is undefined";if(this._ci<0)this._cia=this._ci;else{if(!this._grid)throw"gcuigrid is null";this._cia=this._ci+this._grid._getDataToAbsOffset().x}this._cia<0&&(this._cia=-1)}},t.prototype._ensureRia=function(){if(this._ria===undefined){if(this._ri===undefined)throw"relative index value is undefined";if(this._ri<0)this._ria=this._ri;else{if(!this._grid)throw"gcuigrid is null";this._ria=this._ri+this._grid._getDataToAbsOffset().y}this._ria<0&&(this._ria=-1)}},t.prototype._ensureCi=function(){if(this._ci===undefined){if(this._cia===undefined)throw"absolute index value is undefined";if(this._cia<0)this._ci=this._cia;else{if(!this._grid)throw"gcuigrid is null";this._ci=this._cia-this._grid._getDataToAbsOffset().x}this._ci<0&&(this._ci=-1)}},t.prototype._ensureRi=function(){if(this._ri===undefined){if(this._ria===undefined)throw"relative index value is undefined";if(this._ria<0)this._ri=this._ria;else{if(!this._grid)throw"gcuigrid is null";this._ri=this._ria-this._grid._getDataToAbsOffset().y}this._ri<0&&(this._ri=-1)}},t}(),r;t.cellInfo=u,r=function(){function t(n,t){if(!n||!t)throw"invalid arguments";this._topLeft=n._clone(),this._bottomRight=t._clone()}return t.prototype.bottomRight=function(){return this._bottomRight},t.prototype.isEqual=function(n){return n&&this._topLeft.isEqual(n.topLeft())&&this._bottomRight.isEqual(n.bottomRight())},t.prototype.topLeft=function(){return this._topLeft},t.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()},t.prototype._isIntersect=function(n){var i,u,t,r;if(n){i=n.bottomRight().rowIndex()-n.topLeft().rowIndex()+1,u=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1;if(n.topLeft().rowIndex()+i-this._topLeft.rowIndex()<i+u)return t=n.bottomRight().cellIndex()-n.topLeft().cellIndex()+1,r=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1,n.topLeft().cellIndex()+t-this._topLeft.cellIndex()<t+r}return!1},t.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()},t.prototype._clip=function(n,t){typeof t=="undefined"&&(t=!1);var r=this._topLeft._clip(n,t),i=this._bottomRight._clip(n,t);return r||i},t.prototype._clone=function(){return new t(this._topLeft._clone(),this._bottomRight._clone())},t.prototype._containsCellInfo=function(n){return n&&n.cellIndex()>=this._topLeft.cellIndex()&&n.cellIndex()<=this._bottomRight.cellIndex()&&n.rowIndex()>=this._topLeft.rowIndex()&&n.rowIndex()<=this._bottomRight.rowIndex()},t.prototype._containsCellRange=function(n){return n&&this._containsCellInfo(n.topLeft())&&this._containsCellInfo(n.bottomRight())},t.prototype._extend=function(t,i){return t===n.grid.cellRangeExtendMode.column?(this._topLeft.rowIndex(i.topLeft().rowIndex()),this._bottomRight.rowIndex(i.bottomRight().rowIndex())):t===n.grid.cellRangeExtendMode.row&&(this._topLeft.cellIndex(i.topLeft().cellIndex()),this._bottomRight.cellIndex(i.bottomRight().cellIndex())),this},t.prototype._normalize=function(){var i=this._topLeft.cellIndex(),r=this._topLeft.rowIndex(),n=this._bottomRight.cellIndex(),t=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(i,n)),this._topLeft.rowIndex(Math.min(r,t)),this._bottomRight.cellIndex(Math.max(i,n)),this._bottomRight.rowIndex(Math.max(r,t))},t.prototype._height=function(){return this._bottomRight.rowIndex()-this._topLeft.rowIndex()},t.prototype._width=function(){return this._bottomRight.cellIndex()-this._topLeft.cellIndex()},t}(),t.cellInfoRange=r,i.extend(i.gcui.gcuigrid,{cellInfo:n.grid.cellInfo,cellInfoRange:n.grid.cellInfoRange})})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(n,t){this._rowHeaderSize=22,this._sizesAdjCache={th:0,col:0,subTable:0};if(!n)throw"'gcuigrid' must be specified";this._grid=n,this._bounds=t,this._grid.element.addClass("gcui-gcuigrid-table")}return t.prototype.dispose=function(){this.toggleDOMSelection(!0),this._grid.element.removeClass("gcui-gcuigrid-table")},t.prototype.ensureDisabledState=function(){var t="gcui-gcuigrid-disabled "+this._grid.options.uiCSS.stateDisabled,r=this._grid.options.disabled,n=this;i.each(this.subTables(),function(u,f){if(f){var e=i(f.element());r?(e.addClass(t),n._grid._setAttr(e,"aria-disabled",!0)):(e.removeClass(t),n._grid._setAttr(e,"aria-disabled",!1))}})},t.prototype.ensureWidth=function(n,t,i){this._setColumnWidth(n,t)},t.prototype.ensureHeight=function(n){},t.prototype.getScrollValue=function(){return null},t.prototype.getVisibleAreaBounds=function(){throw"not implemented";},t.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented";},t.prototype.render=function(){this._ensureRenderBounds(),this._preRender();var n=this._grid.outerDiv.css("display");this._grid.outerDiv.css("display","none"),this._renderContent(),this._grid.outerDiv.css("display",n),this._postRender()},t.prototype.toggleDOMSelection=function(t){i.each(this.subTables(),function(i,r){new n.grid.domSelection(r.element()).toggleSelection(t)}),new n.grid.domSelection(this._grid.outerDiv).toggleSelection(t)},t.prototype.updateSplits=function(n){throw"not implemented";},t.prototype.bodyRows=function(){return this._bodyRowsAccessor||(this._bodyRowsAccessor=new n.grid.rowAccessor(this,n.grid.rowScope.body,0,0)),this._bodyRowsAccessor},t.prototype.filterRow=function(){if(this._grid.options.showFilter){var t=new n.grid.rowAccessor(this,n.grid.rowScope.head,0,0);return t.item(t.length()-1)}return null},t.prototype.headerRows=function(){var t;return this._headerRowsAccessor||(t=this._grid.options.showFilter?1:0,this._headerRowsAccessor=new n.grid.rowAccessor(this,n.grid.rowScope.head,0,t)),this._headerRowsAccessor},t.prototype.rows=function(){return this._rowsAccessor||(this._rowsAccessor=new n.grid.rowAccessor(this,n.grid.rowScope.table,0,0)),this._rowsAccessor},t.prototype.focusableElement=function(){throw"not implemented";},t.prototype.forEachColumnCell=function(n,t,i){throw"not implemented";},t.prototype.forEachRowCell=function(n,t,i){throw"not implemented";},t.prototype.getAbsoluteCellInfo=function(n){throw"not implemented";},t.prototype.getAbsoluteRowIndex=function(n){throw"not implemented";},t.prototype.getCell=function(n,t){throw"not implemented";},t.prototype.getColumnIndex=function(n){throw"not implemented";},t.prototype.getHeaderCell=function(n){throw"not implemented";},t.prototype.getJoinedCols=function(n){throw"not implemented";},t.prototype.getJoinedRows=function(n,t){throw"not implemented";},t.prototype.getJoinedTables=function(n,t){throw"not implemented";},t.prototype.subTables=function(){throw"not implemented";},t.prototype._getMappedScrollMode=function(){var i=this._grid.options.scrollMode,t="auto",n="auto";switch(i){case"horizontal":t="hidden",n="visible";break;case"vertical":t="visible",n="hidden";break;case"both":t="visible",n="visible";break}return{vScrollBarVisibility:t,hScrollBarVisibility:n}},t.prototype._postRender=function(){var u,t,n,r;this.ensureDisabledState(),this._sizesAdjCache.col=0,this._sizesAdjCache.th=0,this._sizesAdjCache.subTable=0,u=this._grid._field("visibleLeaves"),u.length>0&&(t=this.getHeaderCell(0),n=this.getJoinedCols(0),t&&(this._sizesAdjCache.th=i(t).leftBorderWidth()+i(t).rightBorderWidth()),n&&n.length&&(this._sizesAdjCache.col=i(n[0]).leftBorderWidth()+i(n[0]).rightBorderWidth())),r=this.subTables()[0],this._sizesAdjCache.subTable=i(r.element()).leftBorderWidth()+i(r.element()).rightBorderWidth()},t.prototype._preRender=function(){throw"not implemented";},t.prototype._ensureRenderBounds=function(){var n=this._grid._getDataCellsRange();this._bounds.start=0,this._bounds.end=n.bottomRight().rowIndex()},t.prototype._renderContent=function(){this._renderCOLS(),this._renderHeader(),this._grid.options.showFilter&&this._renderFilter(),this._renderBody(),this._grid.options.showFooter&&this._renderFooter()},t.prototype._renderCOLS=function(){for(var r=this._grid._field("visibleLeaves"),t,u,n=0,i=r.length;n<i;n++)t=r[n],u=this._createCol(t,n),this._appendCol(u,t,n)},t.prototype._renderHeader=function(){var f=n.grid.rowType,i=this._grid._columnsHeadersTable(),t,r,u;if(i&&(r=i.length))for(t=0;t<r;t++)u=this._insertEmptyRow(f.header,t,-1,-1,-1),this._renderRow(u,null,i[t])},t.prototype._renderFilter=function(){var t=this._insertEmptyRow(n.grid.rowType.filter,-1,-1,-1,-1);this._renderRow(t,this._grid._field("visibleLeaves"),null)},t.prototype._renderBody=function(){var s=n.grid.rowType,o=this._grid._field("visibleLeaves"),h=this._grid.sketchTable,l=-1,c=0,e=0,i,u,t,r,f=this._grid._dataOffset;if(this._bounds.start>=0)for(i=this._bounds.start;i<=this._bounds.end;i++)t=h[i-f],r=(t.rowType&s.data)!=0,u=this._insertEmptyRow(t.rowType,e++,r?++l:-1,r?t.originalRowIndex:-1,r?c+t.originalRowIndex:-1),this._renderRow(u,o,t)},t.prototype._renderFooter=function(){var t=this._insertEmptyRow(n.grid.rowType.footer,-1,-1,-1,-1);this._renderRow(t,this._grid._field("visibleLeaves"),null)},t.prototype._insertEmptyRow=function(t,i,r,u,f){var o=this._grid._onViewInsertEmptyRow.apply(this._grid,arguments),e=this._insertRow(t,i,o);return this._createRowInfo(e,t,n.grid.renderState.rendering,i,r,u,f)},t.prototype._createEmptyCell=function(t,i,r){var f=n.grid.rowType,u=this._grid._onViewCreateEmptyCell.apply(this._grid,arguments);return this._createCell(t.type,u)},t.prototype._insertRow=function(n,t,i){throw"not implemented";},t.prototype._createCell=function(t,r){var f=n.grid.rowType,u;r||(r=t===f.header?document.createElement("th"):document.createElement("td"));if(t!==f.filter){u=document.createElement("div"),u.className="gcui-gcuigrid-innercell";if(r.firstChild)while(r.firstChild)u.appendChild(r.firstChild);r.appendChild(u)}return i(r)},t.prototype._appendCell=function(n,t,i){throw"not implemented";},t.prototype._createCol=function(n,t){throw"not implemented";},t.prototype._appendCol=function(n,t,i){throw"not implemented";},t.prototype._renderRow=function(t,i,r){var u=n.grid.rowType,e,f;switch(t.type){case u.filter:this._renderFilterRow(t,i);break;case u.footer:this._renderFooterRow(t,i);break;case u.header:this._renderHeaderRow(t,r);break;case u.data:case u.data|u.dataAlt:this._renderDataRow(t,i,r),e=r.__attr,f=r.__style;break;case u.emptyDataRow:case u.groupHeader:case u.groupFooter:this._renderSpannedRow(t,i,r),e=r.__attr,f=r.__style;break;default:throw"unknown rowType";}this._rowRendered(t,e,f)},t.prototype._renderCell=function(t,r,u,f,e,o,s){var h=this._createEmptyCell(t,e.dataIndex,e),c=t.type===n.grid.rowType.filter?h:i(h[0].firstChild);this._appendCell(t,r,h),f?c.html(u):this._grid.cellFormatter.format(c,e,u,t),this._cellRendered(t,h,r,e,o,s)},t.prototype._renderDataRow=function(n,t,i){for(var f,r,e,s,o,c=!1,u=0,h=t.length;u<h;u++){f=t[u],r=f.dataIndex,e=null;if(r>=0&&(!i[r]||i[r].visible===!1))continue;e=r>=0?this._grid.toStr(f,i[r].value):null,s=r>=0?i[r].__attr:null,o=r>=0?i[r].__style:null,this._renderCell(n,u,e,c,f,s,o)}},t.prototype._renderFilterRow=function(t,i){for(var u,r=0,f=i.length;r<f;r++)u=i[r],this._renderCell(t,r,n.grid.filterHelper.getSingleValue(u.filterValue),!1,u)},t.prototype._renderFooterRow=function(n,t){for(var i=0,r=t.length;i<r;i++)this._renderCell(n,i,"",!1,t[i])},t.prototype._renderHeaderRow=function(n,t){for(var f=0,i,r=0,u=t.length;r<u;r++)i=t[r],i.column&&i.column.parentVis&&(i.column.thX=f++,i.column.thY=n.sectionRowIndex,this._renderCell(n,r,i.column.headerText,!1,i.column,{colSpan:i.colSpan,rowSpan:i.rowSpan}))},t.prototype._renderSpannedRow=function(n,t,i){for(var f,u=Math.min(t.length,i.length),r=0;r<u;r++)this._renderCell(n,r,i[r].html,!0,t[r],i[r].__attr,i[r].__style)},t.prototype._cellRendered=function(t,i,r,u,f,e){this._grid.cellStyleFormatter.format(i,r,u,t,n.grid.renderState.rendering,f,e),this._changeCellRenderState(i,n.grid.renderState.rendering,!1),this._grid._onViewCellRendered(t,i,r,u)},t.prototype._rowRendered=function(t,i,r){this._grid.rowStyleFormatter.format(t,i,r),t.state&=~n.grid.renderState.rendering,this._setRowInfo(t.$rows,t),this._grid._onViewRowRendered(t)},t.prototype._isBodyRow=function(t){var r=n.grid.rowType,i=t.type;return i&r.data||i===r.groupHeader||i===r.groupFooter||i===r.emptyDataRow},t.prototype._changeRowRenderState=function(n,t,i){i?n.state|=t:n.state&=~t,this._setRowInfo(n.$rows,n)},t.prototype._changeCellRenderState=function(t,i,r){var f=n.grid.dataPrefix,u=this._grid._data$prefix,e=f(t,u,"renderState");return r?(i=e|i,f(t,u,"renderState",i)):(i=e&~i,f(t,u,"renderState",i)),i},t.prototype._adjustWidthArray=function(n,t,r,u){var h=this._sumWidthArray(n),a=this._sumWidthArray(t),f=[],e,o=0,s,l,c=!0;if(h>r){i.extend(!0,f,t);if(a<r)e=r-a;else return f}else{i.extend(!0,f,n);if(h===r||u)return f;else e=r-h}return i.each(f,function(n,t){t.real||o++}),o!==0&&(s=Math.floor(e/o),l=e-s*o,i.each(f,function(n,t){t.real||(t.width+=s,c&&(t.width+=l,c=!1))})),f},t.prototype._getColumnWidth=function(n){var o,s,c,v,h,u,r,l,e,t,a,f;s=this._grid._field("visibleLeaves")[n];if(s._realWidth!==undefined)o={width:s._realWidth,real:!0};else if(s.isRowHeader)o={width:this._rowHeaderSize,real:!0};else{for(f=0,c=this.getJoinedTables(!0,n),v=c[2],h=0;h<2;h++){u=c[h];if(u!==null){r=u.element().rows;if(a=r.length){for(t=a-1,e=null;t>=0;t--)if(r[t].cells.length===u.width()){e=r[t];break}e&&(l=e.cells[v],f=Math.max(f,i(l).outerWidth()))}}}o={width:f,real:!1}}return o},t.prototype._setColumnWidth=function(n,t){var f=this.getHeaderCell(n),e=this.getJoinedCols(n),r,u;t&&(u=this,f&&(r=t-this._sizesAdjCache.th,r<0&&(r=0),f.style.width=r+"px"),i.each(e,function(n,i){i&&(r=t-u._sizesAdjCache.col,r<0&&(r=0),i.style.width=r+"px")}))},t.prototype._setTableWidth=function(n,t,r,u){var e,f,o=this;i.each(n,function(n,i){i[0].style.tableLayout="fixed",i[0].style.width=t-o._sizesAdjCache.subTable+"px"}),e=n[0].outerWidth(),f=e-t,f!==0&&this._setColumnWidth(u,r-f)},t.prototype._sumWidthArray=function(n,t,r){var u=0;return i.each(n,function(n,i){if(t!==undefined&&r!==undefined&&(n<t||n>r))return!0;u+=i.width}),u},t.prototype._clearBody=function(){i.each(this.subTables(),function(n,t){t.clearSection(2)})},t.prototype._rebuildOffsets=function(){i.each(this.subTables(),function(n,t){t.rebuildOffsets()})},t.prototype._removeBodyRow=function(t,i){var f=n.grid.rowType,o=this._grid._rows(),e,h,r,l,c,s,u;if(t>=0&&t<(h=o.length())){if(i)for(e=0;e<h;e++)r=this._getRowInfo(o.item(e)),c=r.sectionRowIndex-t,r.sectionRowIndex>t&&(r.sectionRowIndex--,r.type&f.data&&(r.type&f.dataAlt?r.type&=~f.dataAlt:r.type|=f.dataAlt,r.dataItemIndex--,r.dataRowIndex--,r.virtualDataItemIndex--),this._setRowInfo(r.$rows,r));r=this._getRowInfo(o.item(t),!1),s=this.getAbsoluteRowIndex(r.$rows[0]),r.$rows.remove(),u=this.getJoinedTables(!1,s),u[0]&&u[0].removeOffset(u[2]),u[1]&&u[1].removeOffset(u[2])}},t.prototype._insertBodyRow=function(t,i,r,u){var c=this._grid._field("visibleLeaves"),h=n.grid.rowType,a=this._grid._view(),l=this._grid._rows(),s=l.length(),v=(t.rowType&h.data)!=0,e,o,f;return i>=0&&i<s&&(i||i===0)||(i=s),e=this._insertEmptyRow(t.rowType,i,-1,r,u),this._renderRow(e,c,t),o=this.getAbsoluteRowIndex(e.$rows[0]),f=this.getJoinedTables(!1,o),f[0]&&f[0].insertOffset(o),f[1]&&f[1].insertOffset(o),e},t.prototype._findRowInfo=function(n){var u=this.bodyRows(),t=0,f=u.length(),r;if(i.isFunction(n))for(t=0;t<f;t++){r=this._getRowInfo(u.item(t));if(n(r)===!0)return r}return null},t.prototype._setRowInfo=function(t,i){var f="$rows"in i,e="data"in i,r,u;f&&(r=i.$rows,delete i.$rows),e&&(u=i.data,delete i.data),n.grid.dataPrefix(t,this._grid._data$prefix,"rowInfo",i),f&&(i.$rows=r),e&&(i.data=u)},t.prototype._getRowInfo=function(t,r){typeof r=="undefined"&&(r=!0);var e=this._grid,f=t[1]?i(t):i(t[0]),u=n.grid.dataPrefix(f,e._data$prefix,"rowInfo"),s;u.$rows=f;if(r&&u.dataItemIndex>=0&&u.type&n.grid.rowType.data)try{u.data=e._getDataItem(u.dataItemIndex)}catch(o){u.data=null}return u},t.prototype._createRowInfo=function(t,r,u,f,e,o,s){var c,h={type:r,state:u,sectionRowIndex:f,dataRowIndex:e,dataItemIndex:o,virtualDataItemIndex:s,$rows:i(t)};return o>=0&&r&n.grid.rowType.data&&(h.data=this._grid._getDataItem(o)),h},t}();t.baseView=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(t){function r(n,i){t.call(this,n,i),this._dataTable=null,this._contentArea=null}return __extends(r,t),r.prototype.dispose=function(){this._grid.outerDiv.unbind("scroll",this._onScroll),t.prototype.dispose.call(this)},r.prototype.ensureWidth=function(n,r,u){var f=i(this._dataTable.element()),e=f.width()+r-u;t.prototype.ensureWidth.call(this,n,r,u),this._setTableWidth([f],e,r,n)},r.prototype.getVisibleAreaBounds=function(){var t=n.grid.bounds(this._dataTable.element()),i;return this._grid.options.scrollMode==="none"?t:(i=n.grid.bounds(this._grid.outerDiv.find(".gcui-gcuigrid-split-area-se:first")[0]),{top:t.top,left:t.left,width:Math.min(i.width,t.width),height:Math.min(i.height,t.height)})},r.prototype.updateSplits=function(n){var e=this,u=this._grid,a=u.options,o=u.element,s=[],l=[],r=[],f=u._field("visibleLeaves"),c=u.outerDiv,h,t;o.css({"table-layout":"",width:""}),i.each(f,function(n,t){var r,i=t.width;(i||i===0)&&(r=typeof i=="string"&&i.length>1&&i[i.length-1]==="%",i=r?c.width()*parseFloat(i)/100:parseFloat(i),(t.ensurePxWidth||t.ensurePxWidth===undefined&&a.ensureColumnsPxWidth)&&(t._realWidth=i),e._setColumnWidth(n,i))}),i.each(f,function(n,t){s.push(e._getColumnWidth(n))}),o.css("width","1px"),i.each(f,function(n,t){l.push(e._getColumnWidth(n))}),h=c.width(),r=this._adjustWidthArray(s,l,h,a.ensureColumnsPxWidth),i.each(r,function(n,t){var i=f[n];if(i._realWidth!==undefined){delete i._realWidth;return}e._setColumnWidth(n,t.width)}),t=r.length-1,t!==-1&&this._setTableWidth([o],this._sumWidthArray(r,0,t),r[t].width,t)},r.prototype.focusableElement=function(){return i(this._dataTable.element())},r.prototype.forEachColumnCell=function(n,t,i){return this._dataTable.forEachColumnCell(n,t,i)},r.prototype.forEachRowCell=function(n,t,i){return this._dataTable.forEachRowCell(n,t,i)},r.prototype.getAbsoluteCellInfo=function(t){return new n.grid.cellInfo(this.getColumnIndex(t),t.parentNode.rowIndex,this._grid,!0)},r.prototype.getAbsoluteRowIndex=function(n){return n.rowIndex},r.prototype.getCell=function(n,t){var r=this._dataTable.getCellIdx(n,t),i;if(r>=0){i=this.getJoinedRows(t,0);if(i[0])return i[0].cells[r]}return null},r.prototype.getColumnIndex=function(n){return this._dataTable.getColumnIdx(n)},r.prototype.getHeaderCell=function(t){var i=this._grid._field("visibleLeaves")[t],r;return i&&(r=this._grid._headerRows())?n.grid.rowAccessor.getCell(r.item(i.thY),i.thX):null},r.prototype.getJoinedCols=function(n){var t=i(this._dataTable.element()).find("> colgroup");if(t.length)if(n<t[0].childNodes.length)return[t[0].childNodes[n],null];return[null,null]},r.prototype.getJoinedRows=function(n,t){return[this._dataTable.getSectionRow(n,t),null]},r.prototype.getJoinedTables=function(n,t){return[this._dataTable,null,t]},r.prototype.subTables=function(){return[this._dataTable]},r.prototype._preRender=function(){this._dataTable=new n.grid.htmlTableAccessor(this._grid.element[0],!0,!0,!0)},r.prototype._postRender=function(){this._grid.element.find("> tbody").addClass(this._grid.options.uiCSS.content+" gcui-gcuigrid-data"),this._dataTable=new n.grid.htmlTableAccessor(this._grid.element[0]),this._grid._setAttr(this._grid.element,{role:"grid",cellpadding:"0",border:"0",cellspacing:"0"}),this._grid.element.css("border-collapse","separate"),this._grid.outerDiv.bind("scroll",{gcuigrid:this._grid},i.proxy(this._onScroll,this)),t.prototype._postRender.call(this)},r.prototype._insertRow=function(t,i,r){var f=n.grid.rowType,u;switch(t){case f.header:case f.filter:u=this._dataTable.ensureTHead();break;case f.footer:u=this._dataTable.ensureTFoot();break;default:u=this._dataTable.ensureTBody()}return r?[u.appendChild(r)]:(i>u.rows.length&&(i=-1),[u.insertRow(i)])},r.prototype._rowRendered=function(n,i,r){var u=n.$rows[0];!u.cells.length&&this._isBodyRow(n)?u.parentNode.removeChild(u):t.prototype._rowRendered.call(this,n,i,r)},r.prototype._appendCell=function(n,t,i){n.$rows[0].appendChild(i[0])},r.prototype._createCol=function(n,t){return[document.createElement("col")]},r.prototype._appendCol=function(n,t,i){this._dataTable.appendCol(n[0])},r.prototype._onScroll=function(n){n.data.gcuigrid.$superPanelHeader&&n.data.gcuigrid.$superPanelHeader.css("left",n.target.scrollLeft),n.data.gcuigrid.$bottomPagerDiv&&n.data.gcuigrid.$bottomPagerDiv.css("left",n.target.scrollLeft)},r}(t.baseView);t.flatView=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(t){function r(n,r){t.call(this,n,r),this._verScrollBarSize=18,this._viewTables={},this._splitAreas={},this.element=n.element,this._allowVirtualScrolling=n._allowVirtualScrolling(),this._staticDataRowIndex=n._getStaticIndex(!0),this._staticRowIndex=n._getRealStaticRowIndex(),this._staticColumnIndex=n._getRealStaticColumnIndex(),this._staticAllColumnIndex=this._staticColumnIndex===-1?-1:n._field("visibleLeaves")[this._staticColumnIndex].leavesIdx,this._mouseWheelHandler=i.proxy(this._onMouseWheel,this)}return __extends(r,t),r.prototype.dispose=function(){t.prototype.dispose.call(this),this._grid.outerDiv.unbind("mousewheel",this._mouseWheelHandler)},r.prototype.ensureWidth=function(n,r,u){var h=this._grid,e=h.options,s=this._staticColumnIndex,c=n<=s,f=i(this._viewTables.nw.element()),o=i(this._viewTables.ne.element()),y=i(this._viewTables.sw.element()),p=i(this._viewTables.se.element()),w=c?[f,y]:[o,p],l=(c?f.width():o.width())+r-u,a=h._field("frozener"),v=this.getScrollValue();this._destroySuperPanel(),t.prototype.ensureWidth.call(this,n,r,u),this._setTableWidth(w,l,r,n);try{e.splitDistanceX=s<0?0:f[0].offsetWidth}catch(b){}this._updateSplitAreaBounds(0),this._adjustRowsHeights();try{e.splitDistanceY=this._staticRowIndex<0?0:Math.max(f[0].offsetHeight,o[0].offsetHeight)}catch(b){}this._updateSplitAreaBounds(1),this.refreshPanel(v),a.refresh()},r.prototype.ensureHeight=function(n){var f,o=this._grid,e=o.options,c=i(this._viewTables.nw.element()),l=i(this._viewTables.ne.element()),r=i(this._viewTables.sw.element()),u=i(this._viewTables.se.element()),h=o._field("frozener"),s=this.getScrollValue(),t;this._destroySuperPanel(),arguments.length>0&&(f=this.getJoinedRows(n,2),this._setRowHeight(f,this._getRowHeight(f))),u.css("height",""),r.css("height",""),t=Math.max(u.height(),r.height()),u.height(t),r.height(t);try{e.splitDistanceY=this._staticRowIndex<0?0:Math.max(c[0].offsetHeight,l[0].offsetHeight)}catch(a){}this._updateSplitAreaBounds(1),this.refreshPanel(s),h.refresh()},r.prototype.getScrollValue=function(){var n=this._getSuperPanel();return n?{x:n.options.hScroller.scrollValue,y:n.options.vScroller.scrollValue}:null},r.prototype.getVisibleAreaBounds=function(){var t=n.grid.bounds(this._grid.outerDiv.find(".gcui-superpanel-contentwrapper:first"));return t||(t=n.grid.bounds(this._grid.outerDiv)),t},r.prototype.getFixedAreaVisibleBounds=function(){var t=this.getVisibleAreaBounds(),f=n.grid.bounds(this._splitAreas.ne),i=n.grid.bounds(this._splitAreas.nw),u=null,r=null;return(f.height||i.height)&&(u={left:t.left,top:t.top,width:t.width,height:Math.min(f.height||i.height,t.height)}),i.width&&(r={left:i.left,top:t.top,width:Math.min(i.width,t.width),height:t.height}),[u,r]},r.prototype.refreshPanel=function(t){var f=this,r=this._grid,u=r.options,s=this._getGridWidth(u.scrollMode),o=this._getMappedScrollMode(),c=this._testNeedVBar(r.outerDiv,r.element,i(this._viewTables.ne.element()),u.scrollMode,r._autoHeight),e=c&&!h,l=t?t.x:null,a=t?t.y:null,h=i.support.isTouchEnabled&&i.support.isTouchEnabled();this._scroller.width(s),this._splitAreas.ne.width(s-u.splitDistanceX-(e?this._verScrollBarSize:0)),u.staticColumnsAlignment==="right"&&(this._splitAreas.nw.css({left:"",right:e?this._verScrollBarSize:0}),this._splitAreas.sw.css({left:"",right:e?this._verScrollBarSize:0})),this._scroller.data("gcui-superpanel")?this._scroller.superpanel("paintPanel"):(this._allowVirtualScrolling&&(this.vsUI=new n.grid.uiVirtualScroller(r,this._splitAreas.se,u.splitDistanceY)),this._scroller.superpanel({disabled:r.options.disabled,scroll:i.proxy(this._onScroll,this),bubbleScrollingEvent:!0,customScrolling:this._allowVirtualScrolling,vScroller:{scrollBarVisibility:o.vScrollBarVisibility,scrollValue:t?t.y:null},hScroller:{scrollBarVisibility:o.hScrollBarVisibility,scrollValue:t?t.x:null},hScrollerActivating:function(n,t){var i;if(r._autoHeight){i=r.element.height()+u.splitDistanceY-t.contentLength;if(i>0)return f._scroller.height(f._scroller.height()+i),f._scroller.superpanel("paintPanel"),!1}f._splitAreas.sw.height(t.contentLength-u.splitDistanceY)}}),this._allowVirtualScrolling&&this.vsUI.attach(this._scroller)),this._scroller.find(".gcui-superpanel-hbarcontainer, .gcui-superpanel-vbarcontainer").css("zIndex",5)},r.prototype.scrollTo=function(n){if(!n.tableCell())return;var y=this._grid,b=y.options,a=this._getSuperPanel(),w=n.tableCell(),v=w.nodeType?i(w):w,f=null,u=null;if(a&&v.is(":visible")){var p=a.getContentElement(),g=p.parent(),e=parseInt((p.css("left")+"").replace("px",""),10)*-1,o=parseInt((p.css("top")+"").replace("px",""),10)*-1,h=g.outerWidth()-b.splitDistanceX,s=g.outerHeight()-b.splitDistanceY,nt=v.position(),t=nt.left,r=nt.top,l=v.outerWidth(),c=v.outerHeight(),tt=y._getStaticIndex(!0),d=y._getStaticIndex(!1),it=n.rowIndex(),k=n.cellIndex();it>tt?k>d?(t-=b.splitDistanceX,r+c>o+s&&(o=u=r+c-s),t+l>e+h&&(e=f=t+l-h),r<o&&(u=r),t<e&&(f=t)):(r+=this._splitAreas.sw.scrollTop(),r+c>o+s&&(o=u=r+c-s),r<o&&(u=r),f=0):k>d?(t+=e,t+l>e+h&&(e=f=t+l-h),t<e&&(f=t),u=0):(f=0,u=0),f!==null&&a.hScrollTo(f),u!==null&&(this._allowVirtualScrolling||a.vScrollTo(u))}},r.prototype.updateSplits=function(n){var s=this._grid,r=s.options,c,h=this,u=[],k=[],d=[],e=this._staticColumnIndex,t,g=r.scrollMode,w=s._field("visibleLeaves"),l=i(this._viewTables.se.element()),f=i(this._viewTables.ne.element()),y=i(this._viewTables.sw.element()),o=i(this._viewTables.nw.element()),v=s.outerDiv,a,p,b;this._destroySuperPanel(),v.unbind("mousewheel",this._mouseWheelHandler);if((a=h._viewTables.se.element().tBodies)&&(a=a[0])){for(b=!1,p=0;p<a.rows.length;p++)if(!i(a.rows[p]).hasClass("gcui-gcuigrid-groupheaderrow")){b=!0;break}b||s.element.css("width","100%")}i.each([l,f,y,o],function(n,t){t.css({"table-layout":"",width:""})}),i.each(w,function(n,t){var u,i=t.width;(i||i===0)&&(u=typeof i=="string"&&i.length>1&&i[i.length-1]==="%",i=u?v.width()*parseFloat(i)/100:parseFloat(i),(t.ensurePxWidth||t.ensurePxWidth===undefined&&r.ensureColumnsPxWidth)&&(t._realWidth=i),h._setColumnWidth(n,i))}),i.each(w,function(n,t){d.push(h._getColumnWidth(n))}),i.each([o,f,y,l],function(n,t){t.css({width:"1px"})}),i.each(w,function(n,t){k.push(h._getColumnWidth(n))}),c=v.width(),u=this._adjustWidthArray(d,k,c,r.ensureColumnsPxWidth),i.each(u,function(n,t){var i=w[n];if(i._realWidth!==undefined){delete i._realWidth;return}h._setColumnWidth(n,t.width)}),e<0||(t=e,this._setTableWidth([o,y],this._sumWidthArray(u,0,t),u[t].width,t));try{r.splitDistanceX=e<0?0:o[0].offsetWidth}catch(nt){}this._updateSplitAreaBounds(0),r.ensureColumnsPxWidth||f.parent().width(c-r.splitDistanceX),t=u.length-1,t!==-1&&this._setTableWidth([f,l],this._sumWidthArray(u,e+1,t),u[t].width,t),this._adjustRowsHeights();try{r.splitDistanceY=this._staticRowIndex<0?0:Math.max(o[0].offsetHeight,f[0].offsetHeight)}catch(nt){}this._updateSplitAreaBounds(1);if(!r.ensureColumnsPxWidth)if(this._testNeedVBar(s.outerDiv,l,f,g,s._autoHeight)){c-=this._verScrollBarSize,u=this._adjustWidthArray(d,k,c,r.ensureColumnsPxWidth),i.each(u,function(n,t){t.real||h._setColumnWidth(n,t.width)}),e<0||(t=e,this._setTableWidth([o,y],this._sumWidthArray(u,0,t),u[t].width,t));try{r.splitDistanceX=e<0?0:o[0].offsetWidth}catch(nt){}this._updateSplitAreaBounds(0),f.parent().width(c-r.splitDistanceX),t=u.length-1,t!==-1&&this._setTableWidth([f,l],this._sumWidthArray(u,e+1,t),u[t].width,t),this._adjustRowsHeights();try{r.splitDistanceY=this._staticRowIndex<0?0:Math.max(o[0].offsetHeight,f[0].offsetHeight)}catch(nt){}this._updateSplitAreaBounds(1)}this.refreshPanel(n),v.bind("mousewheel",i.proxy(this._mouseWheelHandler,this))},r.prototype._clearBody=function(){t.prototype._clearBody.call(this)},r.prototype.bodyRows=function(){return t.prototype.bodyRows.call(this)},r.prototype.focusableElement=function(){return this._grid.outerDiv},r.prototype.forEachColumnCell=function(n,t,i){var u=this.getJoinedTables(!0,n),f,r;if(u[0]!==null){f=u[2],r=u[0].forEachColumnCell(f,t,i);if(r!==!0)return r;if(u[1]!==null){r=u[1].forEachColumnCell(f,t,i);if(r!==!0)return r}}return!0},r.prototype.forEachRowCell=function(n,t,i){var f=this.getJoinedTables(!1,n),e=f[0],o=f[1],u,r;if(e!==null){u=f[2];if(u<e.element().rows.length){r=e.forEachRowCell(u,t,i);if(r!==!0)return r}if(o!==null&&u<o.element().rows.length){r=o.forEachRowCell(u,t,i);if(r!==!0)return r}}return HTMLTableCellElement,!0},r.prototype.getAbsoluteCellInfo=function(t){return new n.grid.cellInfo(this.getColumnIndex(t),this.getAbsoluteRowIndex(t.parentNode),this._grid,!0)},r.prototype.getAbsoluteRowIndex=function(n){var i=n.rowIndex,t=n.parentNode;while(t.tagName.toLowerCase()!=="table")t=t.parentNode;return t===this._viewTables.nw.element()||t===this._viewTables.ne.element()?i:i+this._staticRowIndex+1},r.prototype.getCell=function(n,t){var i=this.getJoinedTables(!1,t),e,o,f,r,u;if(i[0]!==null){e=this.getJoinedTables(!0,n);if(e[0]!==null){o=i[2],f=e[2],r=null,r=i[1]!==null?n===f?i[0]:i[1]:i[0],u=r.getCellIdx(f,o);if(u>=0)return r.element().rows[o].cells[u]}}return null},r.prototype.getColumnIndex=function(n){for(var t=null,i=null,u=!1,r,t=n.parentNode;t.tagName.toLowerCase()!=="table";t=t.parentNode);if(t!==null){t===this._viewTables.nw.element()?i=this._viewTables.nw:t===this._viewTables.ne.element()?(i=this._viewTables.ne,u=!0):t===this._viewTables.sw.element()?i=this._viewTables.sw:t===this._viewTables.se.element()&&(i=this._viewTables.se,u=!0);if(i!==null)return r=i.getColumnIdx(n),u&&(r+=this._staticColumnIndex+1),r}return-1},r.prototype.getHeaderCell=function(t){var i=this._grid._field("visibleLeaves")[t],r;return i&&(r=this._grid._headerRows())?n.grid.rowAccessor.getCell(r.item(i.thY),i.thX):null},r.prototype.getJoinedCols=function(n){var r=[],t=this.getJoinedTables(!0,n),u=t[2];return t.splice(t.length-1,1),i.each(t,function(n,t){r.push(t?i(t.element()).find("col")[u]:null)}),r},r.prototype.getJoinedRows=function(n,t){var f=null,e=null,i=null,r=null,h=this._staticRowIndex,u=this._staticColumnIndex,l=this._grid._field("visibleLeaves").length-1,v=this._rowsCountRaw()-1,a=h===v,o=h<0,c=!a&&!o,s=0;return(a||c)&&(u>=0&&u<l?(i=this._viewTables.nw,r=this._viewTables.ne):i=u<0?this._viewTables.ne:this._viewTables.nw,s=i.getSectionLength(t),n<s&&(f=i.getSectionRow(n,t),r!==null&&(e=r.getSectionRow(n,t)))),(o||c&&f===null)&&(o||(n-=s),u>=0&&u<l?(i=this._viewTables.sw,r=this._viewTables.se):i=u<0?this._viewTables.se:this._viewTables.sw,f=i.getSectionRow(n,t),r!==null&&(e=r.getSectionRow(n,t))),f===null&&e===null?null:[f,e]},r.prototype.getJoinedTables=function(n,t){var r=null,i=null,u=t,o=this._grid,f=this._staticRowIndex,e=this._staticColumnIndex;return n?(t>e?(r=this._viewTables.ne,i=this._viewTables.se,u=u-(e+1)):(r=this._viewTables.nw,i=this._viewTables.sw),f<0&&(r=null),f===this._rowsCountRaw()-1&&(i=null)):(t>f?(r=this._viewTables.sw,i=this._viewTables.se,u=u-(f+1)):(r=this._viewTables.nw,i=this._viewTables.ne),e<0&&(r=null),e===o._field("leaves").length-1&&(i=null)),r===null&&(r=i,i=null),[r,i,u]},r.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]},r.prototype._getGridWidth=function(n){var t=this._grid,r=t.element.outerWidth(!0)+t.options.splitDistanceX,u=t.outerDiv.innerWidth();return this._testNeedVBar(t.outerDiv,t.element,i(this._viewTables.ne.element()),n,t._autoHeight)&&(r+=this._verScrollBarSize),r>u&&(r=u),r},r.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("gcui-superpanel"):null},r.prototype._ensureRenderBounds=function(){this._grid._allowVirtualScrolling()?(this._grid._ensureRenderBounds(this._bounds),this._grid._serverSideVirtualScrolling(),this._bounds.end=this._bounds.start+this._grid.options.pageSize-1,this._grid._ensureRenderBounds(this._bounds)):t.prototype._ensureRenderBounds.call(this)},r.prototype._renderContent=function(){t.prototype._renderContent.call(this)},r.prototype._preRender=function(){var r=document.createDocumentFragment(),t=n.grid.htmlTableAccessor;this._grid.outerDiv.wrapInner('<div class="gcui-gcuigrid-fixedview"><div class="gcui-gcuigrid-scroller"><div class="gcui-gcuigrid-split-area-se gcui-gcuigrid-content-area"></div></div></div>'),this._scroller=this._grid.outerDiv.find(".gcui-gcuigrid-scroller"),this._scroller.css("padding",0),this._scroller.after(this._splitAreas.nw=i('<div class="gcui-gcuigrid-split-area gcui-gcuigrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.ne=i('<div class="gcui-gcuigrid-split-area gcui-gcuigrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.sw=i('<div class="gcui-gcuigrid-split-area gcui-gcuigrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._splitAreas.se=this._scroller.find(".gcui-gcuigrid-split-area-se:first"),this._viewTables={nw:new t(r.appendChild(document.createElement("table")),!0,!0,!0),ne:new t(r.appendChild(document.createElement("table")),!0,!0,!0),sw:new t(r.appendChild(document.createElement("table")),!0,!0,!0),se:new t(r.appendChild(this._grid.element[0]),!0,!0,!0)}},r.prototype._postRender=function(){var e,o,s,u,r=n.grid.htmlTableAccessor,f=this;this._viewTables={nw:new r(e=this._viewTables.nw.element()),ne:new r(o=this._viewTables.ne.element()),sw:new r(s=this._viewTables.sw.element()),se:new r(u=this._viewTables.se.element())},this._splitAreas.nw.empty().append(e),this._splitAreas.ne.empty().append(o),this._splitAreas.sw.empty().append(s),this._splitAreas.se.empty().append(u),i.each(this._viewTables,function(n,t){var r=i(t.element());f._grid._setAttr(r,{role:"grid",border:"0",cellpadding:"0",cellspacing:"0"}),r.addClass("gcui-gcuigrid-table").css("border-collapse","separate").find("> tbody").addClass(f._grid.options.uiCSS.content+" gcui-gcuigrid-data")}),t.prototype._postRender.call(this)},r.prototype._rowsCountRaw=function(){var i=this._viewTables.nw.element(),r=this._viewTables.ne.element(),u=this._viewTables.sw.element(),t=this._viewTables.se.element(),n;return n=Math.max(i.rows.length,r.rows.length)+Math.max(u.rows.length,t.rows.length)},r.prototype._createCol=function(n,t){return[document.createElement("col"),document.createElement("col")]},r.prototype._appendCol=function(n,t,i){i>this._staticColumnIndex?(this._viewTables.ne.appendCol(n[0]),this._viewTables.se.appendCol(n[1])):(this._viewTables.nw.appendCol(n[0]),this._viewTables.sw.appendCol(n[1]))},r.prototype._insertRow=function(t,i,r){var o=n.grid.rowType,e,f,u=this._viewTables;switch(t){case o.header:case o.filter:e=u.nw.ensureTHead(),f=u.ne.ensureTHead();break;case o.footer:e=u.sw.ensureTFoot(),f=u.se.ensureTFoot();break;default:i>this._staticDataRowIndex?(i-=this._staticDataRowIndex+1,e=u.sw.ensureTBody(),f=u.se.ensureTBody()):(e=u.nw.ensureTBody(),f=u.ne.ensureTBody())}return r?[e.appendChild(r),f.appendChild(r.cloneNode(!1))]:[e.insertRow(i>e.rows.length?-1:i),f.insertRow(i>f.rows.length?-1:i)]},r.prototype._rowRendered=function(n,r,u){var f=n.$rows[0],e=n.$rows[1];!f.cells.length&&this._isBodyRow(n)&&(f.parentNode.removeChild(f),f=null),!e.cells.length&&this._isBodyRow(n)&&(e.parentNode.removeChild(e),e=null),(f||e)&&(f&&e||(n.$rows=f?i(f):i(e)),t.prototype._rowRendered.call(this,n,r,u))},r.prototype._appendCell=function(t,i,r){var u=t.type!==n.grid.rowType.header?this._staticColumnIndex:this._staticAllColumnIndex;i>u?t.$rows[1].appendChild(r[0]):t.$rows[0].appendChild(r[0])},r.prototype._getRowHeight=function(n,t){if(n[0]&&n[1]){var h=n[0],c=n[1],e=i(h),f=i(c),r,u,o,s=function(n){for(var u=n[0],t,r=0;r<u.cells.length;r++){t=u.cells[r];if(!t.rowSpan||t.rowSpan===1)return i(t).outerHeight()}return n.height()};return(o=i.data(h,"customHeight"))?r=u=parseInt(o):(e.css("height",""),f.css("height",""),t?(r=s(e),u=s(f)):(r=e.height(),u=f.height())),Math.max(r,u)}return null},r.prototype._setRowHeight=function(n,t){if(n[0]&&n[1]){var u=[i(n[0]),i(n[1])],r;if(t===null)return;t+=1,i.each(u,function(n,i){i.height(t),r=t-i.height(),r&&i.height(t+r)})}},r.prototype._adjustRowHeight=function(){var k=this._grid,b=this._staticColumnIndex,d=k._field("visibleLeaves").length-1,t,r,c,s,y,e,p,o,w,h,v,f,n,a,i,u,l=[];if(b>-1&&b<d){t=this._staticRowIndex,r=this._rowsCountRaw()-1,c=this._viewTables;if(t>-1&&t<=r)for(s=c.ne.element(),y=s.parentNode,e=c.nw.element(),p=e.parentNode,i=e.rows,u=s.rows,f=i.length,n=0;n<f;n++)l.push(this._getRowHeight([i[n],u[n]],!0));if(t>=-1&&t<r)for(o=c.se.element(),w=o.parentNode,h=c.sw.element(),v=h.parentNode,i=h.rows,u=o.rows,f=i.length,n=0;n<f;n++)l.push(this._getRowHeight([i[n],u[n]]));t>-1&&t<=r&&(p.removeChild(e),y.removeChild(s)),t>=-1&&t<r&&(v.removeChild(h),w.removeChild(o));if(t>-1&&t<=r)for(i=e.rows,u=s.rows,f=i.length,n=0,a=0;n<f;n++)this._setRowHeight([i[n],u[n]],l[a++]);if(t>=-1&&t<r)for(i=h.rows,u=o.rows,f=i.length,n=0;n<f;n++)this._setRowHeight([i[n],u[n]],l[a++]);t>-1&&t<=r&&(p.appendChild(e),y.appendChild(s)),t>=-1&&t<r&&(v.appendChild(h),w.appendChild(o))}},r.prototype._adjustRowsHeights=function(){var r=i(this._viewTables.sw.element()),t=i(this._viewTables.se.element()),n;t.css("height",""),r.css("height",""),this._adjustRowHeight(),n=Math.max(t.height(),r.height()),r.height(n),t.height(n)},r.prototype._destroySuperPanel=function(){this._scroller.data("gcui-superpanel")&&(this.vsUI&&this.vsUI.dispose(),this._scroller.superpanel("destroy"))},r.prototype._onScroll=function(n,t){var i=this._getSuperPanel();this._allowVirtualScrolling?t.dir==="h"&&(this._setFixedAreaPosition(i.getContentElement(),t.dir,t.position,t.animationOptions,!1),this._setFixedAreaPosition(this._splitAreas.ne,t.dir,t.position,t.animationOptions,!0)):this._setFixedAreaPosition(t.dir==="h"?this._splitAreas.ne:this._splitAreas.sw,t.dir,t.position,t.animationOptions,!0),this._grid._trackScrollingPosition(i.options.hScroller.scrollValue,i.options.vScroller.scrollValue)},r.prototype._onMouseWheel=function(t,r){var e,o=r>0?"top":"bottom",u=!1,f;this._grid._canInteract()&&(e=this.getFixedAreaVisibleBounds(),i.each(e,function(i,r){if(r&&n.grid.isOver(t.pageY,t.pageX,r.top,r.left,r.height,r.width))return u=!0,!1}),u&&this._scroller.data("gcui-superpanel")&&(f=this._scroller.superpanel("option","vScroller").scrollValue,this._scroller.superpanel("doScrolling",o),f!==this._scroller.superpanel("option","vScroller").scrollValue&&(t.stopPropagation(),t.preventDefault())))},r.prototype._setFixedAreaPosition=function(n,t,i,r,u){var e={},f;f=t==="h"?u?"scrollLeft":"left":u?"scrollTop":"top",u||(i=-i),r?(e[f]=i,n.animate(e,r)):u?n[0][f]=i:n.css(f,i)},r.prototype._testNeedVBar=function(n,t,i,r,u){var o,f=this._grid,a=i.width()+f.options.splitDistanceX,c=t.height()+f.options.splitDistanceY,l=n.width(),v=n.height(),e,s=0,h=0;return this._allowVirtualScrolling&&f._totalRowsCount()>1?!0:(f.$superPanelHeader!==null&&(s=f.$superPanelHeader.outerHeight(!0)),f.$bottomPagerDiv!==null&&(h=f.$bottomPagerDiv.outerHeight(!0)),e=v-s-h,o=r==="both"||r==="vertical"?!0:r==="auto"&&(c>e||!u&&a>l&&c>e-this._verScrollBarSize))},r.prototype._updateSplitAreaBounds=function(n){var i=this._grid,t=i.options,u,f,r=0,e=0;(n===0||n===2)&&(this._splitAreas.nw.width(t.splitDistanceX),this._splitAreas.sw.width(t.splitDistanceX),i.options.staticColumnsAlignment==="right"?(this._splitAreas.se.css("marginRight",t.splitDistanceX),this._splitAreas.ne.css("marginRight",t.splitDistanceX)):(this._splitAreas.se.css("marginLeft",t.splitDistanceX),this._splitAreas.ne.css("marginLeft",t.splitDistanceX))),(n===1||n===2)&&(this._scroller.css("height",""),this._splitAreas.se.css("marginTop",0),u=i.outerDiv.height(),i._autoHeight?this._scroller.height(u+t.splitDistanceY):this._scroller.height(u),this._splitAreas.nw.height(t.splitDistanceY),this._splitAreas.ne.height(t.splitDistanceY),i.$superPanelHeader!==null&&(r=i.$superPanelHeader.outerHeight(!0)),i.$bottomPagerDiv!==null&&(e=i.$bottomPagerDiv.outerHeight(!0)),f=u-r-e,i.$superPanelHeader!==null&&(this._splitAreas.nw.css("top",r+"px"),this._splitAreas.ne.css("top",r+"px")),i._autoHeight?this._splitAreas.sw.height(f):this._splitAreas.sw.height(f-t.splitDistanceY),this._splitAreas.sw.css("top",t.splitDistanceY+r),this._splitAreas.se.css("marginTop",t.splitDistanceY))},r}(t.baseView);t.fixedView=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var r=jQuery,u=function(){function t(n){this._updates=0,this._selectedColumns=null,this._selectedRows=null,this._extend_rules={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};if(!n)throw"invalid arguments";this._grid=n,this._addedCells=new i(n),this._removedCells=new i(n),this._selectedCells=new i(n),this._addedDuringCurTransactionCells=new i(n)}return t.prototype.selectedCells=function(){return this._selectedCells},t.prototype.addColumns=function(n,t){t||t===0||(t=n),this.addRange(n,0,t,16777215)},t.prototype.addRange=function(t,i,r,u){if(!t&&arguments.length===1)throw"invalid argument";var f=arguments.length===4?new n.grid.cellInfoRange(new n.grid.cellInfo(t,i),new n.grid.cellInfo(r,u)):t._clone();f._normalize();if(!f._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._grid._field("currentCell")),this._selectRange(f,!1,!0,n.grid.cellRangeExtendMode.none,null),this.endUpdate()},t.prototype.addRows=function(n,t){t||t===0||(t=n),this.addRange(0,n,16777215,t)},t.prototype.removeRange=function(t,i,r,u){if(!t&&arguments.length===1)throw"invalid argument";var f=arguments.length===4?new n.grid.cellInfoRange(new n.grid.cellInfo(t,i),new n.grid.cellInfo(r,u)):t._clone();f._normalize();if(!f._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._grid._field("currentCell")),this._clearRange(f,n.grid.cellRangeExtendMode.none),this.endUpdate()},t.prototype.removeColumns=function(n,t){t||t===0||(t=n),this.removeRange(n,0,t,16777215)},t.prototype.removeRows=function(n,t){t||t===0||(t=n),this.removeRange(0,n,16777215,t)},t.prototype.clear=function(){this.beginUpdate(),this._removedCells._clear(),this._removedCells._addFrom(this._selectedCells),this.endUpdate()},t.prototype.selectAll=function(){this.beginUpdate(),this._selectRange(this._grid._getDataCellsRange(),!1,!1,n.grid.cellRangeExtendMode.none,null),this.endUpdate()},t.prototype.beginUpdate=function(){this._updates++},t.prototype.endUpdate=function(){this._updates>0&&(this._updates--,this._updates===0&&(this.doSelection(),(this._addedCells.length()||this._removedCells.length())&&(this._selectedColumns!==null&&this._selectedColumns.UnderlyingDataChanged(),this._selectedRows!==null&&this._selectedRows.UnderlyingDataChanged(),this._grid._trigger("selectionChanged",null,{addedCells:this._addedCells,removedCells:this._removedCells})),this._addedCells=new n.grid.cellInfoOrderedCollection(this._grid),this._removedCells._clear()))},t.prototype._multipleRangesAllowed=function(){var n=this._grid.options.selectionMode;return n&&((n=n.toLowerCase())==="multicolumn"||n==="multirow"||n==="multirange")},t.prototype._anchorCell=function(){return this.__anchorCell},t.prototype._startNewTransaction=function(t){t&&(this.__anchorCell=t._clone(),this._addedDuringCurTransactionCells=new n.grid.cellInfoOrderedCollection(this._grid))},t.prototype._clearRange=function(n,t){var o=this._grid.options.selectionMode.toLowerCase(),i,s,a,h,c,l,r,f,u,e=this._grid._getDataCellsRange();if(n._isValid()&&o!=="none"&&this._selectedCells.length()>0){i=n._clone(),i._normalize(),i._clip(e);if(!n._isValid())return;for(i._extend(this._extend_rules[o][t],e),this.beginUpdate(),r=0,f=this._selectedCells.length();r<f;r++)u=this._selectedCells.item(r),i._containsCellInfo(u)&&this._removedCells._add(u);this.endUpdate()}},t.prototype._selectRange=function(t,i,r,u,f){var o=this._grid.options.selectionMode.toLowerCase(),e,s=this._grid._getDataCellsRange();if(o!=="none"&&t._isValid()){e=t._clone(),e._normalize(),e._clip(s);if(!e._isValid())return;this.beginUpdate(),this._multipleRangesAllowed()?i||r?r&&(this._removedCells._clear(),this._removedCells._addFrom(this._addedDuringCurTransactionCells)):this.clear():this.clear();switch(o){case"singlecell":case"singlecolumn":case"singlerow":e=f===null?new n.grid.cellInfoRange(e.topLeft(),e.topLeft()):new n.grid.cellInfoRange(f,f);break}e._extend(this._extend_rules[o][u],s),this.doRange(e,!0),this.endUpdate()}},t.prototype.doSelection=function(){for(var v=this._grid._getDataToAbsOffset(),p=v.x,a=v.y,c=this._grid._view(),t,e,f,l,y=n.grid.renderState,s,h,o=-1,i=0,u=this._removedCells.length();i<u;i++)t=this._removedCells.item(i),this._addedCells.indexOf(t)<0?(e=c.getCell(t.cellIndex()+p,t.rowIndex()+a),e&&(o!==t.rowIndex()&&(s=t.row(),o=t.rowIndex()),f=r(e),h=c._changeCellRenderState(f,y.selected,!1),this._grid.cellStyleFormatter.format(f,t.cellIndex(),t.column(),s,h)),this._selectedCells._remove(t),this._addedDuringCurTransactionCells._remove(t)):(this._removedCells._removeAt(i),i--,u--);for(o=-1,i=0,u=this._addedCells.length();i<u;i++)t=this._addedCells.item(i),l=this._selectedCells.indexOf(t),l<0?(e=c.getCell(t.cellIndex()+p,t.rowIndex()+a),e&&(o!==t.rowIndex()&&(s=t.row(),o=t.rowIndex()),f=r(e),h=c._changeCellRenderState(f,y.selected,!0),this._grid.cellStyleFormatter.format(f,t.cellIndex(),t.column(),s,h)),this._selectedCells._insertUnsafe(t,~l),this._addedDuringCurTransactionCells._add(t)):(this._addedCells._removeAt(i),i--,u--)},t.prototype.doRange=function(t,i){var o=t.topLeft().cellIndex(),a=t.topLeft().rowIndex(),c=t.bottomRight().cellIndex(),l=t.bottomRight().rowIndex(),e,r,u,f,v=this._grid._view(),s,h;if(i)for(e=this._addedCells.length(),h=this._grid._rows(),r=a;r<=l;r++){s=v._getRowInfo(h.item(r));if(s.type&n.grid.rowType.data)for(u=o;u<=c;u++)f=new n.grid.cellInfo(u,r),e===0?this._addedCells._appendUnsafe(f):this._addedCells._add(f)}else for(e=this._removedCells.length(),r=a;r<=l;r++)for(u=o;u<=c;u++)f=new n.grid.cellInfo(u,r),e===0?this._removedCells._appendUnsafe(f):this._removedCells._add(f)},t}(),i;t.selection=u,i=function(){function t(n){this._clear=function(){this._list.length=0};if(!n)throw"invalid arguments";this._grid=n,this._list=[]}return t.prototype.item=function(n){return this._list[n]},t.prototype.length=function(){return this._list.length},t.prototype.indexOf=function(n,t){arguments.length===1&&(t=n.rowIndex(),n=n.cellIndex());var u=0,f=this._list.length-1,i,e,r;while(u<=f){i=u+(f-u>>1),e=this._list[i],r=e.rowIndex()-t,r===0&&(r=e.cellIndex()-n);if(r<0)u=i+1;else if(r>0)f=i-1;else return i}return~u},t.prototype.toString=function(){for(var i="",n=0,t=this._list.length;n<t;n++)i+=this._list[n].toString()+"\n";return i},t.prototype._add=function(n){var t=this.indexOf(n);return t<0?(this._list.splice(~t,0,n),n._setGridView(this._grid),!0):!1},t.prototype._addFrom=function(n){if(n){var i=n.length(),r=this._list.length,t;if(r===0)for(this._list.length=i,t=0;t<i;t++)this._list[t]=n.item(t),this._list[t]._setGridView(this._grid);else for(t=0;t<i;t++)this._add(n.item(t))}},t.prototype._appendUnsafe=function(n){this._list[this._list.length]=n,n._setGridView(this._grid)},t.prototype._insertUnsafe=function(n,t){this._list.splice(t,0,n)},t.prototype._remove=function(n){var t=this.indexOf(n);return t>=0?(this._list.splice(t,1),!0):!1},t.prototype._removeAt=function(n){this._list.splice(n,1)},t.prototype._getColumnsIndicies=function(){var u=[],i=this._list.length,t,n,r;if(i){for(t=[],n=0;n<i;n++)t[this._list[n].cellIndex()]=1;for(i=t.length,r=0,n=0;n<i;n++)t[n]&&(u[r++]=n)}return u},t.prototype._getSelectedRowsIndicies=function(){var u=[],i=this._list.length,t,n,r;if(i){for(t=[],n=0;n<i;n++)t[this._list[n].rowIndex()]=1;for(i=t.length,r=0,n=0;n<i;n++)t[n]&&(u[r++]=n)}return u},t.prototype._rectangulate=function(){var o=this._list.length,f=4294967295,e=4294967295,u=0,r=0,i,t;if(o){for(i=0;i<o;i++)t=this._list[i],f=Math.min(f,t.cellIndex()),e=Math.min(e,t.rowIndex()),u=Math.max(u,t.cellIndex()),r=Math.max(r,t.rowIndex());return new n.grid.cellInfoRange(new n.grid.cellInfo(f,e),new n.grid.cellInfo(u,r))}return null},t}(),t.cellInfoOrderedCollection=i})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(t){this._gap_to_start=10,this._inProgress=!1,this._additionalEventsAttached=!1,this._grid=t,this._evntFormat="{0}."+this._grid.widgetName+".selectionui",this._addedCells=new n.grid.cellInfoOrderedCollection(this._grid),this._view=this._grid._view(),this._rootElement=this._view.focusableElement(),this._visLeavesLen=this._grid._field("visibleLeaves").length,this._rootElement.bind(this._eventKey("mousedown"),i.proxy(this._onGridMouseDown,this))}return t.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown),this._detachAdditionalEvents()},t.prototype._onGridMouseDown=function(n){if(!this._grid._canInteract()||this._grid.options.selectionMode.toLowerCase()==="none")return;var t=this._view.getVisibleAreaBounds(),r={x:n.pageX,y:n.pageY},f=n.target&&n.target.tagName!==undefined?n.target.tagName.toLowerCase():undefined,u=i(n.target);(!f||u.is("td.gcuigridtd, th.gcuigridtd, div.gcui-gcuigrid-innercell"))&&r.x>t.left&&r.x<t.left+t.width&&r.y>t.top&&r.y<t.top+t.height&&(this._attachAdditionalEvents(),this._startPos=r,this._startCellInfo=this._coordToDataCellInfo(this._startPos))},t.prototype._onDocumentMouseMove=function(t){if(!this._startCellInfo||!this._startCellInfo._isValid())return;var p={x:t.pageX,y:t.pageY},w,r,e,v,a,d,g,l,u,f,c,h,o,s,y,b=this._grid._view(),nt=this._grid._rows(),k=n.grid.renderState;this._inProgress||(this._inProgress=Math.abs(this._startPos.x-p.x)>this._gap_to_start||Math.abs(this._startPos.y-p.y)>this._gap_to_start);if(this._inProgress){w=this._coordToDataCellInfo(p);if(!w._isValid())return;this._endCellInfo=w,e=new n.grid.cellInfoRange(this._startCellInfo,this._endCellInfo),e._normalize(),e._clip(this._grid._getDataCellsRange());if(e._isValid()&&!e.isEqual(this._prevMouseMoveRange)){for(v=this._grid._getDataToAbsOffset(),this._prevMouseMoveRange=e,a=new n.grid.cellInfoOrderedCollection(this._grid),d=e.bottomRight().rowIndex(),g=e.bottomRight().cellIndex(),l=e.topLeft().rowIndex();l<=d;l++){o=b._getRowInfo(nt.item(l));if(o.type&n.grid.rowType.data)for(u=e.topLeft().cellIndex();u<=g;u++)a._appendUnsafe(new n.grid.cellInfo(u,l))}for(s=-1,f=0,c=this._addedCells.length();f<c;f++)r=this._addedCells.item(f),a.indexOf(r)<0&&(this._grid.selection().selectedCells().indexOf(r)<0&&(u=this._view.getCell(r.cellIndex()+v.x,r.rowIndex()+v.y),u&&(s!==r.rowIndex()&&(o=r.row(),s=r.rowIndex()),h=i(u),y=b._changeCellRenderState(h,k.selected,!1),this._grid.cellStyleFormatter.format(h,r.cellIndex(),r.column(),o,y))),this._addedCells._removeAt(f),f--,c--);for(s=-1,f=0,c=a.length();f<c;f++)r=a.item(f),this._addedCells.indexOf(r)<0&&this._grid.selection().selectedCells().indexOf(r)<0&&this._addedCells._add(r)&&(u=this._view.getCell(r.cellIndex()+v.x,r.rowIndex()+v.y),u&&(s!==r.rowIndex()&&(o=r.row(),s=r.rowIndex()),h=i(u),y=b._changeCellRenderState(h,k.selected,!0),this._grid.cellStyleFormatter.format(h,r.cellIndex(),r.column(),o,y)))}}},t.prototype._onDocumentMouseUp=function(t){this._detachAdditionalEvents();if(this._inProgress){this._inProgress=!1;if(this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid()){this._grid._changeCurrentCell(t,this._endCellInfo,{changeSelection:!1,setFocus:!1}),t.shiftKey&&(this._grid.selection()._multipleRangesAllowed()||this._grid.options.selectionMode.toLowerCase()==="singleRange")||this._grid.selection()._startNewTransaction(this._startCellInfo),this._grid.selection().beginUpdate(),this._grid.selection()._selectRange(this._prevMouseMoveRange,t.shiftKey,t.ctrlKey,n.grid.cellRangeExtendMode.none,this._endCellInfo),this._grid.selection().endUpdate();for(var l=this._grid._view(),a=this._grid._getDataToAbsOffset(),r,e,f,s=-1,h,o,v=n.grid.renderState,u=0,c=this._addedCells.length();u<c;u++)r=this._addedCells.item(u),this._grid.selection().selectedCells().indexOf(r)<0&&(e=l.getCell(r.cellIndex()+a.x,r.rowIndex()+a.y),e!==null&&(s!==r.rowIndex()&&(h=r.row(),s=r.rowIndex()),f=i(e),o=l._changeCellRenderState(f,v.selected,!1),this._grid.cellStyleFormatter.format(f,r.cellIndex(),r.column(),h,o)));return this._addedCells._clear(),this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null,!1}}},t.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached)try{this._view.toggleDOMSelection(!1),i(document).bind(this._eventKey("mousemove"),i.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),i.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=!0}},t.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached)try{this._view.toggleDOMSelection(!0),i(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=!1}},t.prototype._eventKey=function(t){return n.grid.stringFormat(this._evntFormat,t)},t.prototype._coordToDataCellInfo=function(t){var u=0,f=this._visLeavesLen-1,i=0,l=-1,r,s=new n.grid.rowAccessor(this._view,2,0,0),e,o,c,h;while(u<=f){i=(f-u>>1)+u,r=n.grid.bounds(this._view.getHeaderCell(i)),r||(o=s.item(0),r=n.grid.bounds(n.grid.rowAccessor.getCell(o,i)));if(!r)break;if(t.x<r.left)f=i-1;else if(t.x>r.left+r.width)u=i+1;else{l=i;break}}if(l===-1)return n.grid.cellInfo.outsideValue;s=new n.grid.rowAccessor(this._view,0,0,0),e=-1,u=0,f=s.length()-1,i=0;while(u<=f){i=(f-u>>1)+u,o=s.item(i),r=n.grid.bounds(n.grid.rowAccessor.getCell(o,0));if(t.y<r.top)f=i-1;else if(t.y>r.top+r.height)u=i+1;else{e=i;break}}return e===-1?n.grid.cellInfo.outsideValue:(c=this._grid._getDataToAbsOffset(),h=new n.grid.cellInfo(l-c.x,e-c.y),h._clip(this._grid._getDataCellsRange()),h)},t}();t.uiSelection=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(n){"use strict";var i=jQuery,t=function(){function n(n,t,i,r){this._view=n,this._scope=t,this._offsetBottom=r,this._offsetTop=i}return n.prototype.item=function(n){var t=this.length();return n<t?this._view.getJoinedRows(n+this._offsetTop,this._scope):null},n.prototype.length=function(){var i=this._view.getJoinedTables(!0,0),n=0,t;return(t=i[0])&&(n=t.getSectionLength(this._scope)),(t=i[1])&&(n+=t.getSectionLength(this._scope)),n-=this._offsetTop+this._offsetBottom,n<0&&(n=0),n},n.iterateCells=function(n,t,i){if(n&&t)for(var h=0,r,u,e,o,f=0,s=n.length;f<s;f++){r=n[f];if(r)for(u=0,e=r.cells.length;u<e;u++){o=t(r.cells[u],h++,i);if(o!==!0)return}}},n.getCell=function(n,t){var i,r;if(n&&(i=n[0])){r=i.cells.length;if(t<r)return i.cells[t];t-=r;if(i=n[1]){r=i.cells.length;if(t<r)return i.cells[t]}}return null},n.cellsCount=function(n){var i=0,t;return n&&(t=n[0])&&(i=t.cells.length,(t=n[1])&&(i+=t.cells.length)),i},n}();n.rowAccessor=t})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(){this._timeout=25}return t.prototype.currentCellEditStart=function(t,r){var o=!1,u=t.currentCell(),c=t._view(),f,e,s,h;return!u._isValid()||u._isEdit()||u.column().dataIndex<0||(f=u.row(),f&&(h=f.type,h&n.grid.rowType.data&&(e={cell:u,event:r,handled:!1},(o=t._trigger("beforeCellEdit",null,e))&&(e.handled||(o=this._defaultBeforeCellEdit(t,e))),o&&(u._isEdit(!0),t._showRowHeader()&&(s=i(f.$rows[0].cells[0]).children("div.gcui-gcuigrid-innercell"),s.length&&(s.empty(),s.append(i("<div>&nbsp;</div>").addClass(t.options.uiCSS.icon+" ui-icon-pencil")))))))),o},t.prototype.currentCellEditEnd=function(t,r){var u=t.currentCell(),k=u.column(),e=!1,g=t._view(),h,a,p,o,s,w,b=n.getKeyCodeEnum(),c,f,v,y,l;if(!u._isValid()||!u._isEdit())return;h=u.row();if(h){a=h.type;if(!(a&n.grid.rowType.data))return e;p=r&&r.which===b.ESCAPE;if(r&&p)e=!0;else{f={cell:u,value:undefined};if(e=t._trigger("beforeCellUpdate",null,f)){f.value===undefined&&(f.value=this._getCellValue(t,u)),o=f.value,s=u.value();try{c=this._getHTMLInputElementType(u),n.grid.HTML5InputSupport.isExtendSupportRequired(c)?(f.value=n.grid.HTML5InputSupport.parse(f.value,c),f.value=n.grid.HTML5InputSupport.extend(s,f.value,c)):f.value=t.parse(u.column(),f.value),o=f.value}catch(d){f.value=o}n.grid.getDataType(k)==="datetime"&&(o instanceof Date&&(o=o.getTime()),s instanceof Date&&(s=s.getTime()));if(o!==s){try{u.value(f.value)}catch(d){v={cell:u,value:f.value},e=!1,t._trigger("invalidCellValue",null,v)}e&&(y={cell:u},t._trigger("afterCellUpdate",null,y))}}}e&&(l={cell:u,event:r,handled:!1},t._trigger("afterCellEdit",null,l),l.handled||(e=this._defaultAfterCellEdit(t,l)),e&&u._isEdit(!1),t._showRowHeader()&&i(h.$rows[0].cells[0]).children("div.gcui-gcuigrid-innercell").html("&nbsp;"),window.setTimeout(function(){t._destroyed||(u=t.currentCell(),(w=u.tableCell())?i(w).attr("tabIndex",0).focus():i(t._view().focusableElement()).focus())},this._timeout))}return e},t.prototype._defaultBeforeCellEdit=function(t,r){var o=r.cell.column(),c=!1,f,p,h,u,l,y,a=n.getKeyCodeEnum(),s=n.grid.HTML5InputSupport.getDefaultInputType(t._isMobileEnv(),o),e;if(o.dataIndex>=0){f=r.cell.value(),c=!0;try{h=r.cell.container();if(n.grid.getDataType(o)==="boolean"){e=h.children("span"),e.length&&e.prop("disabled")&&(i.data(e[0],"disabledSpan",!0),e.prop("disabled",!1)),u=h.find(":checkbox"),u.prop("disabled",!1),u.focus();if(r.event&&r.event.type==="keypress")u.one("keyup",function(n){n.which===a.SPACE&&(n.preventDefault(),u[0].checked=!f)})}else{u=i("<input />").attr("type",s).addClass("gridinput gcui-input "+t.options.uiCSS.stateFocus).bind("keydown",t,i.proxy(this._checkBoxOrInputKeyDown,this)),u.bind(i.support.selectstart?"selectstart":"mousedown",function(n){n.stopPropagation()});if(r.event&&r.event.type==="keypress"&&r.event.which)u.val(String.fromCharCode(r.event.which));else switch(n.grid.getDataType(o)){case"currency":case"number":if(f!==null){u.val(f);break}case"datetime":if(n.grid.HTML5InputSupport.isExtendSupportRequired(s)){u.val(n.grid.HTML5InputSupport.toStr(f,s));break}default:u.val(t.toStr(o,f));break}h.empty().append(u),l=u.val().length,s==="text"&&new n.grid.domSelection(u[0]).setSelection({start:l,end:l}),u.focus(),setTimeout(function(){u.focus()},this._timeout*2)}}catch(v){alert(v.message),c=!1}}return c},t.prototype._defaultAfterCellEdit=function(t,r){var e=r.cell.column(),s=!1,u,h,f,l,a,o,c;if(e.dataIndex>=0){s=!0,a=t._view();try{u=r.cell.container(),h=t.toStr(e,r.cell.value()),l=a._getRowInfo(t._rows().item(r.cell.rowIndex())),n.grid.getDataType(e)==="boolean"?(o=u.children("span"),c=o.length&&i.data(o[0],"disabledSpan"),f=u.find(":checkbox"),h==="true"?f.attr("checked","checked"):f.removeAttr("checked"),c&&(o.prop("disabled",!0),f.prop("disabled",!0))):t.cellFormatter.format(u,e,h,l)}catch(v){alert("defaultAfterCellEdit: "+v.message),s=!1}}return s},t.prototype._checkBoxOrInputKeyDown=function(t){var r=n.getKeyCodeEnum(),i;if(t.which===r.ENTER){i=t.data;if(i)return i._endEditInternal(t),!1}},t.prototype._getCellValue=function(n,t){var i=t.container().find(":input:first"),r=null;return i.length&&(r=i.attr("type")==="checkbox"?i[0].checked:i.val()),r},t.prototype._getHTMLInputElementType=function(n){return n.container().find(":input:first").attr("type")},t}();t.cellEditorHelper=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(){}return t._div=document.createElement("div"),t.prototype.format=function(t,r,u,f){f.type&n.grid.rowType.footer&&(u=r.aggregate&&r.aggregate!=="none"?n.grid.stringFormat(r.footerText||"{0}",r._totalsValue||""):r.footerText||r._footerTextDOM||"");var h=!0,o=null,e={$container:t,column:r,formattedValue:u,row:f,afterDefaultCallback:null},s;i.isFunction(r.cellFormatter)&&(h=!r.cellFormatter(e));if(h){switch(n.grid.getDataType(r)){case"boolean":o=this._boolFormatter;break;default:o=this._textFormatter}o&&(o.call(this,e),i.isFunction(s=e.afterDefaultCallback)&&s(e))}},t.prototype._textFormatter=function(t){var i;switch(t.row.type){case n.grid.rowType.filter:this._defFormatFilterCell(t);break;default:i=t.$container[0];if(i.firstChild)while(i.firstChild)i.removeChild(i.firstChild);n.grid.cellFormatterHelper._div.innerHTML=t.formattedValue||"&nbsp;";while(n.grid.cellFormatterHelper._div.firstChild)i.appendChild(n.grid.cellFormatterHelper._div.firstChild)}},t.prototype._boolFormatter=function(t){var i,e,o="disabled='disabled'",f,r,u=n.grid.rowType,s=n.getKeyCodeEnum();switch(t.row.type){case u.data:case u.data|u.dataAlt:i=t.column.owner,e=i.options.allowEditing&&t.column.readOnly!==!0,e&&(o=""),i.parse(t.column,i._dataViewWrapper.getValue(t.row.data,t.column.dataKey))===!0?t.$container.html("<input class='gridinput' type='checkbox' checked='checked' "+o+" />"):t.$container.html("<input class='gridinput' type='checkbox' "+o+" />"),e&&t.$container.children("input").bind("mousedown",function(n){f=t.$container.parent()[0],r=i.currentCell(),r.tableCell()!==f&&i._onClick({target:f}),r._isEdit()||i.beginEdit()}).bind("keydown",function(n){if(n.which===s.ENTER)return i._endEditInternal(n),!1});break;default:this._textFormatter(t)}},t.prototype._defFormatFilterCell=function(n){var i=n.column.owner,t=i.options.uiCSS;n.$container.addClass(t.widget+" "+t.stateDefault),n.column.dataIndex<0||n.column.isBand||!n.column.showFilter?n.$container.html("&nbsp;"):n.$container.html('<table cellPadding="0" cellSpacing="0" class="gcui-gcuigrid-filter '+t.cornerAll+'"><tr><td style="width:100%"><input type="text" class="gcui-gcuigrid-filter-input" style="width:100%" /></td><td class="gcui-gcuigrid-filter-trigger '+t.cornerRight+" "+t.stateDefault+'"><span class="'+t.icon+" "+t.iconArrowDown+'"></span></td></tr></table>')},t}();t.cellFormatterHelper=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(n){this.MIN_WIDTH=5,this._elements=[],this._gap=10,this._step=1,this._inProgress=!1,this._hoveredField=null,this._startLocation=null,this._lastLocation=null,this._proxy=null,this._grid=n,this._evntFormat="{0}."+this._grid.widgetName+".resizer"}return t.prototype.addElement=function(n){n&&n.element&&(n.element.bind(this._eventKey("mousemove"),i.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),i.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),i.proxy(this._onMouseOut,this)),this._elements.push(n))},t.prototype.dispose=function(){var n=this;i.each(this._elements,function(t,i){i.element.unbind(n._eventKey("mousemove"),n._onMouseMove).unbind(n._eventKey("mousedown"),n._onMouseDown).unbind(n._eventKey("mouseout"),n._onMouseOut)}),this._detachDocEvents()},t.prototype.inProgress=function(){return this._inProgress},t.prototype._onMouseMove=function(n){if(!this._inProgress){var t=this._getFieldByPos({x:n.pageX,y:n.pageY});t&&t._canSize()&&this._grid._canInteract()?(t.element.css("cursor","e-resize"),this._hoveredField=t,n.stopPropagation()):this._onMouseOut(n)}},t.prototype._onMouseOut=function(n){this._inProgress||this._hoveredField&&(this._hoveredField.element.css("cursor",""),this._hoveredField=null)},t.prototype._onMouseDown=function(t){this._hoveredField=this._getFieldByPos({x:t.pageX,y:t.pageY});if(this._hoveredField&&this._hoveredField._canSize()&&this._grid._canInteract())try{this._hoveredField.element.css("cursor",""),this._docCursor=document.body.style.cursor,document.body.style.cursor="e-resize",this._startLocation=this._lastLocation=n.grid.bounds(this._hoveredField.element),this._proxy=i('<div class="gcui-gcuigrid-resizehandle '+this._grid.options.uiCSS.stateHightlight+'">&nbsp;</div>');var r=this._grid._view().getVisibleAreaBounds();this._proxy.css({left:t.pageX,top:this._startLocation.top,height:r.height+r.top-this._startLocation.top}),i(document.body).append(this._proxy)}finally{this._attachDocEvents(),this._inProgress=!0,t.stopPropagation()}},t.prototype._onDocumentMouseMove=function(n){var t=this._step*Math.round((n.pageX-this._lastLocation.left)/this._step);this._lastLocation={left:this._lastLocation.left+t,top:n.pageY,width:undefined,height:undefined},this._proxy.css("left",this._lastLocation.left)},t.prototype._onDocumentMouseUp=function(n){try{document.body.style.cursor=this._docCursor,this._proxy.remove(),this._startLocation!==this._lastLocation&&this._grid._fieldResized(this._hoveredField,this._startLocation.width,Math.max(this._lastLocation.left-this._startLocation.left,this.MIN_WIDTH))}finally{this._hoveredField=null,this._proxy=null,this._detachDocEvents(),this._inProgress=!1}},t.prototype._onSelectStart=function(n){n.preventDefault()},t.prototype._attachDocEvents=function(){this._inProgress||(i(document).bind(this._eventKey("mousemove"),i.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),i.proxy(this._onDocumentMouseUp,this)),i.fn.disableSelection&&i(document.body).disableSelection(),"onselectstart"in document&&i(document.body).bind("selectstart",this._onSelectStart))},t.prototype._detachDocEvents=function(){this._inProgress&&(i(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp),i.fn.enableSelection&&i(document.body).enableSelection(),"onselectstart"in document&&i(document.body).unbind("selectstart",this._onSelectStart))},t.prototype._getFieldByPos=function(t){for(var u,i,f,r=0,e=this._elements.length;r<e;r++){u=this._elements[r],i=n.grid.bounds(u.element),f=n.grid.isOver(t.y,t.x,i.top,i.left+i.width-this._gap,i.height,this._gap);if(f)return u}return null},t.prototype._eventKey=function(t){return n.grid.stringFormat(this._evntFormat,t)},t}();t.uiResizer=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(t){this._scope_guid="scope_"+n.grid.getUID(),this._dragEnd=!1,this._grid=t,this._css=this._grid.options.uiCSS,this._wrapHtml='<div class="'+this._css.widget+" gcui-gcuigrid "+this._css.content+" "+this._css.cornerAll+'"><table class="gcui-gcuigrid-root gcui-gcuigrid-table"><tr class="gcui-gcuigrid-headerrow"></tr></table></div>'}return t.prototype.attachGroupArea=function(n){var r,t=this;if(!i.ui.droppable||!i.ui.draggable)return;n.droppable({scope:this._scope_guid,tolerance:"pointer",greedy:!0,accept:function(n){if(t._grid.options.allowColMoving){r=t._getFieldInstance(n);if(r)return r instanceof i.gcui.c1groupedfield&&r.options.groupedIndex===t._grid._groupedColumns().length-1?!1:!r.options.isBand&&(r.options.groupedIndex===undefined||r instanceof i.gcui.c1groupedfield)}return!1},drop:function(n,i){!t._isInElement(n,i.draggable)&&(r=t._getFieldInstance(i.draggable))&&(t._dragEnd=!0)},over:function(i,r){var u=t._grid._field("groupedWidgets").length;t._dropTargetRedirected=u>0,t._droppableField=u>0?t._grid._field("groupedWidgets")[u-1]:n,n.data("thisDroppableField",t._droppableField)},out:function(i,r){t._droppableField===n.data("thisDroppableField")&&(t._droppableField=null)}})},t.prototype.attach=function(t){var u,f,r=this;if(!i.ui.droppable||!i.ui.draggable)return;if(!t||!(u=t.element))return;u.draggable({helper:function(n){return t instanceof i.gcui.c1groupedfield?u.clone().addClass("gcui-gcuigrid-dnd-helper"):u.clone().wrap(r._wrapHtml).width(u.width()).height(u.height()).closest(".gcui-gcuigrid").addClass("gcui-gcuigrid-dnd-helper")},appendTo:"body",scope:r._scope_guid,drag:function(n,i){r._hideArrows();if(r._droppableField&&!r._isInElement(n,u)){var f=r._droppableField.element;f||(f=r._droppableField),r._showArrows(f,r._getPosition(t,r._droppableField,n,i))}},start:function(u,f){if(r._grid._canInteract()&&r._grid.options.allowColMoving&&!r._grid._field("resizer").inProgress()){var e=t.options,h=t.options.travIdx,s=t instanceof i.gcui.c1groupedfield,o=s?"groupArea":"columns";s&&(e=n.grid.search(r._grid.columns(),function(n){return n.options.travIdx===h}),e=e.found?e.found.options:n.grid.getColumnByTravIdx(r._grid.options.columns,h).found);if(t._canDrag()&&r._grid._trigger("columnDragging",null,{drag:e,dragSource:o}))return r._grid._trigger("columnDragged",null,{drag:e,dragSource:o}),!0}return!1},stop:function(n,u){r._hideArrows();try{r._dragEnd&&(r._droppableField.element?r._grid._handleDragnDrop(t.options.travIdx,r._droppableField.options.travIdx,r._getPosition(t,r._droppableField,n,u),t instanceof i.gcui.c1groupedfield,r._droppableField instanceof i.gcui.c1groupedfield):r._grid._handleDragnDrop(t.options.travIdx,-1,"left",t instanceof i.gcui.c1groupedfield,!0))}finally{r._droppableField=null,r._dragEnd=!1}}}).droppable({hoverClass:r._css.stateHover,scope:r._scope_guid,tolerance:"pointer",greedy:!0,accept:function(n){if(r._grid.options.allowColMoving)if(u[0]!==n[0]){f=r._getFieldInstance(n);if(f)return f._canDropTo(t)}return!1},drop:function(n,t){(f=r._getFieldInstance(t.draggable))&&(r._dragEnd=!0)},over:function(n,i){r._dropTargetRedirected=!1,r._droppableField=t,u.data("thisDroppableField",r._droppableField)},out:function(n,i){r._droppableField===t.element.data("thisDroppableField")&&(r._droppableField=null)}})},t.prototype.detach=function(n){var t;n&&(t=n.element)&&(t.data("ui-draggable")&&t.draggable("destroy"),t.data("ui-droppable")&&t.droppable("destroy"))},t.prototype.dispose=function(){this._$topArrow&&(this._$topArrow.remove(),this._$topArrow=null),this._$bottomArrow&&(this._$bottomArrow.remove(),this._$bottomArrow=null)},t.prototype._getFieldInstance=function(t){var i=n.grid.widgetName(t);if(!i)throw"widgetName is undedined";return t.data(i)},t.prototype._showArrows=function(n,t){this._topArrow().show().position({my:"center",at:t+" top",of:n,collision:"none"}),this._bottomArrow().show().position({my:"center",at:t+" bottom",of:n,collision:"none"})},t.prototype._hideArrows=function(){this._topArrow().hide(),this._bottomArrow().hide()},t.prototype._topArrow=function(){return this._$topArrow||(this._$topArrow=i("<div />").addClass("gcui-gcuigrid-dnd-arrow-top").append(i("<span />").addClass(this._css.icon+" ui-icon-arrowthick-1-s")).hide().appendTo(document.body)),this._$topArrow},t.prototype._bottomArrow=function(){return this._$bottomArrow||(this._$bottomArrow=i("<div />").addClass("gcui-gcuigrid-dnd-arrow-bottom").append(i("<span />").addClass(this._css.icon+" ui-icon-arrowthick-1-n")).hide().appendTo(document.body)),this._$bottomArrow},t.prototype._isInElement=function(t,i){var r=n.grid.bounds(i,!1);return t.pageX>r.left&&t.pageX<r.left+r.width&&t.pageY>r.top&&t.pageY<r.top+r.height},t.prototype._getPosition=function(t,r,u,f){if(!r.element)return"left";if(this._dropTargetRedirected)return"right";var s=n.grid.bounds(r.element,!1),c=s.width/6,h=s.left+s.width/2,o="right",e;u.pageX<h&&(o="left");if(r instanceof i.gcui.c1groupedfield)return t instanceof i.gcui.c1groupedfield&&(e=r.options.groupedIndex-t.options.groupedIndex,Math.abs(e)===1&&(o=e<0?"left":"right")),o;return e=r.options.linearIdx-t.options.linearIdx,r.options.isBand&&t.options.parentIdx!==r.options.travIdx&&Math.abs(u.pageX-h)<c?"center":(t.options.parentIdx===r.options.parentIdx&&Math.abs(e)===1&&(o=e<0?"left":"right"),o)},t}();t.uiDragndrop=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var r=jQuery,i=function(){function t(n){if(!n)throw"invalid arguments";this._grid=n}return t.prototype.format=function(t,i,u,f,e,o,s){var l=n.grid.renderState,a=n.grid.rowType,v=f.type,h,c=null;i===0&&this._grid._showRowHeader()&&(u=null),(v===a.groupHeader||v===a.groupFooter)&&(u=null,o&&(c=o.groupInfo)&&(u=this._grid._field("leaves")[c.leafIndex],delete o.groupInfo)),h={$cell:t,state:e,row:f,column:u,_cellIndex:i,_purpose:c?c.purpose:undefined},e===l.rendering?this._renderingStateFormatter(h,o,s):(this._currentStateFormatter(h,e&l.current),this._selectedStateFormatter(h,e&l.selected)),r.isFunction(this._grid.options.cellStyleFormatter)&&this._grid.options.cellStyleFormatter(h)},t.prototype._renderingStateFormatter=function(t,i,r){var e=n.grid.rowType,u,s,f=t.column,o=t.row.type;switch(o){case e.header:t.$cell.addClass("gcuigridth");break;default:t.$cell.addClass("gcuigridtd")}if(o&e.data&&f&&f.textAlignment)switch(f.textAlignment.toLowerCase()){case"left":t.$cell.addClass("gcui-align-left");break;case"right":t.$cell.addClass("gcui-align-right");break;case"center":t.$cell.addClass("gcui-align-center");break}if(i)for(u in i)if(i.hasOwnProperty(u)){s=i[u];if((u==="colSpan"||u==="rowSpan")&&!(s>1))continue;u==="class"?t.$cell.addClass(s):t.$cell.attr(u,s)}if(r)for(u in r)if(r.hasOwnProperty(u)){if(u==="paddingLeft"){t.$cell.children(".gcui-gcuigrid-innercell").css(u,r[u]);continue}t.$cell.css(u,r[u])}if(t._cellIndex===0&&this._grid._showRowHeader())t.$cell.attr({role:"rowheader",scope:"row"}).addClass(this._grid.options.uiCSS.stateDefault+" "+this._grid.options.uiCSS.content+" gcui-gcuigrid-rowheader");else switch(o){case e.header:t.$cell.attr({role:"columnheader",scope:"col"});break;case e.footer:t.$cell.attr({role:"columnfooter",scope:"col"});break;default:t.$cell.attr("role","gridcell")}o&e.data&&t._cellIndex>=0&&f&&(t.$cell.attr("headers",window.escape(f.headerText)),f.readOnly&&t.$cell.attr("aria-readonly",!0),f.dataIndex<0||t.$cell.addClass("gcui-data-type-"+n.grid.getDataType(f))),(o===e.groupHeader||o===e.groupFooter)&&f&&t._purpose===n.grid.groupRowCellPurpose.aggregateCell&&t.$cell.addClass("gcui-data-type-"+n.grid.getDataType(f))},t.prototype._currentStateFormatter=function(t,i){var r=n.grid.rowType;i?(t.$cell.addClass(this._grid.options.uiCSS.stateActive),t.row.type===r.header?t.$cell.addClass("gcui-gcuigrid-current-headercell"):t.$cell.addClass("gcui-gcuigrid-current-cell")):(t.$cell.removeClass(this._grid.options.uiCSS.stateActive),t.row.type===r.header?t.$cell.removeClass("gcui-gcuigrid-current-headercell"):t.$cell.removeClass("gcui-gcuigrid-current-cell"))},t.prototype._hoveredStateFormatter=function(n,t){t},t.prototype._selectedStateFormatter=function(n,t){t?n.$cell.addClass(this._grid.options.uiCSS.stateHightlight).attr("aria-selected","true"):n.$cell.removeClass(this._grid.options.uiCSS.stateHightlight).removeAttr("aria-selected")},t}();t.cellStyleFormatterHelper=i})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(n){if(!n)throw"invalid arguments";this._grid=n}return t.prototype.format=function(t,r,u){var e=n.grid.renderState,s=n.grid.rowType,o=t.state,f=t;o===e.rendering?this._renderingStateFormatter(f,r,u):(this._currentStateFormatter(f,(o&e.current)!=0),this._hoveredStateFormatter(f,(o&e.hovered)!=0),this._selectedStateFormatter(f,(o&e.selected)!=0)),i.isFunction(this._grid.options.rowStyleFormatter)&&this._grid.options.rowStyleFormatter(f)},t.prototype._renderingStateFormatter=function(t,r,u){var e="gcui-gcuigrid-row "+this._grid.options.uiCSS.content,s="gcui-gcuigrid-row "+this._grid.options.uiCSS.content,o=n.grid.rowType,f;t.$rows.attr("role","row");if(r)for(f in r)r.hasOwnProperty(f)&&(f==="class"?t.$rows.addClass(r[f]):(t.$rows.attr(f,r[f]),t.$rows[0].style.height&&t.$rows.each(function(){return i.data(this,"customHeight",this.style.height),!0})));if(u)for(f in u)u.hasOwnProperty(f)&&t.$rows.css(f,u[f]);switch(t.type&~o.dataAlt){case o.header:e="gcui-gcuigrid-headerrow";break;case o.data:e=s+" gcui-gcuigrid-datarow",t.type&o.dataAlt&&(e+=" gcui-gcuigrid-alternatingrow");break;case o.emptyDataRow:e=s+" gcui-gcuigrid-emptydatarow";break;case o.filter:e="gcui-gcuigrid-filterrow";break;case o.groupHeader:e=s+" gcui-gcuigrid-groupheaderrow";break;case o.groupFooter:e=s+" gcui-gcuigrid-groupfooterrow";break;case o.footer:e="gcui-gcuigrid-footerrow "+this._grid.options.uiCSS.stateHightlight;break;default:throw n.grid.stringFormat("unknown rowType: {0}",t.type);}t.$rows.addClass(e)},t.prototype._currentStateFormatter=function(n,t){this._grid._showRowHeader()&&(t?i(n.$rows[0].cells[0]).addClass(this._grid.options.uiCSS.stateActive+" gcui-gcuigrid-current-rowheadercell"):i(n.$rows[0].cells[0]).removeClass(this._grid.options.uiCSS.stateActive+" gcui-gcuigrid-current-rowheadercell"))},t.prototype._hoveredStateFormatter=function(n,t){t?n.$rows.addClass(this._grid.options.uiCSS.stateHover):n.$rows.removeClass(this._grid.options.uiCSS.stateHover)},t.prototype._selectedStateFormatter=function(n,t){t},t}();t.rowStyleFormatterHelper=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(n){"use strict";var i=jQuery,t=function(){function n(){this._sum=0,this._sum2=0,this._cntNumbers=0,this._cntStrings=0,this._cntDates=0,this._max=0,this._min=0,this._minDate=0,this._maxDate=0}return n.prototype.add=function(n){if(n===null||n==="")return;var t,i=n instanceof Date?"datetime":typeof n;t=n.toString(),this._cntStrings++==0&&(this._minString=this._maxString=t),t<this._minString&&(this._minString=t),t>this._maxString&&(this._maxString=t),i==="number"?(this._cntNumbers++==0&&(this._min=this._max=n),this._sum+=n,this._sum2+=n*n,n<this._min&&(this._min=n),n>this._max&&(this._max=n)):i==="datetime"&&(t=n.getTime(),this._cntDates++==0&&(this._minDate=this._maxDate=t),t<this._minDate&&(this._minDate=t),t>this._maxDate&&(this._maxDate=t))},n.prototype.getValueString=function(n){var t=n.owner,i;if(this._cntNumbers&&(n.dataType==="number"||n.dataType==="currency"))return i=this._getValue(n.aggregate),t.toStr(n,i);if(this._cntDates&&n.dataType==="datetime")switch(n.aggregate){case"max":return t.toStr(n,new Date(this._maxDate));case"min":return t.toStr(n,new Date(this._minDate));case"count":return this._cntStrings+""}if(this._cntStrings)switch(n.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}return""},n.prototype._getValue=function(n){switch(n){case"average":return this._cntNumbers===0?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":return this._cntNumbers<=1?0:Math.sqrt(this._getValue("var"));case"stdPop":return this._cntNumbers<=1?0:Math.sqrt(this._getValue("varPop"));case"var":return this._cntNumbers<=1?0:this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1)return 0;var t=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-t*t}return 0},n}();n.tally=t})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(t){this._docEventsUID="gcuigridfrozener"+n.grid.getUID(),this._docEventsAttached=!1,this._newStaticIndex=-1,this._staticColumnIndex=-1,this._staticRowIndex=-1,this._staticOffsetH=0,this._staticOffsetV=0,this._inProgress=!1,this._grid=t,this.refresh()}return t.prototype.inProgress=function(){return this._inProgress},t.prototype.refresh=function(){this.dispose(),this._$outerDiv=this._grid.outerDiv.find(".gcui-gcuigrid-fixedview"),this._superPanel=this._grid._view()._getSuperPanel(),this._staticOffsetH=this._grid._getStaticOffsetIndex(!1),this._staticOffsetV=this._grid._getStaticOffsetIndex(!0),this._staticColumnIndex=this._grid._getStaticIndex(!1),this._staticRowIndex=this._grid._getStaticIndex(!0),this._visibleBounds=this._grid._view().getVisibleAreaBounds();var i=n.grid.bounds(this._$outerDiv.find(".gcui-gcuigrid-split-area-nw")),t=n.grid.bounds(this._$outerDiv);this._grid.options.staticColumnsAlignment==="right"&&this._staticColumnIndex<0||this._createVBar(this._visibleBounds,i,t),this._grid._serverSideVirtualScrolling()||this._createHBar(this._visibleBounds,i,t)},t.prototype.dispose=function(){this._$hBar&&(this._$hBar.remove(),this._$hBar=null),this._$vBar&&(this._$vBar.remove(),this._$vBar=null),this._$proxy&&(this._$proxy.remove(),this._$proxy=null),this._$outerDiv=null,this._superPanel=null,this._detachDocEvents()},t.prototype._createVBar=function(n,t,r){var e=this._grid.options.staticColumnsAlignment!=="right",f=e?t.width+t.left:t.left-2,u=this;f>n.left+n.width||(this._$vBar=i("<div><div></div></div>").addClass("gcui-grid-freezing-handle-v").addClass(e?"":"not-allowed").css({left:f-r.left,top:t.top-r.top,height:n.height+n.top-t.top}).bind("mousedown",function(n){n.data=!0,u._onBarMouseDown.apply(u,arguments)}).appendTo(this._$outerDiv),this._$vBar.find("div").addClass(this._grid.options.uiCSS.header).css({width:0,height:"100%"}))},t.prototype._createHBar=function(n,t,r){var e=t.top+t.height,f=this._grid.options.staticColumnsAlignment!=="right",u=this;e>n.top+n.height||(this._$hBar=i("<div><div></div></div>").addClass("gcui-grid-freezing-handle-h").css({left:f?t.left-r.left:0,top:e-r.top,width:f?n.width+n.left-t.left:n.width}).bind("mousedown",function(n){n.data=!1,u._onBarMouseDown.apply(u,arguments)}).appendTo(this._$outerDiv),this._$hBar.find("div").addClass(this._grid.options.uiCSS.header).css({width:"100%",height:0}))},t.prototype._onBarMouseDown=function(n){if(this._grid.options.disabled||this._grid.options.staticColumnsAlignment==="right"&&n.data)return!1;this._visibleBounds=this._grid._view().getVisibleAreaBounds(),this._newStaticIndex=n.data?this._staticColumnIndex:this._staticRowIndex,this._$proxy=i('<div class="gcui-gcuigrid-resizehandle '+this._grid.options.uiCSS.header+'"></div>').appendTo(document.body),this._attachDocEvents(n.data),this._inProgress=!0,n.stopPropagation()},t.prototype._onDocumentMouseMove=function(n){n.data&&this._superPanel.options.hScroller.scrollValue?this._superPanel.hScrollTo(0):!n.data&&this._superPanel.options.vScroller.scrollValue&&this._superPanel.vScrollTo(0),this._showPosition(n)},t.prototype._onDocumentMouseUp=function(n){try{this._$proxy&&this._$proxy.remove(),this._detachDocEvents(),n.data?this._newStaticIndex!==this._staticColumnIndex&&this._grid.option("staticColumnIndex",this._newStaticIndex):this._newStaticIndex!==this._staticRowIndex&&this._grid.option("staticRowIndex",this._newStaticIndex)}finally{this._$proxy=null,this._inProgress=!1}},t.prototype._attachDocEvents=function(n){if(!this._docEventsAttached)try{i.fn.disableSelection&&i(document.body).disableSelection(),this._grid._view().toggleDOMSelection(!1),i(document).bind(this._docEventKey("mousemove"),n,i.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),n,i.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=!0}},t.prototype._detachDocEvents=function(){if(this._docEventsAttached)try{i.fn.enableSelection&&i(document.body).enableSelection(),this._grid._view().toggleDOMSelection(!0),i(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=!1}},t.prototype._docEventKey=function(t){return n.grid.stringFormat("{0}.{1}",t,this._docEventsUID)},t.prototype._showPosition=function(t){var f,i,h,r,s,o,e,u,c=this._grid.options.staticColumnsAlignment!=="right";if(t.data){u=n.grid.bounds(this._$vBar);if(Math.abs(t.pageX-(u.left+u.width/2))<u.width){this._$proxy.hide();return}if(f=this._getFieldByPos({x:t.pageX,y:t.pageY})){i=n.grid.bounds(f.element),h=i.left+i.width/2,r=f.options.visLeavesIdx-this._staticOffsetV,s=Math.max(r-1,-1),o=t.pageX<h?s!==this._staticColumnIndex:r===this._staticColumnIndex,e=o?i.left:i.left+i.width;if(!n.grid.isOverAxis(e,this._visibleBounds.left-1,this._visibleBounds.width+2))return;this._newStaticIndex=o?s:r,this._$proxy.show().css({left:e,top:i.top,width:3,height:this._visibleBounds.height+this._visibleBounds.top-i.top})}}else{u=n.grid.bounds(this._$hBar);if(Math.abs(t.pageY-(u.top+u.height/2))<u.height){this._$proxy.hide();return}if(f=this._getRowByPos({x:t.pageX,y:t.pageY})){i=n.grid.bounds(f),h=i.top+i.height/2,r=this._grid._view().getAbsoluteRowIndex(f)-this._staticOffsetH,s=Math.max(r-1,-1),o=t.pageY<h?s!==this._staticRowIndex:r===this._staticRowIndex,e=o?i.top:i.top+i.height;if(!n.grid.isOverAxis(e,this._visibleBounds.top-1,this._visibleBounds.height+2))return;this._newStaticIndex=o?s:r,this._$proxy.show().css({left:c?i.left:this._visibleBounds.left,top:e,width:c?this._visibleBounds.width+this._visibleBounds.left-i.left:this._visibleBounds.width,height:3})}}},t.prototype._getFieldByPos=function(t){for(var o=this._grid.columns(),r,e,u,i=0,f=o.length;i<f;i++){r=o[i],e=r.options;if(e.isLeaf){u=n.grid.bounds(r.element);if(n.grid.isOverAxis(t.x,u.left,u.width))return r}}return null},t.prototype._getRowByPos=function(t){for(var e=this._grid._rows(),u,f,r=0,o=e.length();r<o;r++){u=e.item(r)[0],f=n.grid.bounds(i(u));if(n.grid.isOverAxis(t.y,f.top,f.height))return u}return null},t}();t.uiFrozener=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,r=function(){function t(){}return t.generate=function(i,r,u){switch(i){case"append":t._processAppendMode(r,u);break;case"merge":t._processMergeMode(r,u);break;case"none":break;default:throw n.grid.stringFormat('Unsupported value: "{0}"',i);}},t._processAppendMode=function(r,u){var f={};n.grid.traverse(u,function(t){t.dynamic&&n.grid.validDataKey(t.dataKey)&&(f[t.dataKey]=!0)}),i.each(r,function(n,i){if("name"in i&&!f[i.name]){var r=t._createAutoField(i);u.push(r)}})},t._processMergeMode=function(r,u){var f=[],e;n.grid.traverse(u,function(t){if(t.isLeaf&&!t.isBand){var i=t.dataKey;n.grid.validDataKey(i)?r[i]!==undefined&&delete r[i]:i!==null&&f.push(t)}}),f.length&&(e=0,i.each(r,function(n,t){var i=f[e++];i&&(i.dataKey=t.name,delete r[n])})),i.each(r,function(n,i){var r=t._createAutoField(i);u.push(r)})},t._createAutoField=function(t){return n.grid.createDynamicField({dataKey:t.name})},t}();t.columnsGenerator=r})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(n){"use strict";var t=jQuery,i=function(){function n(n,t,i){this._timer=0,this._timeout=50,this._ignoreScrollEvents=!1,this._grid=n,this._fixedAreaHeight=i,this._view=this._grid._view(),this._N=this._grid._totalRowsCount();var u=20,r=this._grid.outerDiv.height()+this._N*u;t.height(r-i-(this._N>0?u:0)),this._view._splitAreas.sw.height(r)}return n.prototype.scrollTo=function(n,t){this._completeListener=t,this._panelInst.vScrollTo(n*this._panelInst.options.vScroller.scrollSmallChange,!0)},n.prototype.attach=function(n){this._$scroller=n,this._panelInst=n.data("gcui-superpanel");var i,e=n.find(".gcui-superpanel-contentwrapper:first"),o=this._panelInst.getContentElement().height(),r=this._fixedAreaHeight+o,f=e.innerHeight(),u=101/(this._N-1)*((r-f)/r);i=this._panelInst.options.vScroller,i.scrollSmallChange=u,this._panelInst.option("vScroller",i),n.bind("superpanelscrolled.gcuigrid",t.proxy(this._onSuperpanelScrolled,this)),n.bind("superpanelscrolling.gcuigrid",t.proxy(this._onSuperpanelScrolling,this)),n.bind("superpanelscrolled.gcuigrid",t.proxy(this._onSuperpanelPostScrolled,this))},n.prototype.dispose=function(){this._$scroller.unbind(".gcuigrid"),this._clearTimer()},n.prototype._clearTimer=function(){window.clearTimeout(this._timer),this._timer=0},n.prototype._onSuperpanelScrolling=function(n,t){if(!this._ignoreScrollEvents&&t.dir==="v")return this._timer===-1?!1:void 0},n.prototype._onSuperpanelScrolled=function(n,i){var r=this,u,f;if(this._ignoreScrollEvents||i.dir!=="v")return;this._timer>0&&this._clearTimer(),this._timer!==-1&&(r._timer=-1,u=Math.round(i.newValue/r._panelInst.options.vScroller.scrollSmallChange),f=r._view._bounds.start,u<0&&(u=0),u<r._N||(u=r._N-1),u!==f?r._grid._handleVirtualScrolling(u,t.proxy(r._scrollingCompleted,r)):(r._log(),r._clearTimer()))},n.prototype._scrollingCompleted=function(n){this._grid._trackScrollingIndex(n),this._log(),this._completeListener&&(this._completeListener(),this._completeListener=null),this._clearTimer()},n.prototype._onSuperpanelPostScrolled=function(){t.isFunction(this._postScrolled)&&this._postScrolled.apply(this,arguments)},n.prototype._log=function(){},n}();n.uiVirtualScroller=i})(n.grid||(n.grid={}));var t=n.grid}(gcui||(gcui={})),function(n){(function(n){function u(t,r,u,f){function e(i){return f.parser=f.parser||n.defaultParsers[i],f.parser||t==null||n.errors.noParser(i),f.parser}var o=t;f=i.extend({nullString:"",format:""},f),r=r||t!=null&&typeof t,u=u||r;if(!u)return t;if(u=="string")return e(r),f.parser?f.parser.toStr(t,f.culture,f.format,f.nullString,!0):t;e(u);if(!f.parser)return t;t=f.parser.parse(t,f.culture,f.format,f.nullString,!0);if(isNaN(t)&&t!=null&&n.util.isNumeric(t)){if(f.ignoreError)return o;n.errors.cantConvert(u,o)}return t}function r(i){return function(){return t||n.util.logError(n.errors.noGlobalize.create().message),i.apply(this,arguments)}}var i=jQuery,t=Globalize;n.convert=u,n.defaultParsers={string:{parse:function(n,t,i,r,u){switch(n){case null:return null;case r:if(u)return null;case undefined:case"&nbsp":return"";default:return""+n}},toStr:function(n,t,i,r,u){return n===null&&u?r:""+n}},number:{parse:function(n,i,r,u,f){var e=typeof n;return e==="number"?isNaN(n)?NaN:n:!n&&n!==0||n==="&nbsp;"||n===u&&f?null:t.parseFloat(n,10,i.name)},toStr:function(n,i,r,u,f){return n===null&&f?u:t.format(n,r||"n",i.name)}},currency:{parse:function(n,i,r,u,f){var e=typeof n;return e==="number"?isNaN(n)?NaN:n:!n&&n!==0||n==="&nbsp;"||n===u&&f?null:(e==="string"&&(n=n.replace(i.numberFormat.currency.symbol,"")),t.parseFloat(n,10,i.name))},toStr:function(n,i,r,u,f){return n===null&&f?u:t.format(n,r||"c",i.name)}},datetime:{parse:function(n,i,r,u,f){var o,e;if(n instanceof Date)return n;if(!n||n==="&nbsp;"||n===u&&f)return null;return o=/^\/Date\((\d+)\)\/$/.exec(n),o?new Date(parseInt(o[1],10)):(e=t.parseDate(n,r,i.name),(e==null||isNaN(e))&&(e=Date.parse(n),e=isNaN(e)?NaN:new Date(e)),e)},toStr:function(n,i,r,u,f){return n===null&&f?u:t.format(n,r||"d",i.name)}},boolean:{parse:function(n,t,r,u,f){var e=typeof n;if(e==="number")return n!=0;if(e==="boolean")return n;e==="string"&&(n=i.trim(n));if(!n||n==="&nbsp;"||n===u&&f)return null;switch(n.toLowerCase()){case"true":return!0;case"false":return!1}return NaN},toStr:function(n,t,i,r,u){return n===null&&u?r:n?"true":"false"}}},i.each(n.defaultParsers,function(n,t){t.parse=t.parse&&r(t.parse),t.toStr=t.toStr&&r(t.toStr)})})(n.data||(n.data={}))}(gcui||(gcui={})),function(n){(function(n){(function(t){(function(i){function f(r){function u(r){var f=[],e;return r.length===0?f:(e=i.Connective.AND,n.util.each(r,function(r,o){var h,s;if(r==0&&n.util.isString(o)){h=o.toLowerCase();if(h==i.Connective.AND||h==i.Connective.OR){e=h;return}}if($.isArray(o)){o=u(o);if(!o)return;if(o[0]===e||o.length==2){o.shift(),f=f.concat(o);return}}else{s=t.normalizeCondition(o);if(!s)return;s.property=o.property,o=s}f.push(o)}),f.length==0?null:(f.unshift(e),f))}return u(r)}function u(t){if(!$.isArray(t))return null;var r={original:t,normalized:f(t),func:null};return r.func=r.normalized==null?function(n){return!0}:function(t){function u(r){var f=r[0]===i.Connective.AND,e=f?n.util.every:n.util.some;return e(r,function(i,r){if(r===0)return f;if($.isArray(i))return u(i);else{var e=n.util.getProperty(t,i.property);return i.op.apply(e,i.value)}})}return u(r.normalized)},r}function r(t){return u(t)||n.filtering.compile(t)}i.Connective={AND:"and",OR:"or"},i.compile=r})(t.extended||(t.extended={}));var i=t.extended})(n.filtering||(n.filtering={}))})(n.data||(n.data={}))}(gcui||(gcui={})),function(n){(function(t){var i=jQuery,r=n.data,u=r.filtering.extended,f=function(){function n(n){this.real=n,this._updatingFilter=!1,this._overrideFilter(),this._makeMemberProxies()}return n.prototype._overrideFilter=function(){var n=this;this.filter=r.observable(this.real.filter()),this.filter.subscribe(function(t){n.real.filter()===t||n._updatingFilter||n.refresh({filter:t})}),this.real.filter.subscribe(function(t){t!==n._lastSetFilter&&n.filter(t)})},n.prototype.refresh=function(n,t){typeof t=="undefined"&&(t=!1),n=i.extend({},n);var r=n.filter;n.filter=this._coerceFilter(n.filter),this._lastSetFilter=n.filter,this._updatingFilter=!0;try{i.isFunction(n.filter)&&!i.isFunction(r)?this.filter(r):this.filter(n.filter)}finally{this._updatingFilter=!1}return this.real.refresh(n,t)},n.prototype._makeMemberProxies=function(){var n=this;r.util.each(this.real,function(t,r){if(!i.isFunction(r)||n[t]||t.charAt(0)==="_")return;n[t]=i.isFunction(r.subscribe)?r:function(){return r.apply(n.real,arguments)}})},n.create=function(t){return new n(t)},n.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(n){var t=[];return i.each(n,function(n,f){var o,e;if(i.isArray(f)){o=r.util.isString(f[0])&&f[0].toLowerCase();if(o===u.Connective.AND||o===u.Connective.OR){t.push(f);return}}else f=[f];e=[],i.each(f,function(t,i){var u=r.filtering.normalizeCondition(i);u&&(u.property=n,e.push(u))}),e.length>0&&t.push(e)}),t.length>0?t:null},n.prototype._coerceFilter=function(n){var t,f;if(i.isArray(n))return u.compile(n).func;else if(!i.isPlainObject(n))return n;return n=i.extend(!0,{},n),t={},i.each(n,function(u,f){i.isArray(f)||(f=[f]);if(t){var e=r.util.isString(f[0])&&f[0].toLowerCase();if(f.length==1||f.length==2&&(e==="and"||e==="or")){t[u]=f[f.length-1];return}}n[u]=f,t=null}),t?t:(f=this._convertComplexPropertyFilterToExtendedFilterFormat(n),u.compile(f).func)},n.prototype._unsafeReplace=function(n,t){this.real.sourceArray[n]=t,this.real.local[n]=t},n.prototype._unsafeSplice=function(n,t,i){arguments.length===2?(this.real.sourceArray.splice(n,t),this.real.local.splice(n,t)):(this.real.sourceArray.splice(n,t,i),this.real.local.splice(n,t,i))},n.prototype._unsafePush=function(n){this.real.sourceArray.push(n),this.real.local.push(n)},n}();t.GridDataView=f})(n.grid||(n.grid={}))}(gcui||(gcui={})),function(n){(function(t){"use strict";var i=jQuery,g="gcuiribbon",r="gcui-ribbon",y=r+"-disabled",v=r+"-bigbutton",b=r+"-panel",l=r+"-groups",e=r+"-group",w=e+"-content",k=e+"-label",s=r+"-dropdown",f=r+"-dropdowngroup",c=r+"-abbrev",u=c+"group",d=r+"-text",h=r+"-icon",p=r+"-abbrevicon",o=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._create=function(){var n=this;window.applyTouchUtilEvents&&(i=window.applyTouchUtilEvents(i)),n._ribbonify(),i(window).bind("resize."+this.widgetName,function(){n.updateRibbonSize()}),n.element.is(":hidden")&&n.element.addVisibilityObserver&&n.element.addVisibilityObserver(function(){n.updateRibbonSize(),n.options.disabled&&n._setDisabled(!0),n.element.removeVisibilityObserver&&n.element.removeVisibilityObserver()},"gcuiribbon"),n.options.disabled&&n._setDisabled(!0)},t.prototype._setOption=function(n,t){i.gcui.widget.prototype._setOption.apply(this,arguments),n==="disabled"&&this._setDisabled(t),i(".gcui-ribbon-startmenulink",this.element).unbind("click.tabs")},t.prototype._setDisabled=function(n){var r=this,t=r.element,o=t.offset(),e=o.top,s=o.left,f=i("body"),h=this.options.uiCSS,u=r.disabledModal;t.data("gcuiUITabs")&&t.gcuitabs("option","disabled",n),t.closest(".gcui-editor").length!==0&&(e=0,s=0,f=t.parent()),n?(u||(u=i("<div></div>").addClass(h.stateDisabled+" "+y).css({top:e,left:s,"background-color":"lightgray",position:"absolute"}).appendTo(f).bind("click mousedown mouseup mouseover mouseout focus keydown keypress",function(n){return n.stopPropagation(),n.preventDefault(),!1}),r.disabledModal=u),r.disabledModal.width(t.width()).height(t.outerHeight()).show()):r.disabledModal&&r.disabledModal.hide()},t.prototype._initCustomButtons=function(){var t=this,n;i.each(i("[customtype]",t.element),function(r,u){n=i(u).attr("customtype"),n&&t.options.custombuttons[n]&&t.options.custombuttons[n].create(i(u))})},t.prototype._ribbonify=function(){var n=this,t=this.options.uiCSS;n.buttons={},n.listUis={},n.accessbarBtns={},n._initCustomButtons(),n._createAccessToolBar(),n._getButtonSets(),n._createButtons(),n._createGroup(),n._createSplit(),n._createDropdwon(),n._createInputDropdown(),n._createGallery(),n._hideShowedList(),n._createTab(),i("."+t.helperReset+":not(."+l+", ."+t.tabsNav+", .gcui-menu-list)",n.element).hover(function(){i(this).addClass(t.stateHover)},function(){i(this).removeClass(t.stateHover)}),i("."+t.button,n.element).bind("mouseenter",function(){i("."+t.buttonText,this).addClass(t.stateHover)}).bind("mouseleave",function(){i("."+t.buttonText,this).removeClass(t.stateHover)}),i("button."+t.button,n.element).bind("mousedown",function(){n._addActiveClassToButtonText(this)}).bind("mouseup",function(){n._addActiveClassToButtonText(this)}),i("label."+t.button,n.element).bind("click",function(){i("span",this)&&i("span",this).length===1&&n._addActiveClassToLabelButtonText(this)})},t.prototype._addActiveClassToButtonText=function(n){var t=this.options.uiCSS;n&&(i(n).hasClass(t.stateActive)?i("."+t.buttonText,n).addClass(t.stateActive):i("."+t.buttonText,n).removeClass(t.stateActive))},t.prototype._addActiveClassToLabelButtonText=function(n){var r=this,t,f,u;n&&(f=i(n).attr("for"),t=i("#"+f,r.element),t.is(":checkbox")?r._addActiveClassToButtonText(n):t.is(":radio")&&(u=r.element.find("[name='"+t.attr("name")+"']"),i.each(u,function(){r._updateGroupElementTextState(this)})))},t.prototype._updateGroupElementTextState=function(n){var r,t=this.options.uiCSS;if(!n)return;r=i("[for='"+i(n).attr("id")+"']",i(n).parent()),r&&(r.hasClass(t.stateActive)?r.children("."+t.buttonText).addClass(t.stateActive):r.children("."+t.buttonText).removeClass(t.stateActive))},t.prototype._getButtonSets=function(){var n=this,t;n.groups=[],n.splits=[],n.dropdowns=[],n.inputDropdowns=[],i("span>button, span>:checkbox, span>:radio, div>button, div>:checkbox, div>:radio, div>:text",n.element).each(function(r,u){if(!i(u).parents("[customtype]")||i(u).parents("[customtype]").length===0)return t=i(u).parent(),i(">ul",t).length!==0||t.hasClass("gcui-ribbon-accesstoolbar")?i(">button",t).length===2?n.splits.push(t):i(">button",t).length===1?n.dropdowns.push(t):i(">input[type='text']",t).length===1&&n.inputDropdowns.push(t):n.groups.push(t),this}),n.groups=n._unique(n.groups),n.splits=n._unique(n.splits)},t.prototype._unique=function(n){var t=i.makeArray(i.map(n,function(n){return n.get(0)}));return i.map(i.unique(t),function(n){return i(n)})},t.prototype._createButtons=function(){var n=this,t=n.element;i(":checkbox",t).each(function(){if(!i(this).parents("[customtype]")||i(this).parents("[customtype]").length===0)return n._createButton(i(this),"checkbox"),i(this).bind("change",function(){n._addActiveClassToLabelButtonText(i(this).button("widget")[0])}),this}),i(":radio",t).each(function(){if(!i(this).parents("[customtype]")||i(this).parents("[customtype]").length===0)return n._createButton(i(this),"radio"),i(this).bind("change",function(){n._addActiveClassToLabelButtonText(i(this).button("widget")[0])}),this}),i("button",t).each(function(){if(!i(this).parents("[customtype]")||i(this).parents("[customtype]").length===0)return n._createButton(i(this),"button"),this})},t.prototype._createButton=function(n,t){var e=this,f=this.options.uiCSS,o=e._buildButtonOption(n,t),u=n.data("commandName"),r;n.button(o),o.text||(t==="button"?n.children("."+f.buttonText).text(u):(r=i("[for='"+n.attr("id")+"']",n.parent()),r&&r.children("."+f.buttonText).text(u))),n.parent().is(".gcui-ribbon-accesstoolbar")&&n.attr("canlocateonaccesstoolbar")==="true"&&n.button("widget").hide(),e._triggerEvent(n)},t.prototype._createGroup=function(){i.each(this.groups,function(n,t){t.buttonset()})},t.prototype._createSplit=function(){var n=this,t=this.options.uiCSS;i.each(n.splits,function(u,f){var e=f.children("ul"),o=f.children("button:eq(0)"),l=o.data("commandName"),c=f.children("button:eq(1)"),h;e.children("li").addClass(t.cornerAll),f.addClass(r+"-"+l),c.button({icons:{primary:t.iconArrowDown},text:!1}).data("list",e).unbind("click").bind("click",function(n){n.stopPropagation(),n.preventDefault()}).bind("mouseup",function(t){e=i(this).data("list"),e.is(":visible")?(n.showList.hide().css("z-index",""),n.showList=null):(e.show().position({my:"left top",at:"left bottom",of:f}).css("z-index",9999),n.showList=e),t.stopPropagation(),t.preventDefault()}),c.children("."+t.buttonText).text("foo"),f.after(e),e.css("position","absolute").addClass(t.helperReset+" "+t.helperClearFix+" "+t.cornerAll+" "+s).hide(),f.buttonset(),h={ui:o,defaultValue:o.button("option","label"),buttons:[],type:"split",trigger:c,list:e},i("button, :checkbox, :radio",e).bind("click",function(t){e.hide().css("z-index",""),n.showList=null,t.preventDefault()}),e.find(">li>button,>li>:radio,>li>:checkbox").each(function(t,r){var u=i(r).data("commandName");u!==""&&n.buttons[u]&&(n.buttons[u].parent=o,n.buttons[u].type="split"),h.buttons.push(i(r))}),l!==""&&(n.listUis[l]=h)})},t.prototype._createDropdwon=function(){var n=this,t=this.options.uiCSS,f,u;n.dropdownLabels={},i.each(n.dropdowns,function(u,f){var o=f.children("ul"),e=f.children("button:eq(0)"),c=e.data("commandName"),h;o.children("li").addClass(t.cornerAll),f.addClass(r+"-"+c),e.button({icons:{secondary:t.iconArrowDown}}).unbind("click").bind("click",function(n){n.stopPropagation(),n.preventDefault()}).bind("mouseup",function(t){n._showDropDownList(o,e),t.stopPropagation(),t.preventDefault()}).bind("keydown",function(t){if(!o.is(":visible"))return;n._dropdownListKeyHandler(t,o,e)}),h={ui:e,defaultValue:e.button("option","label"),buttons:[],type:"dropdown",list:o},i("button, :checkbox, :radio",o).bind("click",function(r){var u=i(this).data("commandName"),f,s=e.children("."+t.buttonText).width();n.dropdownLabels[u]||(n.dropdownLabels[u]=n._getDropdownLabelSubstr(i(this).button("option","label"),e.children("."+t.buttonText),s)),f=n.dropdownLabels[u],e.button("option","label",f),e.attr("title",i(this).button("option","label")),o.hide().css("z-index",""),n.showList=null,r.preventDefault()}),o.css("position","absolute").addClass(t.helperReset+" "+t.helperClearFix+" "+t.cornerAll+" "+s).hide(),f.buttonset(),n._collectDropDownButtons(o,e,h,c)})},t.prototype._createInputDropdown=function(){var n=this,t=this.options.uiCSS;n.dropdownLabels={},i.each(n.inputDropdowns,function(u,f){var o=f.children("ul"),e=f.children("input[type='text']:eq(0)"),c=n._createInputDropDownWrapper(e),h=e.prop("name"),l;f.prepend(c),o.children("li").addClass(t.cornerAll),f.addClass(r+"-"+h),e.removeProp("name").data("commandName",h).addClass(t.stateDefault+" "+t.content+" "+t.cornerLeft),c.find("a").bind("mouseup",function(t){n._showDropDownList(o,e),e.focus(),t.stopPropagation(),t.preventDefault()}).bind("keydown",function(t){n._dropdownListKeyHandler(t,o,c)}),n._bindInputEvent(e,o),l={ui:e,defaultValue:e.val(),buttons:[],type:"dropdown",list:o},i("button, :checkbox, :radio",o).bind("click",function(t){var r=i(this).data("commandName"),u;n.dropdownLabels[r]||(n.dropdownLabels[r]=i(this).button("option","label")),u=n.dropdownLabels[r],e.val(i(this).button("option","label")).attr("title",i(this).button("option","label")),o.hide().css("z-index",""),n.showList=null,t.preventDefault(),t.stopPropagation()}),o.css("position","absolute").addClass(t.helperReset+" "+t.helperClearFix+" "+t.cornerAll+" "+s).hide(),n._collectDropDownButtons(o,e,l,h)})},t.prototype._collectDropDownButtons=function(n,t,r,u){var f=this;n.find(">li>button,>li>:radio,>li>:checkbox").each(function(n,u){var e=i(u).data("commandName");e!==""&&f.buttons[e]&&(f.buttons[e].parent=t,f.buttons[e].type="dropdown"),r.buttons.push(i(u))}),u!==""&&(f.listUis[u]=r)},t.prototype._showDropDownList=function(n,t){var i=this;n.is(":visible")&&!n.find("li."+i.options.uiCSS.stateActive)?(i.showList.hide().css("z-index",""),i.showList=null):(i.showList&&(i.showList.hide(),i.showList=null),n.show().position({my:"left top",at:"left bottom",of:t}).css("z-index",9999),i.showList=n,i.isShow=!0)},t.prototype._bindInputEvent=function(n,t){var i=this,u,r;n.bind("change",function(t){var r={name:undefined,commandName:undefined};r.name=n.prop("name"),r.commandName=n.val(),i._trigger("click",t,r)}).bind("keydown",function(r){i._dropdownListKeyHandler(r,t,n)})},t.prototype._dropdownListKeyHandler=function(n,t,i){var r=this,f=n.keyCode,u=r._getKeyCodeEnum();switch(f){case u.UP:r._activeDropDownListElement(!1,t,i),n.preventDefault();break;case u.DOWN:r._activeDropDownListElement(!0,t,i),n.preventDefault();break;case u.ENTER:t.find("label."+r.options.uiCSS.stateActive).parent("li").find("input").trigger("click"),n.preventDefault();break}},t.prototype._activeDropDownListElement=function(n,t,r){var e=this,o=t.find("li").length,u,f;if(!t.is(":visible")){e._showDropDownList(t,r);return}f=t.find("label."+e.options.uiCSS.stateActive).parent("li"),f&&f.length>0&&(u=t.find("li").index(f)),e._changeListItemActiveState(f,!1),u===undefined?u=0:n?(u++,u==o&&(u=undefined)):(u--,u==-1&&(u=o-1)),e._changeListItemActiveState(i(t.find("li")[u]),!0)},t.prototype._changeListItemActiveState=function(n,t){var r=this.options.uiCSS;if(!n)return;t?(i("label",n).addClass(r.stateActive),i("span",n).addClass(r.stateActive)):(i("label",n).removeClass(r.stateActive),i("span",n).removeClass(r.stateActive))},t.prototype._createGallery=function(){var t=this,n=t.options.uiCSS;i(".gcui-ribbon-gallery",t.element).each(function(r,u){i(u).children("div").each(function(r,u){i(u).bind("mouseenter",function(t){if(i(u).hasClass(n.stateDisabled))return;i(u).addClass(n.stateHover)}).bind("mouseleave",function(t){if(i(u).hasClass(n.stateDisabled))return;i(u).removeClass(n.stateHover)}).bind("click",function(r){if(i(u).hasClass(n.stateDisabled))return;i(u).parent("div.gcui-ribbon-gallery").children("div").removeClass(n.stateActive),i(u).addClass(n.stateActive);var f={name:undefined,commandName:undefined};f.name=i(u).parent("div.gcui-ribbon-gallery").attr("name"),f.commandName=i(u).attr("name"),t._trigger("click",r,f)}),t.buttons[i(u).attr("name")]={button:i(u),type:"galleryBtn"}})})},t.prototype._getKeyCodeEnum=function(){if(i.ui&&i.ui.keyCode)return i.ui.keyCode;if(i.mobile&&i.mobile.keyCode)return i.mobile.keyCode;throw"keyCode object is not found";},t.prototype._createInputDropDownWrapper=function(n){var t=this.options.uiCSS,r=i("<span class='gcui-ribbon-inputdropdownwrapper'></span>").append(n);return i("<a></a>").appendTo(r).button({icons:{primary:t.iconArrowDown},text:!1}).removeClass(t.cornerAll).addClass("gcui-ribbon-inputdropdownbtn "+t.cornerRight),r},t.prototype._createTab=function(){var t=this,u=this.options.uiCSS,n=t.element;n.addClass(r),t.tabEle=n;if(i(">ul",n).length>0)return n.gcuitabs({select:function(n,i){t._hideAllMenus()}}),t._createRibbonGroups(),i(".gcui-ribbon-startmenu")&&i(".gcui-ribbon-startmenu").length>0&&(n.gcuitabs("option","selected",1),t._createStartMenu()),!0;else n.addClass(r+"-simple").addClass(u.stateDefault).addClass(u.helperClearFix);return!1},t.prototype._createAccessToolBar=function(){var n=this,r,t=i("<div class='gcui-ribbon-accesstoolbar'></div>"),u;if(i("*[canlocateonaccesstoolbar='true']",n.element).length===0&&i("*[locateonaccesstoolbar='true']",n.element).length===0)return;i("input[canlocateonaccesstoolbar='true'],input[locateonaccesstoolbar='true']",n.element).each(function(){r=i(this).attr("id")+"_accessbar";var t=i("label[for="+i(this).attr("id")+"]");n.accessbarBtns[t.attr("title")]={button:i(this).clone().attr("id",r),type:i(this).attr("type"),labelEle:t.clone().attr("for",r),selected:i(this).attr("locateonaccesstoolbar")==="true"?!0:!1}}),i("button[canlocateonaccesstoolbar='true'],button[locateonaccesstoolbar='true']",n.element).each(function(){r=i(this).attr("id")+"_accessbar",n.accessbarBtns[i(this).attr("title")]={button:i(this).clone(),type:"button",selected:i(this).attr("locateonaccesstoolbar")==="true"?!0:!1}}),i.each(n.accessbarBtns,function(n,i){t.append(i.button),i.labelEle&&t.append(i.labelEle)}),u=i('<button title="Customize Access Toolbar" class ="gcui-ribbon-accesstoolbarbtn '+n.options.uiCSS.iconArrowDown+'" name="quicktoolbar"></button>'),t.append(u),n.accessbarBtns&&n.element.prepend(t),n._createCustomQuickToolbarMenu(u,t)},t.prototype._createCustomQuickToolbarMenu=function(n,t){var e=this,f,o,u=e.options.uiCSS,r=i('<ul class="gcui-ribbon-accesstoolbarmenu"></ul>');i.each(e.accessbarBtns,function(n,t){o=t.selected?" gcui-ribbon-accesstoolbarmenuitemchecked":" gcui-ribbon-accesstoolbarmenuitemunchecked",f=i('<li><a class="'+u.cornerAll+'" tabindex="-1"><span class="'+u.icon+o+'"></span><span class="gcui-menu-text">'+n+"</span></a></li>"),f.data("accessbarcommand",n),r.append(f)}),r.prepend("<li class='gcui-ribbon-accesstoolbarmenutitleitem'><a>Customize Access Toolbar</a></li>"),t.append(r),r.gcuimenu({trigger:n,triggerEvent:"click",orientation:"vertical",select:function(n,t){var s=t.item,h=s.element.data("accessbarcommand"),f=i("span."+u.icon,s.element),c=e.accessbarBtns[h].button,o=c.button("widget");f.hasClass("gcui-ribbon-accesstoolbarmenuitemchecked")?(f.removeClass("gcui-ribbon-accesstoolbarmenuitemchecked").addClass("gcui-ribbon-accesstoolbarmenuitemunchecked"),o.hide().removeAttr("canlocateonaccesstoolbar").attr("locateonaccesstoolbar","true")):(f.addClass("gcui-ribbon-accesstoolbarmenuitemchecked").removeClass("gcui-ribbon-accesstoolbarmenuitemunchecked"),o.show().removeAttr("locateonaccesstoolbar").attr("canlocateonaccesstoolbar","true")),r.gcuimenu("deactivate",null)}}),r.gcuimenu("setItemDisabled",i(".gcui-ribbon-accesstoolbarmenutitleitem"),!0)},t.prototype.updateRibbonSize=function(){var n=this,t,o=this.options.uiCSS,e;n.tabEle.children("div").not(".gcui-menu").each(function(s,h){var c=i(h),v=c.is(":visible"),y=c.find(">ul>li:not(.gcui-menu-item)"),l=[],a=c.width();return v||(c.removeClass(o.tabsHide),a=c.width()),y.each(function(o,s){var h=i(s),a=h.find(">div:last"),c=n._getGroupLabelText(a);return t=h.children("."+f),e=h.children("."+u),t&&(h.addClass(r+"-"+c.toLowerCase()).prepend(t.children()),t.remove(),e&&e.remove()),l.push({width:h.outerWidth(!0),contentWidth:h.width(),height:h.outerHeight(!0),text:c}),this}),n._adjustRibbonGroupIfNeeded(y,l,a),v||c.addClass(o.tabsHide),this}),n.options.disabled&&n._setDisabled(!0)},t.prototype._createRibbonGroups=function(){var t=this,n=this.options.uiCSS;t.tabEle.children("div").each(function(u,f){var o=i(f),c=o.is(":visible"),a=o.find(">ul:not(.gcui-ribbon-accesstoolbarmenu)>li"),s=[],h;if(o.data("destroy.tabs")){o.remove();return}return c||o.removeClass(n.tabsHide),h=o.width(),o.addClass(b),o.hasClass(n.tabsPanel)||(o.addClass("gcui-ribbon-accesstoolbar"),t.tabEle.prepend(o)),o.find(">ul").addClass(n.helperReset+" "+n.helperClearFix+" "+n.content+" "+n.cornerAll+" "+l),a.each(function(u,f){var o=i(f),h=o.find(">div:last"),a=h.find("span"),l=n.stateDefault+" "+e,c=t._getGroupLabelText(h);return h&&(l+=" "+r+"-"+c.toLowerCase()),o.addClass(l),h.addClass(k).bind("click",function(){return!1}),o.wrapInner("<div class = '"+w+"'></div>"),o.children().bind("mouseover",function(){i(this).addClass(n.stateHover)}).bind("mouseout",function(){i(this).removeClass(n.stateHover)}),h.appendTo(o),s.push({width:o.outerWidth(!0),text:c}),this}),t._originalGroupInfo=s,t._adjustRibbonGroupIfNeeded(a,s,h),c||o.addClass(n.tabsHide),this})},t.prototype._createStartMenu=function(){var n=this,r=i(".gcui-ribbon-startmenulink",n.element),t=n.options.uiCSS;r.unbind("click"),r.parent("li").addClass("gcui-ribbon-startmenulinkcontainer").hover(function(){i(this).removeClass("gcui-ribbon-startmenulinkcontainer")},function(){i(this).addClass("gcui-ribbon-startmenulinkcontainer")}),i(".gcui-ribbon-startmenuindicator",n.element).addClass(t.icon+" "+t.iconArrowDown),i(".gcui-ribbon-startmenu",n.element).gcuimenu({trigger:i(".gcui-ribbon-startmenulink",n.element).parent(),triggerEvent:"click",orientation:"vertical",select:function(t,i){var r={name:undefined,commandName:undefined};r.commandName=i.item._link.attr("name"),n._trigger("click",t,r)},hidden:function(n,i){i.activeItem&&i.activeItem._link.removeClass(t.stateFocus)}})},t.prototype._getGroupLabelText=function(n){var r,t;return n&&(r=n.find("span"),t=n.attr("displayname")?n.attr("displayname"):r&&r.length>0&&!n.hasClass(u)?i(r[0]).text():i.trim(n.text())),t},t.prototype._adjustRibbonGroupIfNeeded=function(n,t,e){for(var y=this,o=n.length-1,h=0,v=0,c=0,s,l,a;o>=0;o--){for(c=0,h=0;h<o;h++)c+=t[h].width;c+v+t[o].width>e?(a=t[o],v+=y._createDropDownRibbonGroup(a,n[o],e)):(s=i(n[o]).children("."+f),l=i(n[o]).children("."+u),s&&(i(n[o]).addClass(r+"-"+t[o].text.toLowerCase()).prepend(s.children()),s.remove(),l&&l.remove()))}},t.prototype._createDropDownRibbonGroup=function(n,t,o){var s=this,y=n.text,w=r+"-"+y.toLowerCase(),l=this.options.uiCSS,a=i(t).removeClass(w),v=s._getGroupLabelText(a.find(">div:last"))||y,b;return a.wrapInner("<div class='"+f+" "+e+"'></div>").children().hide().addClass(w).bind("mouseup."+s.widget,function(n){s.showDrpDwnGroup!==null&&(s.showDrpDwnGroup.hide().css("z-index",""),s.showDrpDwnGroup=null)}),b=i("<div class='"+u+"'><span class='"+c+v.toLowerCase()+" "+h+" "+p+"'></span><span class='"+d+"'>"+v+"</span><span class='"+l.icon+" "+l.iconArrowDown+" "+h+"'></span></div>").appendTo(a).unbind(s.widget).bind("mouseover."+s.widget,function(n){i(this).addClass(l.stateHover)}).bind("mouseout."+s.widget,function(n){i(this).removeClass(l.stateHover)}).bind("click."+s.widget,function(t){var r=i(this).siblings("."+f),e,u;r.is(":visible")?(r.hide().css("z-index",""),s.showDrpDwnGroup=null):(s.showDrpDwnGroup&&s.showDrpDwnGroup.hide().css("z-index",""),e=n.contentWidth+1,u=n.height,r.css({width:e,height:u}),r.show().position({my:"left top",at:"left bottom",of:this}).css("z-index","10000"),s.showDrpDwnGroup=r,t.stopPropagation())}),a.outerWidth(!0)},t.prototype._hideShowedList=function(){var n=this;i(document).bind("mouseup",function(t){var r=t.target;n.showList&&(i(r).is(document)||!i.contains(n.showList.get(0),r))&&(n.showList.hide().css("z-index",""),n.showList=null),n.showDrpDwnGroup&&(i(r).is(document)||!i.contains(n.showDrpDwnGroup.get(0),r))&&(n.showDrpDwnGroup.hide().css("z-index",""),n.showDrpDwnGroup=null)})},t.prototype._buildButtonOption=function(n,t){var l=!0,c=this,f=n.attr("class"),r,s,h,a,o,e,u;if(f&&f!==""&&f!==v)s=f.split(" ")[0],n.removeClass(s),o=i.trim(n.text()),o===""&&(l=!1);else{if(t==="checkbox"||t==="radio"){if(i.trim(n.attr("id"))==="")return;e=i("[for='"+n.attr("id")+"']",n.parent());if(!e.is("label"))return;f=e.attr("class"),f&&f!==""&&f!==v?(s=f.split(" ")[0],e.removeClass(s),o=i.trim(e.text()),o===""&&(l=!1)):r=e.children("span,div")}else t==="button"&&(r=n.children("span,div"));r&&(r.length===1?r.eq(0).attr("class")!==""&&(h=r.eq(0),s=h.attr("class"),l=!1):r.length===2?r.eq(0).attr("class")&&(h=r.eq(0),s=h.attr("class"),h.is("span")?a="left":h.is("div")&&(a="top"),o=r.eq(1).text()):t==="button"&&i.trim(n.text())!==""&&(o=i.trim(n.text())))}return t==="button"?(n.empty(),u=i.trim(n.attr("name")),u!==""&&n.removeAttr("name")):(u=i.trim(e.attr("name")),u!==""&&e.removeAttr("name")),u!==""&&(n.data("commandName",u),c.buttons[u]||(c.buttons[u]={button:undefined,accessToolbarButton:undefined}),n.parent().is(".gcui-ribbon-accesstoolbar")?c.buttons[u].accessToolbarButton=n:c.buttons[u].button=n),{label:o,icons:{primary:s},position:a,text:l}},t.prototype._triggerEvent=function(n){var t=this,r,f,u=t.options.uiCSS;n.bind("click",function(e){if(t.options.disabled){e.preventDefault(),e.stopPropagation();return}t._hideAllMenus();var c=!0,o=n.data("commandName"),h=t.buttons[o],s={name:undefined,commandName:undefined};h&&h.parent&&(s.name=h.parent.data("commandName")),s.commandName=o,t._trigger("click",e,s),r=n.parent().is(".gcui-ribbon-accesstoolbar")?t.buttons[o].button:t.buttons[o].accessToolbarButton,r&&(f=r.button("widget"),r.is("button")||(f&&f.hasClass(u.stateActive)&&(c=!1),t._setBtnWidgetCheckedStyle(r,c))),n.is("button")&&(e.preventDefault(),e.stopPropagation()),i("."+u.buttonText,this).removeClass(u.stateHover)})},t.prototype._getDropdownLabelSubstr=function(n,t,r){var c=this,l=n.length,s=0,h=l,f=Math.floor((s+h)/2),o=i("<span></span>"),e=n.substr(0,f),u;o.appendTo(t.parent()),u=c._calculateWidth(e,o);while(u!==r&&h>s)e=n.substr(0,f+1),u=c._calculateWidth(e,o),u>r?h=f-1:u<r&&(s=f+1),f=Math.floor((s+h)/2);return o.remove(),e},t.prototype._calculateWidth=function(n,t){return t.text(n),t.width()},t.prototype.hideDropdown=function(n){var i=this,t=i.listUis[n];t&&t.list&&t.list.hide()},t.prototype._hideAllMenus=function(){var n=this;i(".gcui-menu",n.tabEle).hide()},t.prototype.setTabPageVisible=function(n,t){var e=this,r=i("a[href=#"+n+"]",e.element).parent("li"),u=r.parent("ul"),f;r&&r.length>0&&(t?(r.show(),f=i("li",u).index(r)):(r.hide(),f=i("li",u).index(i('li:visible:not(".gcui-ribbon-startmenulinkcontainer")',u)))),e.element.gcuitabs("option","selected",f)},t.prototype.destroy=function(){this.disabledModal&&this.disabledModal.remove(),i(window).unbind("resize."+this.widgetName),i.Widget.prototype.destroy.call(this)},t.prototype.getDropdownList=function(n){var u=this,t=u.listUis[n],r={};return t&&i.each(t.buttons,function(n,t){r[t.data("commandName")]=t.button("option","label")}),r},t.prototype.setButtonDisabled=function(n,t){var r=this.buttons[n],f=this.options.uiCSS,s=!1,u,o,e;if(r&&r.disabled){r.disabled(t);return}r&&r.button&&r.type==="galleryBtn"&&r.button.addClass(f.stateDisabled);if(r&&r.button){u=r.button,o=r.accessToolbarButton,s=u.is("button");if(r.type==="galleryBtn"){t?u.addClass(f.stateDisabled):u.removeClass(f.stateDisabled);return}u.button("option","disabled",t),o&&o.button("option","disabled",t),s?n!=="save"&&o&&u.children("."+f.buttonText).text(n):i("[for='"+u.attr("id")+"']",u.parent()).children("."+f.buttonText).text(n),e=this.listUis[n],e&&e.type==="split"&&(e.trigger.button("option","disabled",t),e.trigger.children("."+f.buttonText).text(n))}},t.prototype.setButtonsDisabled=function(n){var t=this;i.each(n,function(n,i){t.setButtonDisabled(n,i)})},t.prototype.setButtonsChecked=function(n){var t=this;i.each(n,function(n,r){i.isPlainObject(r)?t.setButtonChecked(n,r.checked,r.name):t.setButtonChecked(n,r,null)})},t.prototype.registerButtonInformation=function(n,t){if(n&&t)return this.buttons[n]=t},t.prototype.ribbonClick=function(n,t){this._trigger("click",n,t)},t.prototype._setBtnWidgetCheckedStyle=function(n,t){var r=this,n,i=r.options.uiCSS;n.is("button")?t?n.addClass(i.stateActive):n.removeClass(i.stateActive):n.is("input[type='text']")||(n.prop("checked",t),n.button("refresh")),r._addActiveClassToButtonText(n.button("widget"))},t.prototype.setButtonChecked=function(n,t,r){var o=this,l,u=o.buttons[n],h=this.options.uiCSS,f,e,s,c,a;if(u&&u.checked){u.checked(t);return}if(u&&u.button){f=u.button,e=u.accessToolbarButton;if(f.is("button"))t?(f.addClass(h.stateActive),e&&e.addClass(h.stateActive)):(f.removeClass(h.stateActive),e&&e.removeClass(h.stateActive));else if(u.type==="galleryBtn"){a=f.parent("div"),i("div",a).removeClass(h.stateActive),t?f.addClass(h.stateActive):f.removeClass(h.stateActive);return}else f.is("input[type='text']")||(f.prop("checked",t),f.button("refresh"),e&&(e.prop("checked",t),e.button("refresh")));u.parent?u.type==="dropdown"&&t&&(o.dropdownLabels[n]||(o.dropdownLabels[n]=o._getDropdownLabelSubstr(f.button("option","label"),u.parent.children("."+h.buttonText),u.parent.children("."+h.buttonText).width())),c=o.dropdownLabels[n],u.parent.is("input[type='text']")?(u.parent.val(c),u.parent.attr("title",c)):(u.parent.button("option","label",c),u.parent.attr("title",f.button("option","label"))),l=i(":radio",u.button.closest("ul")),l&&i.each(l,function(){o._updateGroupElementTextState(this)})):(o._addActiveClassToButtonText(f.button("widget")),e&&o._addActiveClassToButtonText(e.button("widget")))}else r&&(s=o.listUis[r],s&&(s.ui.is("input[type='text']")?s.ui.val(s.defaultValue):s.ui.button("option","label",s.defaultValue),s.buttons&&i.each(s.buttons,function(n,t){t.prop("checked",!1),t.button("refresh"),o._addActiveClassToButtonText(t.button("widget"))})))},t}(n.gcuiWidget),a;t.gcuiribbon=o,a=function(){function n(){this.initSelector=":jqmData(role='gcuiribbon')",this.uiCSS={tabsHide:"gcui-gcuitabs-hide",dropDownGroupSpace:20},this.click=null,this.custombuttons=null}return n}(),o.prototype.options=i.extend(!0,{},n.gcuiWidget.prototype.options,new a),i.gcui.registerWidget("gcuiribbon",o.prototype)})(n.ribbon||(n.ribbon={}))}(gcui||(gcui={}))